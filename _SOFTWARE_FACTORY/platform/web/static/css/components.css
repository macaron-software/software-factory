/* Macaron Agent Platform — Design System Components
 * Shared atomic & molecule components for all templates.
 * Included after main.css — extends (never duplicates) base tokens & classes.
 */

/* ═══════════════════════════════════════════════════════
   ATOMS — Small reusable primitives
   ═══════════════════════════════════════════════════════ */

/* Avatar — circle with img, svg icon, or initial letter */
.avatar{display:inline-flex;align-items:center;justify-content:center;border-radius:50%;flex-shrink:0;overflow:hidden;border:2px solid var(--border);background:var(--bg-tertiary)}
.avatar img{width:100%;height:100%;object-fit:cover;border-radius:50%}
.avatar svg{width:50%;height:50%}
.avatar--xs{width:24px;height:24px;font-size:0.6rem}
.avatar--sm{width:28px;height:28px;font-size:0.68rem}
.avatar--md{width:36px;height:36px;font-size:0.78rem}
.avatar--lg{width:44px;height:44px;font-size:0.88rem}
.avatar--xl{width:56px;height:56px;font-size:1rem}

/* Status indicator — glowing dot for agent/mission/task state */
.dot{width:8px;height:8px;border-radius:50%;display:inline-block;flex-shrink:0}
.dot--active{background:var(--green);box-shadow:0 0 6px var(--green)}
.dot--idle{background:#6b7280}
.dot--thinking{background:var(--yellow);animation:ds-pulse 1.5s infinite}
.dot--error{background:var(--red);box-shadow:0 0 6px var(--red)}
.dot--planning{background:var(--yellow)}
.dot--completed{background:var(--blue)}
.dot--blocked{background:var(--red)}
@keyframes ds-pulse{0%,100%{opacity:1}50%{opacity:.3}}

/* Tag / Pill — inline labels for skills, tools, domains, types */
.pill{display:inline-block;padding:0.1rem 0.4rem;border-radius:4px;font-size:0.68rem;background:var(--bg-secondary);border:1px solid var(--border);line-height:1.4}
.pill--skill{border-color:rgba(124,58,237,.35);color:var(--purple)}
.pill--tool{border-color:rgba(16,185,129,.3);color:var(--green)}
.pill--mcp{border-color:rgba(245,158,11,.3);color:var(--yellow)}
.pill--domain{border-color:rgba(124,138,255,.3);color:var(--blue)}
.pill--feature{background:rgba(168,85,247,.15);color:#a855f7;border-color:transparent}
.pill--fix{background:rgba(248,113,113,.15);color:#f87171;border-color:transparent}
.pill--refactor{background:rgba(96,165,250,.15);color:#60a5fa;border-color:transparent}
.pill--test{background:rgba(52,211,153,.15);color:#34d399;border-color:transparent}
.pill--security{background:rgba(251,191,36,.15);color:#fbbf24;border-color:transparent}

/* Progress bar — thin horizontal fill */
.progress{height:4px;background:var(--bg-tertiary);border-radius:2px;overflow:hidden}
.progress__fill{height:100%;background:linear-gradient(90deg,var(--purple),var(--purple-light,#c084fc));border-radius:2px;transition:width .3s}

/* Metric card — big number + label */
.metric{background:var(--bg-secondary);border:1px solid var(--border);border-radius:var(--radius);padding:1rem;text-align:center}
.metric__value{font-size:1.8rem;font-weight:700;color:var(--purple-light,#c084fc);line-height:1}
.metric__label{font-size:0.72rem;color:var(--text-secondary);margin-top:0.3rem;text-transform:uppercase;letter-spacing:0.5px}
.metric--sm .metric__value{font-size:1.2rem}
.metric--sm{padding:0.65rem}

/* Section title — reusable header with icon */
.section-title{font-size:0.82rem;font-weight:700;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px;margin-bottom:0.75rem;display:flex;align-items:center;gap:0.5rem}
.section-title svg{width:16px;height:16px}

/* Button extensions */
.btn-ghost{background:transparent;border:1px solid var(--border);color:var(--text-secondary)}
.btn-ghost:hover{border-color:var(--purple);color:var(--purple-light,#c084fc)}
.btn-purple{background:var(--purple);color:#fff;border-color:var(--purple)}
.btn-purple:hover{opacity:.85}
.btn-icon{width:32px;height:32px;padding:0;display:inline-flex;align-items:center;justify-content:center;border-radius:6px}

/* ═══════════════════════════════════════════════════════
   MOLECULES — Composite components
   ═══════════════════════════════════════════════════════ */

/* Card — generic container (bg-secondary, border, radius) */
.card{background:var(--bg-secondary);border:1px solid var(--border);border-radius:var(--radius);padding:1rem;transition:border-color .15s}
.card:hover{border-color:var(--purple)}
.card--clickable{cursor:pointer;text-decoration:none;color:inherit;display:block}
.card--clickable:hover{background:var(--bg-tertiary)}
.card__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:0.75rem}
.card__title{font-size:1rem;font-weight:700;color:var(--text-primary);display:flex;align-items:center;gap:0.5rem}
.card__subtitle{font-size:0.78rem;color:var(--text-secondary);margin-top:0.2rem}
.card__body{font-size:0.85rem}
.card__footer{display:flex;align-items:center;gap:0.5rem;margin-top:0.65rem}

/* Popover — fixed-position detail panel (for agent cards, etc.) */
.popover{position:fixed;background:var(--bg-tertiary);border:1px solid var(--border);border-radius:10px;padding:0.75rem 0.85rem;font-size:0.78rem;color:var(--text-primary);width:320px;max-height:70vh;overflow-y:auto;box-shadow:0 6px 24px rgba(0,0,0,.55);pointer-events:auto;z-index:1000;display:none;word-break:break-word}
.popover.visible{display:block}
.popover__close{position:absolute;top:0.35rem;right:0.5rem;background:none;border:none;color:var(--text-secondary);cursor:pointer;font-size:0.85rem;padding:0.2rem}
.popover__close:hover{color:var(--text-primary)}
.popover__header{display:flex;align-items:center;gap:0.6rem;margin-bottom:0.5rem;padding-bottom:0.45rem;border-bottom:1px solid var(--border)}
.popover__name{font-weight:700;font-size:0.88rem}
.popover__role{font-size:0.72rem;color:var(--text-secondary)}
.popover__tagline{font-size:0.72rem;color:var(--text-secondary);font-style:italic;line-height:1.3;margin-bottom:0.35rem}
.popover__desc{font-size:0.72rem;color:var(--text-secondary);line-height:1.35;margin-top:0.35rem}
.popover__section{margin-top:0.45rem}
.popover__section-title{font-size:0.68rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:0.2rem;font-weight:600}
.popover__tags{display:flex;flex-wrap:wrap;gap:0.25rem}

/* Kanban — column-based board */
.kanban{display:grid;grid-template-columns:repeat(4,1fr);gap:0.75rem;min-height:300px}
@media(max-width:1100px){.kanban{grid-template-columns:repeat(2,1fr)}}
.kanban__col{background:var(--bg-secondary);border-radius:var(--radius);padding:0.75rem;border:1px solid var(--border)}
.kanban__col-title{font-size:0.72rem;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;color:var(--text-secondary);margin-bottom:0.65rem;display:flex;align-items:center;justify-content:space-between}
.kanban__count{background:var(--bg-tertiary);padding:0.1rem 0.4rem;border-radius:4px;font-size:0.65rem}
.kanban__item{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:6px;padding:0.6rem;margin-bottom:0.5rem;transition:border-color .15s}
.kanban__item:hover{border-color:var(--purple)}
.kanban__item-title{font-size:0.8rem;font-weight:600;color:var(--text-primary);margin-bottom:0.25rem}
.kanban__item-meta{display:flex;align-items:center;gap:0.4rem;font-size:0.68rem;color:var(--text-secondary)}
.kanban__empty{font-size:0.75rem;color:var(--text-secondary);font-style:italic;text-align:center;padding:1rem 0}

/* Inline form — compact single-line form (add task, add sprint, etc.) */
.inline-form{display:flex;gap:0.4rem;padding:0.4rem;border-top:1px solid var(--border);margin-top:0.4rem}
.inline-form__input{flex:1;background:var(--bg-secondary);border:1px solid var(--border);border-radius:6px;padding:0.35rem 0.55rem;color:var(--text-primary);font-size:0.78rem;outline:none}
.inline-form__input:focus{border-color:var(--purple)}
.inline-form__btn{padding:0.35rem 0.55rem;border-radius:6px;border:none;background:var(--purple);color:white;cursor:pointer;font-size:0.72rem;display:flex;align-items:center;gap:0.25rem;white-space:nowrap}
.inline-form__btn:hover{opacity:.85}
.inline-form__btn:disabled{opacity:.4;cursor:not-allowed}

/* Tabs — horizontal tab bar */
.tabs{display:flex;gap:0;border-bottom:1px solid var(--border);margin-bottom:1rem}
.tab{padding:0.5rem 1rem;font-size:0.82rem;color:var(--text-secondary);cursor:pointer;border-bottom:2px solid transparent;transition:all .15s;background:none;border-top:none;border-left:none;border-right:none}
.tab:hover{color:var(--text-primary)}
.tab.active{color:var(--purple);border-bottom-color:var(--purple)}

/* Split layout — main + sidebar */
.split{display:grid;gap:1.25rem;height:calc(100vh - 56px);overflow:hidden}
.split--sidebar-right{grid-template-columns:1fr 320px}
.split--sidebar-left{grid-template-columns:320px 1fr}
@media(max-width:900px){.split{grid-template-columns:1fr!important;height:auto;overflow:auto}}
.split__main{overflow-y:auto;padding:0.5rem 0}
.split__aside{overflow-y:auto;border-left:1px solid var(--border);padding:0.75rem}

/* Metrics grid — responsive grid of metric cards */
.metrics-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:0.75rem;margin-bottom:1.5rem}

/* Cards grid — responsive grid of card components */
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1rem}
.cards-grid--compact{grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:0.75rem}

/* Empty state — centered placeholder */
.empty{display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--text-secondary);gap:0.75rem;text-align:center;padding:2rem}
.empty svg{width:48px;height:48px;opacity:.25}
.empty__title{font-size:1rem;font-weight:600;color:var(--text-primary)}
.empty__subtitle{font-size:0.82rem;max-width:400px;line-height:1.5}

/* ═══════════════════════════════════════════════════════
   UTILITIES
   ═══════════════════════════════════════════════════════ */
.flex{display:flex}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}
.items-center{align-items:center}.justify-between{justify-content:space-between}
.gap-xs{gap:0.25rem}.gap-sm{gap:0.5rem}.gap-md{gap:0.75rem}.gap-lg{gap:1rem}
.mt-sm{margin-top:0.5rem}.mt-md{margin-top:0.75rem}.mt-lg{margin-top:1.25rem}
.mb-sm{margin-bottom:0.5rem}.mb-md{margin-bottom:0.75rem}.mb-lg{margin-bottom:1.25rem}
.text-xs{font-size:0.68rem}.text-sm{font-size:0.78rem}.text-md{font-size:0.85rem}
.text-muted{color:var(--text-secondary)}.text-purple{color:var(--purple)}
.truncate{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.font-bold{font-weight:700}.font-mono{font-family:'JetBrains Mono',monospace}
