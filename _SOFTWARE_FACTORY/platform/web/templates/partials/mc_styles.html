<style>
.mc-layout{display:grid;grid-template-columns:1fr 340px;gap:0;height:calc(100vh - 80px)}
.mc-main{overflow-y:auto;padding:0 0.75rem 2rem 0}
.mc-sidebar{overflow-y:auto;border-left:1px solid var(--border);background:var(--bg-secondary)}

/* Stats bar */
.mc-stats{display:flex;align-items:center;gap:1rem;margin-bottom:0.75rem;padding:0.5rem 0}
.mc-stat-item{display:flex;align-items:center;gap:0.35rem;font-size:0.78rem;color:var(--text-secondary)}
.mc-stat-item .val{font-weight:700;color:var(--text-primary)}
.mc-progress-bar{flex:1;max-width:200px;height:5px;background:var(--bg-tertiary);border-radius:3px;overflow:hidden}
.mc-progress-fill{height:100%;background:var(--purple);border-radius:3px;transition:width .4s}

/* Timeline pipeline */
.mc-pipeline{display:flex;flex-direction:column;gap:0;position:relative}
.mc-phase{display:flex;align-items:stretch;gap:0;position:relative}
.mc-phase-line{width:32px;display:flex;flex-direction:column;align-items:center;flex-shrink:0}
.mc-phase-dot{width:14px;height:14px;border-radius:50%;border:2px solid var(--border);background:var(--bg-tertiary);z-index:1;flex-shrink:0;margin-top:0.75rem}
.mc-phase-connector{width:2px;flex:1;background:var(--border)}
.mc-phase:last-child .mc-phase-connector{display:none}
.mc-phase[data-status="done"] .mc-phase-dot{background:var(--green);border-color:var(--green)}
.mc-phase[data-status="done_with_issues"] .mc-phase-dot{background:var(--yellow);border-color:var(--yellow)}
.mc-phase[data-status="running"] .mc-phase-dot{background:var(--purple);border-color:var(--purple);animation:pulse-dot 1.5s ease-in-out infinite}
.mc-phase[data-status="failed"] .mc-phase-dot{background:var(--red);border-color:var(--red)}
.mc-phase[data-status="waiting_validation"] .mc-phase-dot{background:var(--yellow);border-color:var(--yellow);animation:pulse-dot 1s ease-in-out infinite}
.mc-phase[data-status="done"] .mc-phase-connector{background:var(--green)}
.mc-phase[data-status="done_with_issues"] .mc-phase-connector{background:var(--yellow)}
.mc-phase[data-status="running"] .mc-phase-connector{background:var(--purple)}
@keyframes pulse-dot{0%,100%{transform:scale(1)}50%{transform:scale(1.3)}}

/* Phase card */
.mc-phase-card{flex:1;background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;margin-bottom:0.5rem;overflow:hidden;transition:border-color .2s}
.mc-phase[data-status="running"] .mc-phase-card{border-color:var(--purple)}
.mc-phase[data-status="done"] .mc-phase-card{border-color:var(--green)}
.mc-phase[data-status="done_with_issues"] .mc-phase-card{border-color:var(--yellow)}
.mc-phase[data-status="failed"] .mc-phase-card{border-color:var(--red)}
.mc-phase[data-status="waiting_validation"] .mc-phase-card{border-color:var(--yellow)}

/* Phase header */
.mc-phase-header{display:flex;align-items:center;gap:0.5rem;padding:0.55rem 0.75rem;cursor:pointer;user-select:none;transition:background .15s}
.mc-phase-header:hover{background:var(--bg-tertiary)}
.mc-phase-num{font-size:0.65rem;color:var(--text-secondary);font-weight:700;min-width:1.2rem}
.mc-phase-name{font-size:0.82rem;font-weight:600;color:var(--text-primary);flex:1}
.mc-phase-avatars{display:flex;align-items:center;margin-right:0.2rem}
.mc-phase-avatars img{width:20px;height:20px;border-radius:50%;object-fit:cover;border:1.5px solid var(--bg-secondary)}
.mc-phase-avatars img+img{margin-left:-6px}
.mc-phase-avatars .more{font-size:0.62rem;color:var(--text-secondary);margin-left:0.2rem}
.mc-phase-pattern{font-size:0.62rem;color:var(--purple);background:rgba(124,58,237,.1);padding:0.12rem 0.45rem;border-radius:4px;font-weight:600}
.mc-phase-status-badge{font-size:0.62rem;padding:0.12rem 0.45rem;border-radius:4px;font-weight:600}
.mc-phase-status-badge.pending{color:var(--text-secondary);background:var(--bg-tertiary)}
.mc-phase-status-badge.running{color:var(--purple);background:rgba(124,58,237,.15)}
.mc-phase-status-badge.done{color:var(--green);background:rgba(34,197,94,.12)}
.mc-phase-status-badge.done_with_issues{color:var(--yellow);background:rgba(234,179,8,.12)}
.mc-phase-status-badge.failed{color:var(--red);background:rgba(239,68,68,.12)}
.mc-phase-status-badge.waiting_validation{color:var(--yellow);background:rgba(234,179,8,.12)}
.mc-phase-chevron{font-size:0.65rem;color:var(--text-secondary);transition:transform .2s}
.mc-phase.open .mc-phase-chevron{transform:rotate(90deg)}

/* Phase summary preview — visible when collapsed */
.mc-phase-summary{display:none;padding:0.4rem 0.75rem 0.35rem 2.2rem;font-size:0.72rem;color:var(--text-secondary);line-height:1.45;border-top:1px solid var(--border);background:var(--bg-secondary)}
.mc-phase-summary .mc-summary-line{display:flex;gap:0.4rem;align-items:baseline;margin-bottom:0.15rem}
.mc-phase-summary .mc-summary-agent{font-weight:600;color:var(--text-primary);white-space:nowrap;min-width:0;flex-shrink:0}
.mc-phase-summary .mc-summary-text{color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0}
.mc-phase:not(.open) .mc-phase-summary{display:block}
.mc-phase.open .mc-phase-summary{display:none}

/* Screenshot thumbnails in phase summary */
.mc-phase-thumbs{display:flex;gap:0.35rem;margin-top:0.35rem;overflow-x:auto;padding-bottom:0.2rem}
.mc-phase-thumb{width:80px;height:48px;border-radius:var(--radius-sm);border:1px solid var(--border-subtle);object-fit:cover;cursor:pointer;flex-shrink:0;transition:transform .15s,border-color .15s}
.mc-phase-thumb:hover{transform:scale(1.15);border-color:var(--purple);z-index:1}

/* Inline screenshot in messages */
.mc-screenshot{margin:0.5rem 0}
.mc-screenshot img{max-width:100%;border-radius:var(--radius-lg);border:1px solid var(--border-subtle);cursor:pointer;transition:transform .15s}
.mc-screenshot img:hover{transform:scale(1.02)}

/* Accordion body: graph row + discussion row */
.mc-phase-body{display:none;border-top:1px solid var(--border)}
.mc-phase.open .mc-phase-body{display:flex;flex-direction:column}

/* Full flow graph (SVG) — session_live style */
.mc-phase-graph{background:var(--bg-primary);border-bottom:1px solid var(--border);padding:0.4rem;position:relative;overflow:hidden}
.mc-phase-graph svg{width:100%;height:auto;display:block}
.mc-live-node{cursor:pointer}
.mc-live-node:hover .mc-live-node-bg{filter:brightness(1.15)}
.mc-live-node-bg{rx:10;ry:10;fill:var(--bg-secondary);stroke:var(--border);stroke-width:1.2;transition:stroke .2s,filter .15s}
.mc-live-node-bar{stroke-linecap:round}
.mc-live-node-name{fill:var(--text-primary);font-size:11.5px;font-weight:700;font-family:inherit}
.mc-live-node-role{fill:var(--text-secondary);font-size:8.5px;font-family:inherit}
.mc-live-node-status{fill:var(--text-secondary);font-size:7px;font-family:inherit;text-anchor:middle}
.mc-node-status--idle{fill:#6b7280}
.mc-node-status--thinking{fill:var(--yellow);animation:statusPulse 1.2s ease-in-out infinite}
.mc-node-status--acting{fill:var(--green);animation:statusPulse 2s ease-in-out infinite}
.mc-node-status--done{fill:var(--green)}
.mc-node-status--error{fill:var(--red)}
@keyframes statusPulse{0%,100%{r:5}50%{r:7}}
.mc-pulse-ring{fill:none;stroke-width:2;opacity:0;animation:mcPulseRing 2s ease-out infinite}
@keyframes mcPulseRing{0%{r:14;opacity:.6}100%{r:28;opacity:0}}
.mc-edge-line{fill:none;stroke:var(--purple);stroke-width:1.6;opacity:0.45;transition:stroke-width .2s,opacity .2s}
.mc-edge-count{fill:var(--text-secondary);font-size:8px;font-family:'SF Mono',monospace;text-anchor:middle;pointer-events:none}
.mc-graph-legend{position:absolute;bottom:6px;left:8px;background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:4px 8px;display:flex;gap:8px;align-items:center;font-size:0.62rem;color:var(--text-secondary)}

/* Discussion — uses mu__ classes from components.css */
.mc-phase-discuss{padding:0.75rem;overflow-y:auto;max-height:500px;display:flex;flex-direction:column;gap:0.6rem}
.mc-discuss-empty{font-size:0.72rem;color:var(--text-secondary);font-style:italic;padding:1.5rem 0.8rem;text-align:center}

/* Rendered markdown in discussions */
.md-rendered table{width:100%;border-collapse:collapse;margin:0.5rem 0;font-size:0.75rem}
.md-rendered th,.md-rendered td{border:1px solid rgba(255,255,255,.08);padding:0.3rem 0.5rem;text-align:left}
.md-rendered th{background:rgba(124,58,237,.1);font-weight:600;color:var(--text-primary)}
.md-rendered td{color:var(--text-secondary)}
.md-rendered h2,.md-rendered h3,.md-rendered h4{margin:0.5rem 0 0.3rem;color:var(--text-primary)}
.md-rendered pre{background:rgba(0,0,0,.3);border-radius:6px;padding:0.5rem;overflow-x:auto;font-size:0.7rem;margin:0.4rem 0}
.md-rendered code{background:rgba(124,58,237,.15);padding:0.1rem 0.3rem;border-radius:3px;font-size:0.72rem}
.md-rendered pre code{background:none;padding:0}
.md-rendered ul{margin:0.3rem 0;padding-left:1.2rem}
.md-rendered li{margin:0.15rem 0;color:var(--text-secondary)}
.md-rendered hr{border:none;border-top:1px solid rgba(255,255,255,.08);margin:0.5rem 0}
.md-rendered a{color:var(--purple);text-decoration:underline}

/* Streaming bubble — uses mu__ layout */
.mc-streaming .mu__bubble--agent{border-left:2px solid var(--purple);animation:stream-pulse 2s ease-in-out infinite}
@keyframes stream-pulse{0%,100%{border-left-color:var(--purple)}50%{border-left-color:rgba(124,58,237,.3)}}
.mc-stream-content{white-space:pre-wrap;word-break:break-word}
.mc-typing-cursor{color:var(--purple);animation:blink-cursor .7s step-end infinite;font-weight:700}
@keyframes blink-cursor{0%,100%{opacity:1}50%{opacity:0}}
.mc-thinking-badge{font-size:0.58rem;color:var(--purple);font-weight:600;animation:think-pulse 1.5s ease-in-out infinite}
@keyframes think-pulse{0%,100%{opacity:1}50%{opacity:.4}}

/* Checkpoint */
.mc-checkpoint{background:rgba(234,179,8,.08);border-top:1px solid var(--yellow);padding:0.6rem 0.75rem}

/* Agent popover */
.mc-popover-overlay{position:fixed;inset:0;z-index:999;display:none}
.mc-popover-overlay.open{display:block}
.mc-popover{position:fixed;z-index:1000;width:340px;background:var(--bg-secondary);border:1px solid var(--border);border-radius:var(--radius,10px);box-shadow:0 12px 40px rgba(0,0,0,.45);overflow:hidden;display:none;animation:mcPopIn .15s ease}
.mc-popover.open{display:block}
@keyframes mcPopIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.mc-popover-header{padding:0.85rem;display:flex;align-items:center;gap:0.75rem;border-bottom:1px solid var(--border)}
.mc-popover-photo{width:52px;height:52px;border-radius:50%;object-fit:cover;border:2px solid var(--purple);flex-shrink:0}
.mc-popover-photo-fallback{width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;color:#fff;flex-shrink:0}
.mc-popover-name{font-size:0.95rem;font-weight:700;color:var(--text-primary)}
.mc-popover-role{font-size:0.72rem;color:var(--text-secondary)}
.mc-popover-tagline{font-size:0.7rem;color:var(--purple);font-style:italic;margin-top:2px}
.mc-popover-body{padding:0.7rem 0.85rem;font-size:0.76rem;color:var(--text-secondary);line-height:1.5;max-height:340px;overflow-y:auto}
.mc-popover-section{margin-top:0.5rem}
.mc-popover-section-title{font-size:0.65rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);margin-bottom:0.25rem}
.mc-popover-text{font-size:0.76rem;color:var(--text-primary);line-height:1.5;white-space:pre-line}
.mc-popover-tags{display:flex;flex-wrap:wrap;gap:3px}
.mc-popover-tag{padding:0.12rem 0.4rem;border-radius:4px;font-size:0.62rem;background:var(--bg-tertiary);color:var(--text-secondary)}
.mc-popover-tag.skill{background:rgba(124,58,237,.12);color:var(--purple)}
.mc-popover-tag.tool{background:rgba(59,130,246,.12);color:var(--blue)}
.mc-popover-tag.mcp{background:rgba(34,197,94,.12);color:#22c55e}
.mc-popover-model{display:flex;align-items:center;gap:0.4rem;margin-top:0.5rem;padding:0.35rem 0.55rem;background:var(--bg-tertiary);border-radius:6px;font-size:0.68rem;color:var(--text-secondary)}
.mc-popover-close{position:absolute;top:0.4rem;right:0.5rem;background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:0.3rem;font-size:0.9rem;line-height:1}
.mc-popover-close:hover{color:var(--text-primary)}
.mc-checkpoint h4{color:var(--yellow);font-size:0.8rem;margin:0 0 0.4rem}
.mc-checkpoint-actions{display:flex;gap:0.5rem}
.mc-checkpoint-actions button{padding:0.25rem 0.7rem;border-radius:6px;font-size:0.72rem;font-weight:600;cursor:pointer;border:none;transition:opacity .15s}
.mc-checkpoint-actions button:hover{opacity:.85}
.mc-btn-go{background:var(--green);color:#fff}
.mc-btn-nogo{background:var(--red);color:#fff}
.mc-btn-pivot{background:var(--yellow);color:#000}

/* ====== RIGHT SIDEBAR ====== */
.mc-side-section{padding:0.6rem 0.75rem;border-bottom:1px solid var(--border)}
.mc-side-title{font-size:0.68rem;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;color:var(--text-secondary);margin-bottom:0.45rem;display:flex;align-items:center;gap:0.3rem}

/* CDP Agent Card */
.mc-cdp-card{padding:0.75rem;border-bottom:1px solid var(--border);background:var(--bg-secondary)}
.mc-cdp-card-inner{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:var(--radius,10px);overflow:hidden}
.mc-cdp-banner{height:56px;background:linear-gradient(135deg,rgba(124,58,237,.3),rgba(59,130,246,.18));position:relative}
.mc-cdp-avatar-wrap{position:absolute;bottom:-32px;left:16px}
.mc-cdp-avatar{width:64px;height:64px;border-radius:50%;object-fit:cover;border:3px solid var(--bg-tertiary);box-shadow:0 4px 12px rgba(0,0,0,.35)}
.mc-cdp-body{padding:2.2rem 0.85rem 0.5rem}
.mc-cdp-name{font-size:0.95rem;font-weight:700;color:var(--text-primary);margin:0;line-height:1.2}
.mc-cdp-role{font-size:0.68rem;color:var(--text-secondary);margin-top:0.1rem}
.mc-cdp-tagline{font-size:0.66rem;color:var(--purple);font-style:italic;margin-top:0.25rem;line-height:1.4}
.mc-cdp-status-row{display:flex;align-items:center;gap:0.5rem;margin-top:0.4rem}
.mc-cdp-status{font-size:0.58rem;padding:0.15rem 0.45rem;border-radius:4px;font-weight:600}
.mc-cdp-status.active{background:rgba(124,58,237,.15);color:var(--purple);animation:pulse-dot 2s ease-in-out infinite}
.mc-cdp-status.idle{background:var(--bg-tertiary);color:var(--text-secondary)}
.mc-cdp-section{margin-top:0.55rem}
.mc-cdp-section-title{font-size:0.56rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);margin-bottom:0.2rem}
.mc-cdp-persona{font-size:0.65rem;color:var(--text-secondary);line-height:1.45}
.mc-cdp-motivation{font-size:0.65rem;color:var(--text-primary);line-height:1.45;padding:0.3rem 0.5rem;background:rgba(124,58,237,.06);border-radius:6px;border-left:2px solid var(--purple)}
.mc-cdp-tags{display:flex;flex-wrap:wrap;gap:3px}
.mc-cdp-tag{padding:0.1rem 0.35rem;border-radius:4px;font-size:0.58rem}
.mc-cdp-tag.skill{background:rgba(124,58,237,.1);color:var(--purple)}
.mc-cdp-tag.tool{background:rgba(59,130,246,.1);color:var(--blue,#3b82f6)}
.mc-cdp-tag.mcp{background:rgba(34,197,94,.12);color:#22c55e}
.mc-cdp-actions{display:flex;gap:0.4rem;margin-top:0.6rem}
.mc-cdp-btn{flex:1;padding:0.4rem;border:none;border-radius:6px;font-size:0.72rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.3rem;transition:opacity .15s}
.mc-cdp-btn:hover{opacity:.85}
.mc-cdp-btn-chat{background:var(--purple);color:#fff}
.mc-cdp-btn-wf{background:transparent;border:1px solid var(--border);color:var(--text-secondary)}
.mc-cdp-btn-wf:hover{border-color:var(--purple);color:var(--purple)}

/* CDP Chat Modal */
.mc-chat-overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:1200;display:none;align-items:center;justify-content:center}
.mc-chat-overlay.open{display:flex}
.mc-chat-modal{width:560px;max-width:92vw;height:72vh;max-height:700px;background:var(--bg-secondary);border:1px solid var(--border);border-radius:var(--radius,10px);display:flex;flex-direction:column;box-shadow:0 20px 60px rgba(0,0,0,.5);animation:mcPopIn .2s ease}
.mc-chat-head{display:flex;align-items:center;gap:0.6rem;padding:0.65rem 0.85rem;border-bottom:1px solid var(--border);flex-shrink:0}
.mc-chat-head-avatar{width:36px;height:36px;border-radius:50%;object-fit:cover;border:2px solid var(--purple)}
.mc-chat-head-info h3{font-size:0.85rem;margin:0;color:var(--text-primary);font-weight:700}
.mc-chat-head-info small{font-size:0.65rem;color:var(--text-secondary)}
.mc-chat-close{margin-left:auto;background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:0.3rem;font-size:1.1rem;line-height:1;border-radius:4px}
.mc-chat-close:hover{color:var(--text-primary);background:var(--bg-tertiary)}
.mc-chat-msgs{flex:1;overflow-y:auto;padding:0.75rem;display:flex;flex-direction:column;gap:0.6rem}

/* Bubbles — reuse DS mu__ patterns */
.mc-chat-msg{display:flex;gap:0.5rem;max-width:88%}
.mc-chat-msg.user{align-self:flex-end;flex-direction:row-reverse}
.mc-chat-msg.agent{align-self:flex-start}
.mc-chat-msg.system{align-self:center;max-width:100%}
.mc-chat-msg-avatar{width:28px;height:28px;border-radius:50%;object-fit:cover;flex-shrink:0;margin-top:2px}
.mc-chat-msg-avatar.user-av{background:var(--purple);display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;color:#fff}
.mc-chat-bubble{padding:0.5rem 0.75rem;border-radius:12px;font-size:0.82rem;line-height:1.55;word-break:break-word;overflow:hidden}
.mc-chat-msg.user .mc-chat-bubble{background:var(--purple);color:#fff;border-top-right-radius:4px}
.mc-chat-msg.agent .mc-chat-bubble{background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border);border-top-left-radius:4px}
.mc-chat-msg.system .mc-chat-bubble{background:none;color:var(--text-secondary);font-size:0.7rem;font-style:italic;padding:0.15rem 0;text-align:center}
.mc-chat-bubble .mu__sender{display:flex;gap:0.35rem;align-items:baseline;margin-bottom:0.2rem}
.mc-chat-bubble .mu__name{font-size:0.75rem;font-weight:600;color:var(--purple)}
.mc-chat-bubble .mu__role{font-size:0.6rem;color:var(--text-secondary);font-style:italic}
.mc-chat-bubble .mu__content{font-size:0.82rem;color:var(--text-primary);line-height:1.55}
.mc-chat-bubble .mu__content.mu--streaming::after{content:'▌';animation:mu-blink .8s infinite;color:var(--purple);margin-left:1px}
@keyframes mu-blink{0%,100%{opacity:1}50%{opacity:0}}
.mc-chat-bubble .mu__footer{display:flex;justify-content:flex-end;margin-top:0.15rem}
.mc-chat-bubble .mu__time{font-size:0.6rem;color:var(--text-secondary)}

/* Streaming pulse on bubble border */
.mc-chat-msg.agent .mc-chat-bubble.streaming{border-left:3px solid var(--purple);animation:mc-stream-pulse 1.5s ease-in-out infinite}
@keyframes mc-stream-pulse{0%,100%{border-left-color:var(--purple)}50%{border-left-color:rgba(124,58,237,.3)}}

/* Thinking indicator with animated dots */
.mc-chat-thinking{display:flex;align-items:center;gap:0.4rem;padding:0.4rem 0.6rem;align-self:flex-start}
.mc-chat-thinking-text{font-size:0.75rem;color:var(--purple);font-style:italic}
.mc-chat-dots{display:inline-flex;gap:3px;margin-left:2px}
.mc-chat-dots span{width:5px;height:5px;border-radius:50%;background:var(--purple);animation:mc-dot-pulse 1.4s infinite both}
.mc-chat-dots span:nth-child(2){animation-delay:.2s}
.mc-chat-dots span:nth-child(3){animation-delay:.4s}
@keyframes mc-dot-pulse{0%,80%,100%{opacity:.3;transform:scale(.8)}40%{opacity:1;transform:scale(1)}}

/* Tool pills */
.mc-chat-tools{display:flex;flex-wrap:wrap;gap:3px;margin-top:0.3rem}
.mc-chat-tool-pill{font-size:0.6rem;padding:0.1rem 0.35rem;border-radius:4px;background:rgba(124,58,237,.12);color:var(--purple);display:inline-flex;align-items:center;gap:2px}

/* Markdown in chat */
.mc-chat-bubble .md-rendered{font-size:0.82rem;line-height:1.55}
.mc-chat-bubble .md-rendered p{margin:0.2rem 0}
.mc-chat-bubble .md-rendered ul,.mc-chat-bubble .md-rendered ol{margin:0.2rem 0;padding-left:1.2rem}
.mc-chat-bubble .md-rendered li{margin:0.1rem 0}
.mc-chat-bubble .md-rendered pre{background:rgba(0,0,0,.25);border-radius:6px;padding:0.4rem;overflow-x:auto;font-size:0.72rem;margin:0.3rem 0}
.mc-chat-bubble .md-rendered code{background:rgba(124,58,237,.12);padding:0.08rem 0.25rem;border-radius:3px;font-size:0.74rem}
.mc-chat-bubble .md-rendered pre code{background:none;padding:0}
.mc-chat-bubble .md-rendered h1,.mc-chat-bubble .md-rendered h2,.mc-chat-bubble .md-rendered h3{margin:0.3rem 0 0.15rem;font-size:0.88rem}
.mc-chat-bubble .md-rendered table{width:100%;border-collapse:collapse;margin:0.3rem 0;font-size:0.74rem}
.mc-chat-bubble .md-rendered th,.mc-chat-bubble .md-rendered td{border:1px solid rgba(255,255,255,.08);padding:0.2rem 0.4rem;text-align:left}
.mc-chat-bubble .md-rendered th{background:rgba(124,58,237,.08);font-weight:600}
.mc-chat-bubble .md-rendered a{color:var(--purple);text-decoration:underline}

/* Input row */
.mc-chat-input-row{display:flex;gap:0.4rem;padding:0.6rem 0.75rem;border-top:1px solid var(--border);flex-shrink:0}
.mc-chat-input{flex:1;padding:0.45rem 0.65rem;border:1px solid var(--border);border-radius:8px;background:var(--bg-tertiary);color:var(--text-primary);font-size:0.82rem;font-family:inherit;outline:none;resize:none;min-height:38px;max-height:120px}
.mc-chat-input:focus{border-color:var(--purple)}
.mc-chat-send{padding:0.4rem 0.75rem;border:none;border-radius:8px;background:var(--purple);color:#fff;font-size:0.78rem;font-weight:600;cursor:pointer;transition:opacity .15s;flex-shrink:0}
.mc-chat-send:hover{opacity:.85}
.mc-chat-send:disabled{opacity:.4;cursor:default}

.mc-activity{display:flex;flex-direction:column;gap:0.3rem;padding:0.5rem 0.75rem;max-height:240px;overflow-y:auto}
.mc-msg{background:var(--bg-tertiary);border-radius:6px;padding:0.3rem 0.5rem;font-size:0.7rem;color:var(--text-secondary);line-height:1.3}
.mc-msg.tool{border-left:2px solid var(--purple);font-family:var(--font-mono,monospace);font-size:0.65rem}
.mc-msg.system{border-left:2px solid var(--yellow)}
.mc-msg-time{font-size:0.55rem;color:var(--text-secondary);margin-bottom:0.1rem}
.mc-msg-content{white-space:pre-wrap;word-break:break-word}

/* Memory — mini wiki */
.mc-mem-search{width:100%;padding:0.3rem 0.5rem;border:1px solid var(--border);border-radius:6px;background:var(--bg-tertiary);color:var(--text-primary);font-size:0.68rem;margin-bottom:0.4rem;outline:none}
.mc-mem-search:focus{border-color:var(--purple)}
.mc-mem-group{margin-bottom:0.45rem}
.mc-mem-group-title{font-size:0.58rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--purple);cursor:pointer;display:flex;align-items:center;gap:0.3rem;padding:0.15rem 0;user-select:none}
.mc-mem-group-title:hover{color:#a78bfa}
.mc-mem-group-count{font-size:0.52rem;color:var(--text-secondary);font-weight:400}
.mc-mem-group-items{padding-left:0.1rem}
.mc-mem-entry{background:var(--bg-tertiary);border-radius:5px;padding:0.3rem 0.5rem;margin-bottom:0.2rem;font-size:0.7rem;cursor:pointer;transition:background .15s;border-left:2px solid transparent}
.mc-mem-entry:hover{background:rgba(124,58,237,.06);border-left-color:var(--purple)}
.mc-mem-key{font-weight:600;color:var(--text-primary);font-size:0.66rem}
.mc-mem-val{color:var(--text-secondary);font-size:0.62rem;line-height:1.3}
.mc-mem-meta{display:flex;align-items:center;gap:0.3rem;margin-top:0.15rem}
.mc-mem-confidence{height:3px;width:40px;background:var(--bg-tertiary);border-radius:2px;overflow:hidden}
.mc-mem-confidence-bar{height:100%;background:var(--purple);border-radius:2px}
.mc-mem-occurrences{font-size:0.5rem;color:var(--text-secondary)}
.mc-mem-add{width:100%;padding:0.25rem;border:1px dashed var(--border);border-radius:5px;background:transparent;color:var(--text-secondary);font-size:0.65rem;cursor:pointer;margin-top:0.3rem;transition:all .15s}
.mc-mem-add:hover{border-color:var(--purple);color:var(--purple)}
.mc-mem-empty{font-size:0.7rem;color:var(--text-secondary);font-style:italic;padding:0.3rem 0}

/* Git + PRs */
.mc-git-graph{display:grid;grid-template-columns:repeat(14,1fr);gap:2px;margin-bottom:0.5rem}
.mc-git-cell{aspect-ratio:1;border-radius:2px;background:var(--bg-tertiary)}
.mc-git-cell.l1{background:rgba(124,58,237,.2)}
.mc-git-cell.l2{background:rgba(124,58,237,.45)}
.mc-git-cell.l3{background:rgba(124,58,237,.7)}
.mc-git-cell.l4{background:var(--purple)}
.mc-commit{display:flex;align-items:baseline;gap:0.3rem;padding:0.2rem 0;font-size:0.68rem;border-bottom:1px solid var(--border)}
.mc-commit:last-child{border-bottom:none}
.mc-commit-hash{color:var(--purple);font-family:var(--font-mono,monospace);font-size:0.62rem;flex-shrink:0}
.mc-commit-msg{color:var(--text-secondary);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.mc-commit-time{color:var(--text-secondary);font-size:0.58rem;flex-shrink:0;opacity:.7}
.mc-pr{display:flex;align-items:center;gap:0.35rem;padding:0.25rem 0;border-bottom:1px solid var(--border);font-size:0.68rem}
.mc-pr:last-child{border-bottom:none}
.mc-pr-icon{color:#3fb950;flex-shrink:0}
.mc-pr-icon.merged{color:#a371f7}
.mc-pr-icon.closed{color:#f85149}
.mc-pr-title{color:var(--text-primary);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500}
.mc-pr-status{font-size:0.58rem;padding:0.1rem 0.35rem;border-radius:3px;font-weight:600}
.mc-pr-status.open{background:rgba(63,185,80,.12);color:#3fb950}
.mc-pr-status.merged{background:rgba(163,113,247,.12);color:#a371f7}
.mc-pr-status.closed{background:rgba(248,81,73,.12);color:#f85149}
.mc-pr-empty{font-size:0.7rem;color:var(--text-secondary);font-style:italic;padding:0.3rem 0}
.mc-commit{display:flex;align-items:center;gap:0.4rem;padding:0.2rem 0;font-size:0.68rem;border-bottom:1px solid var(--border)}
.mc-commit:last-child{border-bottom:none}
.mc-commit-hash{color:var(--purple);font-size:0.62rem;background:rgba(124,58,237,.08);padding:0.1rem 0.3rem;border-radius:3px;flex-shrink:0}
.mc-commit-msg{color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.mc-si-item{font-size:0.7rem;padding:0.15rem 0;display:flex;gap:0.3rem}
.mc-si-label{color:var(--text-secondary);min-width:4rem;flex-shrink:0}
.mc-si-value{color:var(--text-primary)}
.mc-si-svc{font-size:0.65rem;padding:0.15rem 0.4rem;background:rgba(124,58,237,.06);border-radius:3px;margin:0.1rem 0}
.mc-lesson{font-size:0.7rem;padding:0.3rem 0.4rem;margin:0.15rem 0;background:rgba(63,185,80,.06);border-left:2px solid rgba(63,185,80,.4);border-radius:0 3px 3px 0}
.mc-lesson-cat{font-size:0.6rem;color:var(--purple);text-transform:uppercase;letter-spacing:0.03em}
.mc-guard{display:inline-flex;align-items:center;gap:0.25rem;font-size:0.6rem;padding:0.1rem 0.35rem;border-radius:3px;margin-left:0.3rem;font-weight:500}
.mc-guard.pass{background:rgba(63,185,80,.1);color:#3fb950}
.mc-guard.fail{background:rgba(248,81,73,.1);color:#f85149}
.mc-guard-detail{font-size:0.62rem;color:var(--text-secondary);margin-top:0.15rem;padding:0.2rem 0.4rem;background:rgba(248,81,73,.04);border-radius:3px;display:none}
.mc-guard-detail.show{display:block}

/* Result banner */
.mc-result-banner{background:var(--bg-tertiary);border:1px solid color-mix(in srgb,var(--green) 30%,var(--border));border-radius:8px;padding:0.6rem 0.85rem;margin-bottom:0.5rem}
.mc-result-header{display:flex;align-items:center;gap:0.6rem;flex-wrap:wrap}
.mc-result-link{font-size:0.78rem;color:var(--green);text-decoration:none;font-weight:600}
.mc-result-link:hover{text-decoration:underline}
.mc-result-cmd{font-size:0.72rem;color:var(--text-primary);background:var(--bg-primary);padding:0.2rem 0.5rem;border-radius:4px;border:1px solid var(--border);cursor:pointer;transition:border-color .2s;font-family:var(--font-mono)}
.mc-result-cmd:hover{border-color:var(--purple)}
.mc-result-shots{display:flex;gap:0.5rem;margin-top:0.5rem;overflow-x:auto;padding-bottom:0.3rem}
.mc-result-shots img{height:120px;border-radius:6px;border:1px solid var(--border);cursor:pointer;transition:transform .2s;object-fit:cover;flex-shrink:0}
.mc-result-shots img:hover{transform:scale(1.05);border-color:var(--purple)}

/* ====== TAB BAR ====== */
.mc-tabs{display:flex;gap:2px;margin-bottom:0.75rem;padding:0}
.mc-tab-btn{display:inline-flex;align-items:center;gap:0.3rem;padding:0.35rem 0.7rem;border:none;border-radius:6px;background:transparent;color:var(--text-secondary);font-size:0.72rem;font-weight:600;cursor:pointer;transition:background .15s,color .15s;font-family:inherit}
.mc-tab-btn:hover{background:var(--bg-tertiary);color:var(--text-primary)}
.mc-tab-btn.active{background:var(--purple);color:#fff}
.mc-tab-btn .icon{width:13px;height:13px}
.mc-tab-panel[data-tab]{display:none}
.mc-tab-panel[data-tab="phases"]{display:block}

/* ====== DEV TAB ====== */
.mc-dev-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem}
.mc-dev-commits,.mc-dev-prs{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem}
.mc-dev-commits h4,.mc-dev-prs h4,.mc-dev-files h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.5rem;font-weight:700}
.mc-dev-commit{display:flex;align-items:center;gap:0.5rem;padding:0.3rem 0;position:relative;padding-left:1.2rem;border-left:2px solid var(--border);margin-left:0.35rem}
.mc-dev-commit-dot{position:absolute;left:-5px;top:50%;transform:translateY(-50%);width:8px;height:8px;border-radius:50%;background:var(--purple);border:2px solid var(--bg-secondary)}
.mc-dev-commit-hash{font-size:0.65rem;color:var(--purple);background:rgba(124,58,237,.08);padding:0.1rem 0.3rem;border-radius:3px;flex-shrink:0}
.mc-dev-commit-msg{font-size:0.72rem;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.mc-dev-pr{display:flex;align-items:center;gap:0.4rem;padding:0.35rem 0.5rem;border-bottom:1px solid var(--border);font-size:0.72rem}
.mc-dev-pr:last-child{border-bottom:none}
.mc-dev-pr-icon{color:#3fb950;flex-shrink:0}
.mc-dev-pr-num{color:var(--text-secondary);font-size:0.65rem;flex-shrink:0}
.mc-dev-pr-title{color:var(--text-primary);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500}
.mc-dev-pr-status{font-size:0.58rem;padding:0.1rem 0.35rem;border-radius:3px;font-weight:600}
.mc-dev-pr-status.open{background:rgba(63,185,80,.12);color:#3fb950}
.mc-dev-pr-status.merged{background:rgba(163,113,247,.12);color:#a371f7}
.mc-dev-pr-status.closed{background:rgba(248,81,73,.12);color:#f85149}
.mc-dev-empty{font-size:0.72rem;color:var(--text-secondary);font-style:italic;padding:0.5rem 0}
.mc-dev-files{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem}
.mc-dev-file-tree{max-height:300px;overflow-y:auto}
.mc-dev-file{font-size:0.7rem;color:var(--text-secondary);padding:0.15rem 0;display:flex;align-items:center;gap:0.3rem}
.mc-dev-file-icon{flex-shrink:0;font-size:0.75rem}

/* ====== PO TAB (Kanban) ====== */
.mc-kanban{display:flex;gap:0.75rem;min-height:300px}
.mc-kanban-col{flex:1;background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.5rem;display:flex;flex-direction:column;gap:0.4rem}
.mc-kanban-col-header{display:flex;align-items:center;gap:0.4rem;font-size:0.72rem;font-weight:700;color:var(--text-primary);padding:0.3rem 0.4rem;margin-bottom:0.2rem}
.mc-kanban-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.mc-kanban-dot.backlog{background:var(--text-secondary)}
.mc-kanban-dot.sprint{background:var(--purple)}
.mc-kanban-dot.done{background:var(--green)}
.mc-kanban-count{font-size:0.6rem;color:var(--text-secondary);font-weight:400;margin-left:auto}
.mc-kanban-card{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:6px;padding:0.5rem;border-left:3px solid var(--border)}
.mc-kanban-card.new-card{animation:card-slide-in .4s ease;border-left-color:var(--purple)}
@keyframes card-slide-in{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}
.mc-kanban-card.done{opacity:.7}
.mc-kanban-card-title{font-size:0.75rem;font-weight:600;color:var(--text-primary);margin-bottom:0.2rem}
.mc-kanban-card-criteria{font-size:0.65rem;color:var(--text-secondary);line-height:1.4;margin-bottom:0.25rem}
.mc-kanban-card-assignee{font-size:0.62rem;color:var(--purple);margin-bottom:0.2rem}
.mc-kanban-card-meta{display:flex;gap:0.4rem;align-items:center}
.mc-kanban-sp{font-size:0.6rem;color:var(--text-secondary);background:var(--bg-secondary);padding:0.08rem 0.3rem;border-radius:3px}
.mc-kanban-priority{font-size:0.58rem;font-weight:700;padding:0.08rem 0.3rem;border-radius:3px}
.mc-kanban-priority.p0,.mc-kanban-priority.p1{background:rgba(248,81,73,.12);color:#f85149}
.mc-kanban-priority.p2{background:rgba(234,179,8,.12);color:var(--yellow)}
.mc-kanban-priority.p3,.mc-kanban-priority.p4{background:rgba(63,185,80,.12);color:#3fb950}

/* ====== QA TAB ====== */
.mc-qa-section{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem;margin-bottom:0.6rem}
.mc-qa-section h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.6rem;font-weight:700}
.mc-qa-empty{font-size:0.72rem;color:var(--text-secondary);font-style:italic;padding:0.5rem 0}
.mc-qa-test-grid{display:flex;flex-direction:column;gap:0.3rem}
.mc-qa-test-file{display:flex;align-items:center;gap:0.5rem;font-size:0.72rem;padding:0.3rem 0.5rem;background:var(--bg-tertiary);border-radius:6px}
.mc-qa-test-path{color:var(--text-primary);font-family:var(--font-mono);font-size:0.68rem}
.mc-qa-test-badge{font-size:0.6rem;font-weight:700;padding:2px 6px;border-radius:4px;text-transform:uppercase;white-space:nowrap}
.mc-qa-badge-unit{background:rgba(139,92,246,.2);color:#a78bfa}
.mc-qa-badge-e2e{background:rgba(59,130,246,.2);color:#60a5fa}
.mc-qa-badge-e2e-ihm{background:rgba(236,72,153,.2);color:#f472b6}
.mc-qa-badge-smoke{background:rgba(245,158,11,.2);color:#fbbf24}
.mc-qa-results{display:flex;flex-direction:column;gap:0.5rem}
.mc-qa-result-card{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:8px;padding:0.6rem;overflow:hidden}
.mc-qa-result-header{display:flex;align-items:center;gap:0.5rem;font-size:0.7rem;margin-bottom:0.4rem;flex-wrap:wrap}
.mc-qa-result-phase{font-weight:600;color:var(--text-primary)}
.mc-qa-result-agent{color:var(--purple-light);font-size:0.65rem}
.mc-qa-result-excerpt{font-size:0.68rem;color:var(--text-secondary);max-height:120px;overflow-y:auto;line-height:1.4}
.mc-qa-result-excerpt p{margin:0.2rem 0}
.mc-qa-screenshots-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:0.6rem}
.mc-qa-shot-card{background:var(--bg-tertiary);border:1px solid var(--border);border-radius:8px;overflow:hidden}
.mc-qa-shot-label{padding:4px 8px;font-size:0.65rem;color:var(--text-secondary)}
.mc-qa-adversarial-details{cursor:pointer}
.mc-qa-adversarial-details summary{list-style:none;user-select:none}
.mc-qa-adversarial-details summary::-webkit-details-marker{display:none}
.mc-qa-adversarial-details summary h4::before{content:'▸ ';font-size:0.7rem}
.mc-qa-adversarial-details[open] summary h4::before{content:'▾ '}
.mc-qa-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:0.6rem;margin-bottom:1rem}
.mc-qa-agent-card{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.6rem}
.mc-qa-agent-name{font-size:0.75rem;font-weight:600;color:var(--text-primary);margin-bottom:0.3rem}
.mc-qa-agent-bar{height:6px;background:var(--bg-tertiary);border-radius:3px;overflow:hidden;margin-bottom:0.3rem}
.mc-qa-bar-fill{height:100%;border-radius:3px;transition:width .4s}
.mc-qa-agent-stats{display:flex;gap:0.5rem;font-size:0.62rem}
.mc-qa-ok{color:var(--green)}
.mc-qa-ko{color:var(--red)}
.mc-qa-total{color:var(--text-secondary)}
.mc-qa-metrics{display:flex;gap:1rem;flex-wrap:wrap}
.mc-qa-metric{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.6rem 1rem;text-align:center;flex:1;min-width:120px}
.mc-qa-metric-val{display:block;font-size:1.4rem;font-weight:700;color:var(--purple)}
.mc-qa-metric-label{display:block;font-size:0.65rem;color:var(--text-secondary);margin-top:0.15rem}

/* ====== ARCHI TAB ====== */
.mc-archi-doc,.mc-archi-decisions,.mc-archi-stack{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem;margin-bottom:0.6rem}
.mc-archi-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem}
.mc-archi-header h4{font-size:0.78rem;color:var(--text-primary);margin:0;font-weight:700}
.mc-archi-updated{font-size:0.6rem;color:var(--text-secondary)}
.mc-archi-body{font-size:0.72rem;color:var(--text-secondary);line-height:1.5;max-height:500px;overflow-y:auto}
.mc-archi-body h1,.mc-archi-body h2,.mc-archi-body h3{color:var(--text-primary);font-size:0.82rem;margin:0.6rem 0 0.3rem}
.mc-archi-body code{background:var(--bg-tertiary);padding:1px 4px;border-radius:3px;font-size:0.68rem}
.mc-archi-body pre{background:var(--bg-primary);padding:0.5rem;border-radius:6px;overflow-x:auto;font-size:0.68rem}
.mc-archi-body table{width:100%;border-collapse:collapse;font-size:0.68rem}
.mc-archi-body td,.mc-archi-body th{border:1px solid var(--border);padding:4px 8px}
.mc-archi-empty,.mc-wiki-empty{text-align:center;padding:2rem;color:var(--text-secondary);font-size:0.75rem}
.mc-archi-hint,.mc-wiki-hint{font-size:0.65rem;font-style:italic;margin-top:0.3rem;opacity:.6}
.mc-archi-decisions h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.5rem;font-weight:700}
.mc-archi-decision{background:var(--bg-tertiary);border-radius:6px;padding:0.5rem;margin-bottom:0.4rem}
.mc-archi-decision-phase{font-size:0.62rem;color:var(--purple-light);font-weight:600;margin-bottom:0.2rem}
.mc-archi-decision-text{font-size:0.7rem;color:var(--text-secondary);line-height:1.4}
.mc-archi-decision-text p{margin:0.15rem 0}
.mc-archi-stack h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.4rem;font-weight:700}
.mc-archi-stack-tags{display:flex;flex-wrap:wrap;gap:0.3rem}
.mc-archi-tag{font-size:0.65rem;padding:3px 8px;background:rgba(139,92,246,.15);color:#c084fc;border-radius:4px;font-weight:500}

/* ====== WIKI TAB ====== */
.mc-wiki-page{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;margin-bottom:0.5rem;overflow:hidden}
.mc-wiki-page-title{display:flex;justify-content:space-between;align-items:center;padding:0.6rem 0.75rem;font-size:0.78rem;font-weight:600;color:var(--text-primary);cursor:pointer;user-select:none;list-style:none}
.mc-wiki-page-title::-webkit-details-marker{display:none}
.mc-wiki-page-title::before{content:'▸ ';font-size:0.7rem;color:var(--text-secondary)}
.mc-wiki-page[open] .mc-wiki-page-title::before{content:'▾ '}
.mc-wiki-page-date{font-size:0.6rem;color:var(--text-secondary);font-weight:400}
.mc-wiki-page-body{padding:0 0.75rem 0.75rem;font-size:0.72rem;color:var(--text-secondary);line-height:1.5;border-top:1px solid var(--border)}
.mc-wiki-page-body h1,.mc-wiki-page-body h2,.mc-wiki-page-body h3{color:var(--text-primary);font-size:0.8rem;margin:0.5rem 0 0.2rem}
.mc-wiki-page-body code{background:var(--bg-tertiary);padding:1px 4px;border-radius:3px;font-size:0.68rem}
.mc-wiki-page-body pre{background:var(--bg-primary);padding:0.5rem;border-radius:6px;overflow-x:auto;font-size:0.68rem}
.mc-wiki-memories{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem;margin-top:0.5rem}
.mc-wiki-memories h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.5rem;font-weight:700}
.mc-wiki-memory{display:flex;gap:0.5rem;align-items:baseline;padding:0.25rem 0;border-bottom:1px solid var(--bg-tertiary);font-size:0.7rem}
.mc-wiki-memory:last-child{border-bottom:none}
.mc-wiki-memory-cat{font-size:0.6rem;font-weight:600;padding:2px 6px;background:rgba(59,130,246,.12);color:#60a5fa;border-radius:3px;white-space:nowrap}
.mc-wiki-memory-text{color:var(--text-secondary);line-height:1.4}

/* ====== PROJET TAB ====== */
.mc-projet-url,.mc-projet-build,.mc-projet-gallery,.mc-projet-files{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem;margin-bottom:0.6rem}
.mc-projet-url h4,.mc-projet-build h4,.mc-projet-gallery h4,.mc-projet-files h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.4rem;font-weight:700}
.mc-projet-url a{color:var(--purple);font-size:0.82rem;word-break:break-all}
.mc-projet-build code{display:block;font-size:0.72rem;color:var(--text-primary);background:var(--bg-primary);padding:0.35rem 0.6rem;border-radius:4px;border:1px solid var(--border);margin-bottom:0.3rem;font-family:var(--font-mono)}
.mc-projet-imgs{display:flex;flex-wrap:wrap;gap:0.5rem}
.mc-projet-imgs img{height:140px;border-radius:6px;border:1px solid var(--border);cursor:pointer;transition:transform .2s;object-fit:cover}
.mc-projet-imgs img:hover{transform:scale(1.05);border-color:var(--purple)}
.mc-projet-file-tree{max-height:300px;overflow-y:auto}

/* ====== SECURITY TABS ====== */
.mc-sec-section{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem;margin-bottom:0.6rem}
.mc-sec-section h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.5rem;font-weight:700;display:flex;align-items:center;gap:0.35rem}
.mc-sec-section h4 svg{width:14px;height:14px}
.mc-sec-empty{text-align:center;padding:1.5rem;color:var(--text-muted);font-size:0.72rem}
.mc-sec-vuln-list{display:flex;flex-direction:column;gap:0.4rem}
.mc-sec-vuln{background:var(--bg-tertiary);border-radius:6px;padding:0.5rem 0.65rem;border-left:3px solid var(--text-muted)}
.mc-sec-vuln.critical{border-left-color:#ef4444}
.mc-sec-vuln.high{border-left-color:#f97316}
.mc-sec-vuln.medium{border-left-color:#eab308}
.mc-sec-vuln.low{border-left-color:#22c55e}
.mc-sec-vuln-head{display:flex;align-items:center;gap:0.5rem;margin-bottom:0.2rem}
.mc-sec-vuln-sev{font-size:0.55rem;font-weight:800;text-transform:uppercase;padding:0.1rem 0.3rem;border-radius:3px}
.mc-sec-vuln-sev.critical{background:rgba(239,68,68,.15);color:#ef4444}
.mc-sec-vuln-sev.high{background:rgba(249,115,22,.15);color:#f97316}
.mc-sec-vuln-sev.medium{background:rgba(234,179,8,.15);color:#eab308}
.mc-sec-vuln-sev.low{background:rgba(34,197,94,.15);color:#22c55e}
.mc-sec-vuln-title{font-size:0.72rem;font-weight:700;color:var(--text-primary)}
.mc-sec-vuln-desc{font-size:0.66rem;color:var(--text-secondary);line-height:1.4}
.mc-sec-kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:0.5rem;margin-bottom:0.6rem}
.mc-sec-kpi{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.5rem;text-align:center}
.mc-sec-kpi .val{font-size:1.3rem;font-weight:800}
.mc-sec-kpi .lbl{font-size:0.58rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.03em}
.mc-sec-kpi.critical .val{color:#ef4444}
.mc-sec-kpi.high .val{color:#f97316}
.mc-sec-kpi.fixed .val{color:#22c55e}
.mc-sec-kpi.pending .val{color:#eab308}
.mc-sec-phase-content{font-size:0.72rem;color:var(--text-secondary);line-height:1.5}
.mc-sec-phase-content h1,.mc-sec-phase-content h2,.mc-sec-phase-content h3{color:var(--text-primary);font-size:0.8rem;margin:0.5rem 0 0.2rem}
.mc-sec-phase-content code{background:var(--bg-tertiary);padding:1px 4px;border-radius:3px;font-size:0.68rem}
.mc-sec-phase-content pre{background:var(--bg-primary);padding:0.5rem;border-radius:6px;overflow-x:auto;font-size:0.68rem}
.mc-sec-phase-content table{width:100%;border-collapse:collapse;font-size:0.68rem}
.mc-sec-phase-content td,.mc-sec-phase-content th{border:1px solid var(--border);padding:4px 8px}

/* ====== RSE TABS ====== */
.mc-rse-section{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem;margin-bottom:0.6rem}
.mc-rse-section h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.5rem;font-weight:700;display:flex;align-items:center;gap:0.35rem}
.mc-rse-section h4 svg{width:14px;height:14px}
.mc-rse-score{display:flex;align-items:center;gap:0.8rem;padding:0.6rem;background:var(--bg-tertiary);border-radius:8px;margin-bottom:0.5rem}
.mc-rse-score-ring{width:48px;height:48px;border-radius:50%;border:4px solid var(--green);display:flex;align-items:center;justify-content:center;font-size:1rem;font-weight:800;color:var(--green);flex-shrink:0}
.mc-rse-score-info{flex:1;font-size:0.7rem;color:var(--text-secondary);line-height:1.4}

/* ====== TMA TABS ====== */
.mc-tma-section{background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;padding:0.75rem;margin-bottom:0.6rem}
.mc-tma-section h4{font-size:0.78rem;color:var(--text-primary);margin:0 0 0.5rem;font-weight:700;display:flex;align-items:center;gap:0.35rem}
.mc-tma-section h4 svg{width:14px;height:14px}
.mc-tma-ticket{display:flex;align-items:center;gap:0.5rem;padding:0.45rem 0.5rem;background:var(--bg-tertiary);border-radius:6px;margin-bottom:0.35rem;border-left:3px solid var(--border);cursor:pointer;transition:background .15s}
.mc-tma-ticket:hover{background:var(--bg-primary)}
.mc-tma-ticket[data-sev="P0"]{border-left-color:#ef4444}
.mc-tma-ticket[data-sev="P1"]{border-left-color:#f59e0b}
.mc-tma-ticket[data-sev="P2"]{border-left-color:#eab308}
.mc-tma-ticket[data-sev="P3"]{border-left-color:#3b82f6}
.mc-tma-ticket[data-sev="P4"]{border-left-color:#6b7280}
.mc-tma-sev{font-size:0.6rem;font-weight:800;padding:0.1rem 0.35rem;border-radius:4px;flex-shrink:0;min-width:22px;text-align:center}
.mc-tma-sev[data-sev="P0"]{background:#ef4444;color:#fff;animation:pulse-sev 1.5s infinite}
.mc-tma-sev[data-sev="P1"]{background:#f59e0b;color:#000}
.mc-tma-sev[data-sev="P2"]{background:#eab308;color:#000}
.mc-tma-sev[data-sev="P3"]{background:#3b82f6;color:#fff}
.mc-tma-sev[data-sev="P4"]{background:#6b7280;color:#fff}
@keyframes pulse-sev{0%,100%{opacity:1}50%{opacity:.6}}
.mc-tma-ticket-title{flex:1;font-size:0.72rem;font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mc-tma-ticket-cat{font-size:0.58rem;color:var(--purple-light);text-transform:uppercase;letter-spacing:.3px;flex-shrink:0}
.mc-tma-ticket-status{font-size:0.58rem;padding:0.1rem 0.35rem;border-radius:4px;flex-shrink:0}
.mc-tma-ticket-status[data-st="open"]{background:rgba(239,68,68,.15);color:#ef4444}
.mc-tma-ticket-status[data-st="in_progress"]{background:rgba(59,130,246,.15);color:#3b82f6}
.mc-tma-ticket-status[data-st="resolved"]{background:rgba(16,185,129,.15);color:#10b981}
.mc-tma-ticket-status[data-st="closed"]{background:rgba(107,114,128,.15);color:#6b7280}
.mc-tma-form{display:flex;flex-direction:column;gap:0.4rem;padding:0.6rem;background:var(--bg-tertiary);border-radius:8px;margin-bottom:0.6rem;border:1px dashed var(--border)}
.mc-tma-form input,.mc-tma-form textarea,.mc-tma-form select{background:var(--bg-primary);border:1px solid var(--border);border-radius:6px;padding:0.35rem 0.5rem;font-size:0.72rem;color:var(--text-primary);font-family:inherit;resize:vertical}
.mc-tma-form textarea{min-height:48px}
.mc-tma-form-row{display:flex;gap:0.4rem}
.mc-tma-form-row>*{flex:1}
.mc-tma-form button[type="submit"]{background:var(--purple);color:#fff;border:none;border-radius:6px;padding:0.35rem 0.8rem;font-size:0.7rem;font-weight:600;cursor:pointer;align-self:flex-end;transition:background .15s;font-family:inherit}
.mc-tma-form button[type="submit"]:hover{background:var(--purple-light)}
.mc-tma-sla-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:0.5rem;margin-bottom:0.6rem}
.mc-tma-sla-card{background:var(--bg-tertiary);border-radius:8px;padding:0.5rem;text-align:center}
.mc-tma-sla-val{font-size:1.1rem;font-weight:800;color:var(--text-primary)}
.mc-tma-sla-label{font-size:0.6rem;color:var(--text-secondary);margin-top:0.15rem}
.mc-tma-empty{text-align:center;padding:1.5rem;color:var(--text-secondary);font-size:0.72rem}

/* ====== TAB AGENT CARD (compact) ====== */
.mc-tab-agent{display:flex;align-items:center;gap:0.6rem;padding:0.5rem 0.6rem;background:var(--bg-secondary);border:1px solid var(--border);border-radius:8px;margin-bottom:0.6rem}
.mc-tab-agent-avatar{width:36px;height:36px;border-radius:50%;object-fit:cover;border:2px solid var(--purple);flex-shrink:0}
.mc-tab-agent-info{flex:1;min-width:0}
.mc-tab-agent-name{font-size:0.75rem;font-weight:700;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mc-tab-agent-role{font-size:0.62rem;color:var(--purple-light)}
.mc-tab-agent-tagline{font-size:0.6rem;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mc-tab-agent-chat{background:var(--purple);color:#fff;border:none;border-radius:6px;padding:0.3rem 0.6rem;font-size:0.65rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:0.25rem;white-space:nowrap;transition:background .15s;font-family:inherit}
.mc-tab-agent-chat:hover{background:var(--purple-light)}
.mc-tab-agent-chat .icon{width:12px;height:12px}

@media(max-width:900px){.mc-layout{grid-template-columns:1fr;height:auto}.mc-sidebar{border-left:none;border-top:1px solid var(--border)}.mc-dev-grid{grid-template-columns:1fr}.mc-kanban{flex-direction:column}}
</style>
