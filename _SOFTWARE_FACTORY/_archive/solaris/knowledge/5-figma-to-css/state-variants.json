{
  "pattern": "state-variants",
  "description": "How Figma State variants (Default, Hover, Focus, Pressed, Disabled, etc.) should map to CSS",
  "figma_pattern": {
    "detection": "Property named 'State' with variant options",
    "common_values": ["Default", "Hover", "Focus", "Pressed", "Active", "Disabled", "Loading", "Selected", "Current"]
  },
  "css_mapping": {
    "Default": {
      "css": ".component { /* base styles */ }",
      "note": "No modifier class needed - this is the default state"
    },
    "Hover": {
      "static": ".component--hover { /* forced hover for showcase */ }",
      "dynamic": ".component:hover { /* real hover on mouse */ }",
      "both_needed": true,
      "extract_diff": "Compare Hover variant styles vs Default variant"
    },
    "Focus": {
      "static": ".component--focus { /* forced focus for showcase */ }",
      "dynamic": ".component:focus-visible { /* real focus on keyboard */ }",
      "both_needed": true,
      "note": "Check for focus ring child element (strokeAlign: OUTSIDE)"
    },
    "Pressed": {
      "static": ".component--pressed { }",
      "dynamic": ".component:active { }",
      "aria": "aria-pressed='true' for toggle buttons"
    },
    "Active": {
      "static": ".component--active { }",
      "dynamic": ".component[aria-selected='true'], .component[aria-current] { }",
      "note": "Active often means 'selected' not 'being clicked'"
    },
    "Disabled": {
      "static": ".component--disabled { }",
      "dynamic": ".component[disabled], .component[aria-disabled='true'] { }",
      "required_styles": {
        "opacity": "0.5 or similar reduced contrast",
        "pointer-events": "none",
        "cursor": "not-allowed"
      }
    },
    "Loading": {
      "static": ".component--loading { }",
      "dynamic": ".component[aria-busy='true'] { }",
      "note": "Usually shows spinner, hides or dims content"
    },
    "Selected": {
      "static": ".component--selected { }",
      "dynamic": ".component[aria-selected='true'] { }"
    },
    "Current": {
      "static": ".component--current { }",
      "dynamic": ".component[aria-current='page'] { }",
      "note": "For navigation items indicating current page/location"
    }
  },
  "critical_rules": [
    {
      "rule": "State variants must generate BOTH static class AND pseudo-class",
      "reason": "Static class for showcase display, pseudo-class for real interaction"
    },
    {
      "rule": "Extract style DIFF between state variant and Default",
      "reason": "Only output CSS properties that actually change",
      "example": {
        "default": { "background": "blue", "color": "white" },
        "hover": { "background": "lightblue", "color": "white" },
        "hover_css": ".component:hover { background: lightblue; } /* only bg changes */"
      }
    },
    {
      "rule": "Focus state often has child element for focus ring",
      "detection": "Look for FRAME child with strokes and strokeAlign: OUTSIDE",
      "action": "Generate CSS for focus ring element visibility on :focus-visible"
    }
  ],
  "anti_patterns": [
    {
      "pattern": "Generating empty pseudo-class rules",
      "problem": "/* Dynamic Hover state - inherits base styles */ with no actual styles",
      "fix": "Extract style diff from Figma variant, including child element changes"
    },
    {
      "pattern": "Only generating static modifier class",
      "problem": ".component--hover { } without .component:hover { }",
      "fix": "Always generate both static and dynamic selectors"
    }
  ]
}
