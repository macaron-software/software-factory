RLM Light Agent - Task: Tu es un agent TDD autonome pour Veligo (v√©los en libre-service).

## T√ÇCHE
Task T002: R√©soudre les 5 tests skipp√©s CSRF Protection

## D√âTAILS
# Task T002: R√©soudre les 5 tests skipp√©s CSRF Protection

**Priority**: P0
**Time Estimate**: 1.5h
**WSJF Score**: 9.8
**Complexity**: medium
**Queue**: TDD
**AO_REF**: AO-IDFM-SEC-002

## COMPLETED ‚úÖ (2026-01-12)

### Summary
CSRF Protection is FULLY IMPLEMENTED and TESTED:
- Middleware: `backend/src/middleware/csrf.rs` (Double Submit Cookie pattern)
- All 7 Rust unit tests PASS
- All 11 E2E tests active (no .skip)
- CLAUDE.md shows "‚úÖ R√âSOLU (T002)"

## Description
veligo-platform/tests/e2e/security/csrf-protection.spec.ts a 5 tests skipp√©s pour la protection CSRF. Critique pour la s√©curit√©.

## Success Criteria
- [x] 0 test.skip() dans csrf-protection.spec.ts
- [x] Protection CSRF valid√©e par tests
- [x] Documentation s√©curit√© mise √† jour (CLAUDE.md)

## Actions
1. V√©rifier si CSRF token middleware est actif (rate_limiter.rs, security_headers.rs)
2. Impl√©menter CSRF protection si manquante
3. Activer les tests et les faire passer
4. Documenter dans CLAUDE.md

## Files to Create/Modify
- [x] veligo-platform/tests/e2e/security/csrf-protection.spec.ts (MODIFY)
- [x] veligo-platform/backend/src/middleware/ (MODIFY)

## Ralph Status Block
---RALPH_STATUS---
STATUS: IN_PROGRESS
COMPLEXITY: medium
MODEL_TIER: TIER1
WSJF: 9.8
COMPLETED: 2026-01-12
---END_RALPH_STATUS---

## üî¥ R√àGLE ABSOLUE: V√âRIFIER AVANT MODIFIER

AVANT de modifier ou cr√©er un fichier, tu DOIS:
1. Utiliser `Read` pour V√âRIFIER que le fichier existe
2. Utiliser `veligo_grep` pour trouver les patterns existants
3. NE JAMAIS inventer un fichier qui n'existe pas

Si un fichier n'existe pas:
- Cherche un fichier similaire avec `Glob` ou `veligo_rag_query`
- Adapte ton approche au code R√âEL

## INSTRUCTIONS TDD (Red ‚Üí Green)

1. **PHASE EXPLORATION**: Comprendre le contexte
   - `veligo_rag_query("test skip failing")` pour trouver tests probl√©matiques
   - `veligo_grep("TODO|FIXME", "*.rs")` pour trouver points d'attention
   - `Read` sur les fichiers mentionn√©s pour V√âRIFIER qu'ils existent

2. **PHASE RED**: Lis le test qui √©choue
   - Utilise `Read` pour voir le fichier test (V√âRIFIE qu'il existe!)
   - Comprends ce que le test attend

3. **PHASE CODE**: Impl√©mente la solution
   - Utilise `Read` AVANT d'utiliser `Edit`
   - Modifie max 3 fichiers
   - Fais des changements minimaux

4. **PHASE GREEN**: V√©rifie
   - Rust: `cargo test --lib`
   - Frontend: `npm run test`
   - E2E: `npx playwright test <file>`

## R√àGLES ANTI-HALLUCINATION
- ‚ùå JAMAIS modifier un fichier sans l'avoir lu d'abord
- ‚ùå JAMAIS inventer un chemin de fichier
- ‚ùå JAMAIS pr√©tendre "tests pass" sans ex√©cuter la commande
- ‚úÖ Utilise veligo_grep pour trouver le bon fichier
- ‚úÖ Utilise Read pour v√©rifier l'existence

## OUTILS MCP DISPONIBLES
- veligo_rag_query: Recherche s√©mantique dans le code
- veligo_ao_search: Recherche dans les specs AO
- veligo_grep: Grep pattern dans fichiers

Commence maintenant. R√©ponds avec: SUCCESS ou NEEDS_MORE_WORK
Traceback (most recent call last):
  File "/Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/rlm_light_client.py", line 350, in <module>
    main()
    ~~~~^^
  File "/Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/rlm_light_client.py", line 343, in main
    print(f"API: {LLAMA_API_URL}", file=sys.stderr)
                  ^^^^^^^^^^^^^
NameError: name 'LLAMA_API_URL' is not defined. Did you mean: 'LOCAL_API_URL'?
