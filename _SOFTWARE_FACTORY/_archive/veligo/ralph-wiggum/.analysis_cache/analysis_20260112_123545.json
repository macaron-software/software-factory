{
  "analysis": {
    "summary": {
      "total_skipped_tests": 85,
      "total_todos_fixmes": 34,
      "security_status": "IMPLEMENTED_BUT_NOT_DEPLOYED",
      "critical_blockers": 3,
      "codebase_size": "703K LOC (256K Rust, 447K TS/Svelte)"
    },
    "muda": [
      {
        "type": "defect",
        "description": "85 tests skipp\u00e9s bloquent tout d\u00e9ploiement (CLAUDE.md r\u00e8gle #1). Incluant: CSRF (5), Users API (5), Payments API (5), Tracking API (4), Modules (7), FranceConnect (5), TCL Multimodal (4), Nantes Box (5), Referral (9), Bike Maintenance (11), Production Health (11), Chaos (3), Modules Frontend (5)",
        "file": "tests/e2e/**/*.spec.ts, veligo-platform/tests/e2e/**/*.spec.ts",
        "severity": "P0",
        "wsjf": 10.0
      },
      {
        "type": "overproduction",
        "description": "4 impl\u00e9mentations parall\u00e8les de Stations API: stations.rs (1683 LOC), stations_v2.rs (269 LOC), station_grpc_web.rs (609 LOC), stations_hexagonal.rs (869 LOC) = 3430 LOC redondants",
        "file": "veligo-platform/backend/src/api/stations*.rs",
        "severity": "P1",
        "wsjf": 8.5
      },
      {
        "type": "overproduction",
        "description": "MFA Component dupliqu\u00e9: MfaSetup.svelte (1124 LOC) + auth/MFASetup.svelte (1492 LOC) = 2616 LOC de code identique",
        "file": "veligo-platform/frontend/src/lib/components/**/MFA*.svelte",
        "severity": "P1",
        "wsjf": 7.5
      },
      {
        "type": "overproduction",
        "description": "BikeMap Component dupliqu\u00e9: maps/BikeMap.svelte (1114 LOC) + tracking/BikeMap.svelte (972 LOC) = 2086 LOC redondants",
        "file": "veligo-platform/frontend/src/lib/components/**/BikeMap.svelte",
        "severity": "P2",
        "wsjf": 6.5
      },
      {
        "type": "overproduction",
        "description": "StationMap Component dupliqu\u00e9: maps/StationMap.svelte (938 LOC) + stations/StationMap.svelte (1035 LOC) = 1973 LOC",
        "file": "veligo-platform/frontend/src/lib/components/**/StationMap.svelte",
        "severity": "P2",
        "wsjf": 6.0
      },
      {
        "type": "defect",
        "description": "Security headers impl\u00e9ment\u00e9s dans le code Rust (security_headers.rs) mais CLAUDE.md dit 'HSTS, CSP, X-Frame-Options manquants'. Middleware probablement non activ\u00e9 dans nginx ou le serveur de production",
        "file": "veligo-platform/backend/src/infrastructure/middleware/security_headers.rs",
        "severity": "P0",
        "wsjf": 9.5
      },
      {
        "type": "waiting",
        "description": "FranceConnect SSO non impl\u00e9ment\u00e9 (5 tests skipp\u00e9s dans ao-compliance/idfm/franceconnect-sso.spec.ts) - Bloque conformit\u00e9 AO IDFM",
        "file": "tests/e2e/ao-compliance/idfm/franceconnect-sso.spec.ts",
        "severity": "P0",
        "wsjf": 9.0
      },
      {
        "type": "waiting",
        "description": "TCL Multimodal Journey Planner non impl\u00e9ment\u00e9 (4 tests skipp\u00e9s) - Bloque conformit\u00e9 AO Lyon",
        "file": "tests/e2e/ao-compliance/lyon/tcl-multimodal.spec.ts",
        "severity": "P1",
        "wsjf": 8.0
      },
      {
        "type": "waiting",
        "description": "Nantes Box S\u00e9curis\u00e9s QR Unlock non impl\u00e9ment\u00e9 (5 tests skipp\u00e9s) - Bloque conformit\u00e9 AO Nantes",
        "file": "tests/e2e/ao-compliance/nantes/box-securises.spec.ts",
        "severity": "P1",
        "wsjf": 7.5
      },
      {
        "type": "transport",
        "description": "OAuth providers (FranceConnect, Google, Microsoft) partagent du code dupliqu\u00e9 pour validation/erreurs. Pas de base commune extract\u00e9e",
        "file": "veligo-platform/backend/src/api/franceconnect.rs, google_oauth.rs, microsoft_oauth.rs",
        "severity": "P2",
        "wsjf": 5.5
      },
      {
        "type": "inventory",
        "description": "34 TODO/FIXME/XXX dans le code backend - dette technique accumul\u00e9e",
        "file": "veligo-platform/backend/src/**/*.rs",
        "severity": "P2",
        "wsjf": 5.0
      }
    ],
    "muri": [
      {
        "type": "file_size",
        "description": "reporting_analytics_module.rs: 4038 LOC - devrait \u00eatre scind\u00e9 en analytics_engine, kpi_calculator, export_service, scheduler",
        "file": "veligo-platform/backend/src/modules/reporting_analytics_module.rs",
        "severity": "P1",
        "loc": 4038,
        "wsjf": 7.0
      },
      {
        "type": "file_size",
        "description": "fraud_detection_module.rs: 2190 LOC - extraire detection_engine, rule_engine, risk_calculator",
        "file": "veligo-platform/backend/src/modules/fraud_detection_module.rs",
        "severity": "P2",
        "loc": 2190,
        "wsjf": 5.5
      },
      {
        "type": "file_size",
        "description": "tonic-server.rs: 1697 LOC - service registration devrait \u00eatre dans un module s\u00e9par\u00e9",
        "file": "veligo-platform/backend/src/bin/tonic-server.rs",
        "severity": "P2",
        "loc": 1697,
        "wsjf": 5.0
      },
      {
        "type": "file_size",
        "description": "payment_api.rs: 1757 LOC avec 60+ fonctions - extraire par type de paiement (stripe, sepa, paypal)",
        "file": "veligo-platform/backend/src/api/payment_api.rs",
        "severity": "P1",
        "loc": 1757,
        "wsjf": 6.5
      },
      {
        "type": "file_size",
        "description": "gdpr_api.rs: 1862 LOC - extraire consent_handler, export_service, deletion_service",
        "file": "veligo-platform/backend/src/api/gdpr_api.rs",
        "severity": "P2",
        "loc": 1862,
        "wsjf": 5.0
      },
      {
        "type": "function_count",
        "description": "auth.rs: 40+ fonctions dans un seul fichier - violate single responsibility",
        "file": "veligo-platform/backend/src/api/auth.rs",
        "severity": "P2",
        "wsjf": 5.5
      },
      {
        "type": "page_size",
        "description": "welcome-lyon/+page.svelte: 2444 LOC - landing page monolithique",
        "file": "veligo-platform/frontend/src/routes/(landing)/welcome-lyon/+page.svelte",
        "severity": "P2",
        "loc": 2444,
        "wsjf": 4.5
      }
    ],
    "mura": [
      {
        "type": "naming_inconsistency",
        "description": "Confusion singular/plural: /domain/station/ vs /domain/stations/ - deux dossiers pour le m\u00eame domaine",
        "files": [
          "veligo-platform/backend/src/domain/station/",
          "veligo-platform/backend/src/domain/stations/"
        ],
        "severity": "P2",
        "wsjf": 4.0
      },
      {
        "type": "pattern_inconsistency",
        "description": "Error handling inconsistant: .map_err(|e| (StatusCode::..., e.to_string()))? r\u00e9p\u00e9t\u00e9 20+ fois vs AppError::from(e) dans d'autres modules",
        "file": "veligo-platform/backend/src/api/*.rs",
        "severity": "P2",
        "wsjf": 5.0
      },
      {
        "type": "test_coverage_unequal",
        "description": "85 tests skipp\u00e9s sur ~1500 = 5.7% de tests non ex\u00e9cut\u00e9s. Couverture in\u00e9gale entre modules",
        "file": "tests/e2e/**/*.spec.ts",
        "severity": "P0",
        "wsjf": 9.0
      },
      {
        "type": "route_definition_scattered",
        "description": "Routes d\u00e9finies \u00e0 plusieurs endroits: api/*.rs, infrastructure/http/*.rs, infrastructure/http/*_mvp.rs",
        "files": [
          "veligo-platform/backend/src/api/",
          "veligo-platform/backend/src/infrastructure/http/"
        ],
        "severity": "P2",
        "wsjf": 4.5
      }
    ],
    "value_stream": {
      "bottlenecks": [
        "85 tests skipp\u00e9s bloquent le pipeline CI/CD - ZERO d\u00e9ploiement possible",
        "Security headers impl\u00e9ment\u00e9s mais potentiellement non activ\u00e9s en prod - audit de s\u00e9curit\u00e9 impossible",
        "FranceConnect non impl\u00e9ment\u00e9 - bloque certification IDFM",
        "TCL Multimodal non impl\u00e9ment\u00e9 - bloque certification Lyon"
      ],
      "blockers": [
        "CLAUDE.md r\u00e8gle #1: JAMAIS d\u00e9ployer si un test \u00e9choue ou est skipp\u00e9",
        "AO IDFM \u00a73.1.x: FranceConnect obligatoire pour certification",
        "AO Lyon \u00a75.2.x: Multimodal TCL obligatoire"
      ],
      "flow_analysis": {
        "development_to_staging": "BLOCKED par 85 tests skipp\u00e9s",
        "staging_to_prod": "BLOCKED - idem",
        "feature_lead_time": "INFINITE jusqu'\u00e0 r\u00e9solution des tests",
        "deployment_frequency": "0 (bloqu\u00e9)"
      }
    }
  },
  "queues": {
    "tdd": [
      {
        "id": "T001",
        "title": "Impl\u00e9menter ou supprimer les 11 tests skipp\u00e9s Production Health",
        "priority": "P0",
        "wsjf": 10.0,
        "complexity": "medium",
        "tier": "TIER1",
        "description": "tests/smoke/production-health.spec.ts contient 11 test.skip() pour des fonctionnalit\u00e9s non impl\u00e9ment\u00e9es (API version, CORS, tenant resolution, security headers, static caching, DB/Redis health, SvelteKit pages). Chaque test doit \u00eatre soit impl\u00e9ment\u00e9 soit supprim\u00e9.",
        "success_criteria": [
          "0 test.skip() dans production-health.spec.ts",
          "Tests passent ou sont supprim\u00e9s avec justification",
          "Pipeline CI/CD peut s'ex\u00e9cuter sans erreur"
        ],
        "actions": [
          "1. Lire tests/smoke/production-health.spec.ts",
          "2. Pour chaque test.skip(), \u00e9valuer: feature impl\u00e9ment\u00e9e? \u2192 activer, sinon \u2192 supprimer",
          "3. Impl\u00e9menter endpoints manquants (/api/version, /api/health/db, etc.) ou supprimer tests",
          "4. Ex\u00e9cuter `npm run test:smoke` pour valider"
        ],
        "files": [
          "tests/smoke/production-health.spec.ts"
        ]
      },
      {
        "id": "T002",
        "title": "R\u00e9soudre les 5 tests skipp\u00e9s CSRF Protection",
        "priority": "P0",
        "wsjf": 9.8,
        "complexity": "medium",
        "tier": "TIER1",
        "description": "veligo-platform/tests/e2e/security/csrf-protection.spec.ts a 5 tests skipp\u00e9s pour la protection CSRF. Critique pour la s\u00e9curit\u00e9.",
        "success_criteria": [
          "0 test.skip() dans csrf-protection.spec.ts",
          "Protection CSRF valid\u00e9e par tests",
          "Documentation s\u00e9curit\u00e9 mise \u00e0 jour"
        ],
        "actions": [
          "1. V\u00e9rifier si CSRF token middleware est actif (rate_limiter.rs, security_headers.rs)",
          "2. Impl\u00e9menter CSRF protection si manquante",
          "3. Activer les tests et les faire passer",
          "4. Documenter dans CLAUDE.md"
        ],
        "files": [
          "veligo-platform/tests/e2e/security/csrf-protection.spec.ts",
          "veligo-platform/backend/src/middleware/"
        ]
      },
      {
        "id": "T003",
        "title": "R\u00e9soudre les 5 tests skipp\u00e9s FranceConnect SSO (AO IDFM)",
        "priority": "P0",
        "wsjf": 9.5,
        "complexity": "complex",
        "tier": "TIER1",
        "description": "AO IDFM \u00a73.1.x exige FranceConnect. 5 tests skipp\u00e9s dans ao-compliance/idfm/franceconnect-sso.spec.ts. Bloquant pour certification.",
        "success_criteria": [
          "FranceConnect OAuth flow fonctionnel",
          "5 tests passent",
          "Conformit\u00e9 AO IDFM valid\u00e9e"
        ],
        "actions": [
          "1. V\u00e9rifier impl\u00e9mentation dans veligo-platform/backend/src/api/franceconnect.rs",
          "2. Compl\u00e9ter OAuth flow: authorize, callback, token exchange",
          "3. Cr\u00e9er compte test FranceConnect (sandbox)",
          "4. Activer et faire passer les 5 tests"
        ],
        "files": [
          "tests/e2e/ao-compliance/idfm/franceconnect-sso.spec.ts",
          "veligo-platform/backend/src/api/franceconnect.rs"
        ]
      },
      {
        "id": "T004",
        "title": "Activer Security Headers en production (v\u00e9rification nginx)",
        "priority": "P0",
        "wsjf": 9.5,
        "complexity": "simple",
        "tier": "TIER1",
        "description": "security_headers.rs est impl\u00e9ment\u00e9 (HSTS, CSP, X-Frame-Options) mais CLAUDE.md indique 'manquants'. V\u00e9rifier si le middleware est activ\u00e9 dans le serveur et nginx.",
        "success_criteria": [
          "curl -I https://veligo.app retourne HSTS, CSP, X-Frame-Options",
          "SecurityHeadersLayer::production() utilis\u00e9 dans tonic-server.rs ou http-server.rs",
          "CLAUDE.md mis \u00e0 jour (P0 S\u00e9curit\u00e9 \u2192 R\u00c9SOLU)"
        ],
        "actions": [
          "1. V\u00e9rifier tonic-server.rs et http-server.rs pour SecurityHeadersLayer",
          "2. Ajouter .layer(SecurityHeadersLayer::production()) si absent",
          "3. V\u00e9rifier nginx config pour headers additionnels",
          "4. Tester avec curl -I en production"
        ],
        "files": [
          "veligo-platform/backend/src/bin/tonic-server.rs",
          "veligo-platform/backend/src/bin/http-server.rs",
          "veligo-platform/backend/src/infrastructure/middleware/security_headers.rs"
        ]
      },
      {
        "id": "T005",
        "title": "R\u00e9soudre les 5 tests skipp\u00e9s Users API",
        "priority": "P0",
        "wsjf": 9.0,
        "complexity": "medium",
        "tier": "TIER1",
        "description": "veligo-platform/tests/e2e/api/users.api.spec.ts a 5 tests skipp\u00e9s. API Users est critique pour toutes les fonctionnalit\u00e9s.",
        "success_criteria": [
          "0 test.skip() dans users.api.spec.ts",
          "API Users test\u00e9e E2E",
          "Coverage API Users \u2265 90%"
        ],
        "actions": [
          "1. Lire users.api.spec.ts pour identifier les endpoints test\u00e9s",
          "2. V\u00e9rifier impl\u00e9mentation dans api/user_api.rs ou grpc/services/user.rs",
          "3. Impl\u00e9menter endpoints manquants",
          "4. Activer et faire passer les tests"
        ],
        "files": [
          "veligo-platform/tests/e2e/api/users.api.spec.ts"
        ]
      },
      {
        "id": "T006",
        "title": "R\u00e9soudre les 5 tests skipp\u00e9s Payments API",
        "priority": "P0",
        "wsjf": 9.0,
        "complexity": "complex",
        "tier": "TIER1",
        "description": "veligo-platform/tests/e2e/api/payments.api.spec.ts a 5 tests skipp\u00e9s. Paiements = revenue = critique.",
        "success_criteria": [
          "0 test.skip() dans payments.api.spec.ts",
          "Tests Stripe/SEPA passent",
          "Webhooks valid\u00e9s"
        ],
        "actions": [
          "1. V\u00e9rifier tests skipp\u00e9s: quels endpoints?",
          "2. V\u00e9rifier api/payment_api.rs (1757 LOC)",
          "3. Configurer Stripe test mode si n\u00e9cessaire",
          "4. Activer tests et valider"
        ],
        "files": [
          "veligo-platform/tests/e2e/api/payments.api.spec.ts",
          "veligo-platform/backend/src/api/payment_api.rs"
        ]
      },
      {
        "id": "T007",
        "title": "R\u00e9soudre les 4 tests skipp\u00e9s TCL Multimodal (AO Lyon)",
        "priority": "P1",
        "wsjf": 8.5,
        "complexity": "complex",
        "tier": "TIER2",
        "description": "AO Lyon \u00a75.2.x exige int\u00e9gration TCL multimodal. 4 tests skipp\u00e9s pour journey planner et carbon widget.",
        "success_criteria": [
          "Journey planner TCL fonctionnel",
          "Carbon widget UI impl\u00e9ment\u00e9",
          "4 tests passent"
        ],
        "actions": [
          "1. V\u00e9rifier API TCL existante (modules/tcl-integration)",
          "2. Impl\u00e9menter journey planner endpoint",
          "3. Cr\u00e9er carbon widget component Svelte",
          "4. Activer tests"
        ],
        "files": [
          "tests/e2e/ao-compliance/lyon/tcl-multimodal.spec.ts"
        ]
      },
      {
        "id": "T008",
        "title": "R\u00e9soudre les 5 tests skipp\u00e9s Nantes Box S\u00e9curis\u00e9s (AO Nantes)",
        "priority": "P1",
        "wsjf": 8.0,
        "complexity": "complex",
        "tier": "TIER2",
        "description": "AO Nantes exige box s\u00e9curis\u00e9s avec QR unlock. 5 tests skipp\u00e9s.",
        "success_criteria": [
          "QR unlock flow fonctionnel",
          "Box reservation test\u00e9e",
          "5 tests passent"
        ],
        "actions": [
          "1. Impl\u00e9menter QR code generation (qrcode crate d\u00e9j\u00e0 en deps)",
          "2. Cr\u00e9er unlock endpoint",
          "3. Int\u00e9grer avec station slots",
          "4. Activer tests"
        ],
        "files": [
          "tests/e2e/ao-compliance/nantes/box-securises.spec.ts"
        ]
      },
      {
        "id": "T009",
        "title": "R\u00e9soudre les 11 tests skipp\u00e9s Bike Maintenance Journey",
        "priority": "P1",
        "wsjf": 7.5,
        "complexity": "medium",
        "tier": "TIER2",
        "description": "veligo-platform/tests/e2e/journeys/19-bike-maintenance.spec.ts a 11 tests skipp\u00e9s pour le parcours maintenance v\u00e9lo.",
        "success_criteria": [
          "Workflow maintenance complet",
          "11 tests passent",
          "Owner peut g\u00e9rer maintenance"
        ],
        "actions": [
          "1. Analyser les 11 tests skipp\u00e9s",
          "2. V\u00e9rifier modules/fleet-management",
          "3. Impl\u00e9menter endpoints manquants",
          "4. Cr\u00e9er UI maintenance si n\u00e9cessaire"
        ],
        "files": [
          "veligo-platform/tests/e2e/journeys/19-bike-maintenance.spec.ts"
        ]
      },
      {
        "id": "T010",
        "title": "R\u00e9soudre les 9 tests skipp\u00e9s Referral Program",
        "priority": "P1",
        "wsjf": 7.0,
        "complexity": "medium",
        "tier": "TIER2",
        "description": "veligo-platform/tests/e2e/journeys/20-referral-program.spec.ts a 9 tests skipp\u00e9s pour le programme de parrainage.",
        "success_criteria": [
          "Referral link generation",
          "Reward attribution",
          "9 tests passent"
        ],
        "actions": [
          "1. V\u00e9rifier modules/referral-program",
          "2. Impl\u00e9menter generate_referral_link, track_referral, attribute_reward",
          "3. Cr\u00e9er UI referral dashboard",
          "4. Activer tests"
        ],
        "files": [
          "veligo-platform/tests/e2e/journeys/20-referral-program.spec.ts"
        ]
      },
      {
        "id": "T011",
        "title": "Supprimer stations_hexagonal.rs et stations_v2.rs (MUDA)",
        "priority": "P1",
        "wsjf": 8.5,
        "complexity": "simple",
        "tier": "TIER1",
        "description": "4 fichiers stations API cr\u00e9ent confusion. Garder stations.rs + station_grpc_web.rs, supprimer les autres.",
        "success_criteria": [
          "stations_hexagonal.rs supprim\u00e9",
          "stations_v2.rs supprim\u00e9 (code merg\u00e9 dans stations.rs si utile)",
          "Compilation OK",
          "Tests passent"
        ],
        "actions": [
          "1. Diff stations.rs vs stations_v2.rs - identifier am\u00e9liorations",
          "2. Merger am\u00e9liorations de v2 dans stations.rs",
          "3. Supprimer stations_v2.rs et stations_hexagonal.rs",
          "4. Mettre \u00e0 jour imports dans mod.rs",
          "5. Ex\u00e9cuter tests"
        ],
        "files": [
          "veligo-platform/backend/src/api/stations.rs",
          "veligo-platform/backend/src/api/stations_v2.rs",
          "veligo-platform/backend/src/api/stations_hexagonal.rs"
        ]
      },
      {
        "id": "T012",
        "title": "Consolider MFA Components (2616 LOC \u2192 ~1200 LOC)",
        "priority": "P1",
        "wsjf": 7.5,
        "complexity": "medium",
        "tier": "TIER2",
        "description": "MfaSetup.svelte (1124 LOC) et auth/MFASetup.svelte (1492 LOC) sont des duplicatas. Cr\u00e9er un composant unique avec props/slots pour variantes.",
        "success_criteria": [
          "Un seul MFASetup.svelte",
          "Toutes les pages MFA fonctionnent",
          "~1400 LOC \u00e9conomis\u00e9s"
        ],
        "actions": [
          "1. Comparer les deux fichiers",
          "2. Cr\u00e9er MFASetupGeneric.svelte avec props configurables",
          "3. Remplacer usages par le composant g\u00e9n\u00e9rique",
          "4. Supprimer le duplicata",
          "5. Tester pages MFA"
        ],
        "files": [
          "veligo-platform/frontend/src/lib/components/MfaSetup.svelte",
          "veligo-platform/frontend/src/lib/components/auth/MFASetup.svelte"
        ]
      },
      {
        "id": "T013",
        "title": "R\u00e9soudre les 7 tests skipp\u00e9s Module Injection",
        "priority": "P1",
        "wsjf": 7.0,
        "complexity": "medium",
        "tier": "TIER2",
        "description": "tenant/frontend-user/tests/module-injection.spec.ts a 7 tests skipp\u00e9s pour l'injection de modules frontend.",
        "success_criteria": [
          "Module injection fonctionnelle",
          "7 tests passent",
          "Modules s'injectent correctement par tenant"
        ],
        "actions": [
          "1. Analyser les 7 tests skipp\u00e9s",
          "2. V\u00e9rifier infrastructure/modules/registry.rs (6 TODOs)",
          "3. Impl\u00e9menter persistence modules si manquante",
          "4. Activer tests"
        ],
        "files": [
          "tenant/frontend-user/tests/module-injection.spec.ts"
        ]
      },
      {
        "id": "T014",
        "title": "Consolider BikeMap Components (2086 LOC \u2192 ~1000 LOC)",
        "priority": "P2",
        "wsjf": 6.5,
        "complexity": "medium",
        "tier": "TIER2",
        "description": "maps/BikeMap.svelte + tracking/BikeMap.svelte sont quasi-identiques. Cr\u00e9er composant g\u00e9n\u00e9rique.",
        "success_criteria": [
          "Un seul BikeMapGeneric.svelte",
          "Styling via props/CSS variables",
          "~1000 LOC \u00e9conomis\u00e9s"
        ],
        "actions": [
          "1. Diff les deux fichiers",
          "2. Extraire diff\u00e9rences en props/slots",
          "3. Cr\u00e9er BikeMapGeneric.svelte",
          "4. Remplacer usages",
          "5. Supprimer duplicata"
        ],
        "files": [
          "veligo-platform/frontend/src/lib/components/maps/BikeMap.svelte",
          "veligo-platform/frontend/src/lib/components/tracking/BikeMap.svelte"
        ]
      },
      {
        "id": "T015",
        "title": "R\u00e9soudre les 4 tests skipp\u00e9s Tracking API",
        "priority": "P2",
        "wsjf": 6.0,
        "complexity": "medium",
        "tier": "TIER2",
        "description": "veligo-platform/tests/e2e/api/tracking.api.spec.ts a 4 tests skipp\u00e9s pour l'API tracking GPS.",
        "success_criteria": [
          "Tracking API fonctionnelle",
          "4 tests passent",
          "Positions v\u00e9los r\u00e9cup\u00e9rables"
        ],
        "actions": [
          "1. V\u00e9rifier modules/tracking-velco, tracking-abeeway",
          "2. Impl\u00e9menter endpoints manquants",
          "3. Activer tests"
        ],
        "files": [
          "veligo-platform/tests/e2e/api/tracking.api.spec.ts"
        ]
      },
      {
        "id": "T016",
        "title": "R\u00e9soudre les 3 tests skipp\u00e9s Chaos Resilience",
        "priority": "P2",
        "wsjf": 5.5,
        "complexity": "complex",
        "tier": "TIER3",
        "description": "tenant/frontend-user/tests/chaos-resilience.spec.ts a 3 tests skipp\u00e9s pour les tests chaos engineering.",
        "success_criteria": [
          "Chaos scenarios impl\u00e9ment\u00e9s",
          "3 tests passent avec CHAOS_ENABLED=true",
          "R\u00e9silience valid\u00e9e"
        ],
        "actions": [
          "1. V\u00e9rifier veligo-platform/backend/src/chaos/scenarios.rs",
          "2. Impl\u00e9menter chaos scenarios manquants",
          "3. Activer tests avec env var"
        ],
        "files": [
          "tenant/frontend-user/tests/chaos-resilience.spec.ts",
          "veligo-platform/backend/src/chaos/scenarios.rs"
        ]
      },
      {
        "id": "T017",
        "title": "D\u00e9composer reporting_analytics_module.rs (4038 LOC)",
        "priority": "P2",
        "wsjf": 7.0,
        "complexity": "complex",
        "tier": "TIER3",
        "description": "Fichier monolithique de 4038 LOC. Scinder en: analytics_engine.rs, kpi_calculator.rs, export_service.rs, scheduler.rs.",
        "success_criteria": [
          "4 fichiers < 1200 LOC chacun",
          "Tests existants passent",
          "API publique inchang\u00e9e"
        ],
        "actions": [
          "1. Identifier les responsabilit\u00e9s dans le fichier",
          "2. Cr\u00e9er modules/reporting/ directory",
          "3. Extraire analytics_engine.rs (calculs)",
          "4. Extraire kpi_calculator.rs (KPIs AOM)",
          "5. Extraire export_service.rs (PDF/Excel)",
          "6. Extraire scheduler.rs (jobs planifi\u00e9s)",
          "7. Cr\u00e9er mod.rs avec re-exports"
        ],
        "files": [
          "veligo-platform/backend/src/modules/reporting_analytics_module.rs"
        ]
      },
      {
        "id": "T018",
        "title": "Corriger 34 TODO/FIXME dans le backend",
        "priority": "P2",
        "wsjf": 5.0,
        "complexity": "medium",
        "tier": "TIER3",
        "description": "34 TODO/FIXME/XXX identifi\u00e9s. Prioriser et r\u00e9soudre les plus critiques.",
        "success_criteria": [
          "TODOs r\u00e9duits \u00e0 < 10",
          "TODOs restants document\u00e9s avec issue tracker",
          "Pas de unimplemented!() en production"
        ],
        "actions": [
          "1. grep -r 'TODO|FIXME|XXX|unimplemented!' backend/src/",
          "2. Trier par criticit\u00e9 (unimplemented! = P0)",
          "3. R\u00e9soudre les plus critiques",
          "4. Cr\u00e9er tickets pour les autres"
        ],
        "files": [
          "veligo-platform/backend/src/**/*.rs"
        ]
      },
      {
        "id": "T019",
        "title": "R\u00e9soudre les 5 tests skipp\u00e9s Modules Frontend",
        "priority": "P2",
        "wsjf": 5.5,
        "complexity": "medium",
        "tier": "TIER2",
        "description": "veligo-platform/frontend/tests/e2e/modules.spec.ts a 5 tests skipp\u00e9s pour v\u00e9rification modules par tenant.",
        "success_criteria": [
          "Module visibility par tenant fonctionne",
          "5 tests passent",
          "UI s'adapte aux modules activ\u00e9s"
        ],
        "actions": [
          "1. V\u00e9rifier tests: MOD.VRF.01-05",
          "2. Impl\u00e9menter feature flags UI",
          "3. Activer tests"
        ],
        "files": [
          "veligo-platform/frontend/tests/e2e/modules.spec.ts"
        ]
      },
      {
        "id": "T020",
        "title": "Consolider StationMap Components (1973 LOC \u2192 ~900 LOC)",
        "priority": "P2",
        "wsjf": 6.0,
        "complexity": "medium",
        "tier": "TIER3",
        "description": "maps/StationMap.svelte + stations/StationMap.svelte sont duplicatas. Cr\u00e9er composant g\u00e9n\u00e9rique.",
        "success_criteria": [
          "Un seul StationMapGeneric.svelte",
          "~1000 LOC \u00e9conomis\u00e9s",
          "Pages stations fonctionnent"
        ],
        "actions": [
          "1. Diff les deux fichiers",
          "2. Extraire config en props",
          "3. Cr\u00e9er StationMapGeneric.svelte",
          "4. Remplacer usages",
          "5. Supprimer duplicata"
        ],
        "files": [
          "veligo-platform/frontend/src/lib/components/maps/StationMap.svelte",
          "veligo-platform/frontend/src/lib/components/stations/StationMap.svelte"
        ]
      }
    ],
    "deploy": [
      {
        "id": "D001",
        "title": "V\u00e9rifier et activer SecurityHeadersLayer en production",
        "priority": "P0",
        "wsjf": 9.5,
        "complexity": "simple",
        "tier": "TIER1",
        "description": "Le code security_headers.rs existe mais peut ne pas \u00eatre activ\u00e9. V\u00e9rifier nginx + backend.",
        "success_criteria": [
          "curl -I https://veligo.app | grep Strict-Transport-Security",
          "curl -I https://veligo.app | grep Content-Security-Policy",
          "curl -I https://veligo.app | grep X-Frame-Options"
        ],
        "actions": [
          "1. SSH sur Azure VM 4.251.107.141",
          "2. V\u00e9rifier /etc/nginx/sites-available/*.conf pour security headers",
          "3. V\u00e9rifier tonic-server.rs pour .layer(SecurityHeadersLayer::production())",
          "4. Ajouter si manquant",
          "5. Restart nginx + backend",
          "6. Valider avec curl -I"
        ],
        "files": [
          "/etc/nginx/sites-available/veligo.app",
          "veligo-platform/backend/src/bin/tonic-server.rs"
        ]
      },
      {
        "id": "D002",
        "title": "Configurer Rate Limiting sur endpoints sensibles",
        "priority": "P0",
        "wsjf": 9.0,
        "complexity": "simple",
        "tier": "TIER1",
        "description": "rate_limiter.rs existe avec config (auth: 5/min, api: 30/min). V\u00e9rifier activation.",
        "success_criteria": [
          "X-RateLimit-Limit header pr\u00e9sent sur /auth/*",
          "6\u00e8me requ\u00eate en 1 min sur /auth retourne 429",
          "Logs montrent rate limiting actif"
        ],
        "actions": [
          "1. V\u00e9rifier tonic-server.rs pour RateLimiter middleware",
          "2. V\u00e9rifier connexion Redis fonctionnelle",
          "3. Ajouter rate_limit_middleware si absent",
          "4. Tester avec curl en boucle"
        ],
        "files": [
          "veligo-platform/backend/src/bin/tonic-server.rs",
          "veligo-platform/backend/src/middleware/rate_limiter.rs"
        ]
      },
      {
        "id": "D003",
        "title": "Cr\u00e9er migrations tables manquantes (stations, bikes, bookings)",
        "priority": "P1",
        "wsjf": 8.0,
        "complexity": "medium",
        "tier": "TIER2",
        "description": "CLAUDE.md indique tables manquantes: stations, station_slots, bikes, bookings, incidents. Migrations existent mais peuvent ne pas \u00eatre ex\u00e9cut\u00e9es.",
        "success_criteria": [
          "psql veligo_db -c '\\dt' liste toutes les tables",
          "API stations retourne donn\u00e9es",
          "API bookings fonctionne"
        ],
        "actions": [
          "1. SSH sur VM prod",
          "2. Ex\u00e9cuter sqlx migrate run",
          "3. V\u00e9rifier tables cr\u00e9\u00e9es",
          "4. Ins\u00e9rer donn\u00e9es de test si n\u00e9cessaire"
        ],
        "files": [
          "veligo-platform/migrations/*.sql"
        ]
      },
      {
        "id": "D004",
        "title": "D\u00e9ployer gRPC-Web proxy sur nginx (si non fait)",
        "priority": "P1",
        "wsjf": 8.5,
        "complexity": "medium",
        "tier": "TIER1",
        "description": "CLAUDE.md dit gRPC-Web R\u00c9SOLU mais v\u00e9rifier que nginx route correctement /veligo.* vers :50051.",
        "success_criteria": [
          "grpcurl -plaintext api.veligo.app:443 veligo.auth.v1.AuthService/Login fonctionne",
          "Frontend peut appeler gRPC-Web sans erreur",
          "No CORS errors"
        ],
        "actions": [
          "1. V\u00e9rifier nginx config pour location /veligo",
          "2. V\u00e9rifier grpc_pass grpc://localhost:50051",
          "3. Tester avec grpcurl ou depuis frontend",
          "4. Ajuster CORS si n\u00e9cessaire"
        ],
        "files": [
          "/etc/nginx/sites-available/api.veligo.app"
        ]
      },
      {
        "id": "D005",
        "title": "Mettre \u00e0 jour CLAUDE.md avec \u00e9tat r\u00e9el s\u00e9curit\u00e9",
        "priority": "P2",
        "wsjf": 6.0,
        "complexity": "simple",
        "tier": "TIER3",
        "description": "CLAUDE.md dit 'HSTS, CSP, X-Frame-Options manquants' mais le code existe. Apr\u00e8s D001, mettre \u00e0 jour la documentation.",
        "success_criteria": [
          "Section s\u00e9curit\u00e9 refl\u00e8te l'\u00e9tat r\u00e9el",
          "Status \ud83d\udd34 \u2192 \u2705 apr\u00e8s validation",
          "Date de derni\u00e8re mise \u00e0 jour actualis\u00e9e"
        ],
        "actions": [
          "1. Apr\u00e8s D001 valid\u00e9, \u00e9diter CLAUDE.md",
          "2. Mettre \u00e0 jour table S\u00c9CURIT\u00c9 - STATUS",
          "3. Ajouter date de validation",
          "4. Commit avec message 'docs: Update security status after validation'"
        ],
        "files": [
          "CLAUDE.md"
        ]
      }
    ]
  },
  "metrics": {
    "total_skipped_tests": 85,
    "priority_p0_tasks": 6,
    "priority_p1_tasks": 10,
    "priority_p2_tasks": 9,
    "estimated_loc_savings": 10654,
    "deployment_status": "BLOCKED"
  }
}