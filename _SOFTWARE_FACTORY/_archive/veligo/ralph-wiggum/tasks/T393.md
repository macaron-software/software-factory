# Task T393: Droit √† l'effacement (Article 17)

**Priority**: P1
**WSJF Score**: 8.8
**Queue**: TDD
**Category**: AO_COMPLIANCE
**Original ID**: AO-RGPD-002
**Phase**: üéØ PHASE 2: COMPLIANCE AO (Priority P1)
**Section**: 2.4 RGPD & Accessibilit√©

## Description
Droit √† l'effacement (Article 17)

## Test File
`ao/rgpd-right-erasure.spec.ts`

## Estimated Files
3 fichier(s) √† modifier

## Success Criteria
- [ ] Test E2E cr√©√©/modifi√©: `ao/rgpd-right-erasure.spec.ts`
- [ ] Test passe en local
- [ ] Pas de test.skip() sans condition
- [ ] Code review adversarial pass√©
- [ ] Pas de stubs ou TODOs

## Definition of Done (DoD)
- [ ] Feature compl√®tement impl√©ment√©e
- [ ] Tests E2E verts
- [ ] Conformit√© AO v√©rifi√©e (si applicable)
- [ ] Documentation mise √† jour

## Ralph Status Block


## Fractal Decomposition
**Status**: DECOMPOSED
**Sub-tasks**: T506, T506, T506
**Timestamp**: 2026-01-14T13:26:44.040365

This task was too large and has been decomposed into smaller sub-tasks.

---RALPH_STATUS---
STATUS: DECOMPOSED
COMPLEXITY: medium
WSJF: 8.8
CATEGORY: AO_COMPLIANCE
ORIGINAL_ID: AO-RGPD-002
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 13:24:33 CET 2026)
```
    lastName: 'Dupont',
  },
  ADMIN_IDFM: {
    id: '30000000-0000-0000-0000-000000000002',
    email: 'admin@idfm.fr',
    password: 'AdminTest2025!',
    tenant: 'idfm',
    tenantId: '00000000-0000-0000-0000-000000000001',
    role: 'admin',
    firstName: 'Admin',
    lastName: 'IDFM',
    mfaEnabled: true,
    mfaSecret: 'JBSWY3DPEHPK3PXP',
  },
} as const;

const BASE_URL = process.env.BASE_URL || 'http://localhost:5173';

// Test user
const TEST_USER = TEST_USERS.
```

## Last Failure (Wed Jan 14 13:25:12 CET 2026)
```
</think>

Let me examine the existing GDPR API implementation:
```bash
cat veligo-platform/backend/src/api/gdpr_api.rs
```

=== Action Results ===
bash: OK
// Trace: 2025-12-28 - RGPD/GDPR Compliance API (Refactored with Repository Pattern)
// Reference: GDPR Articles 7, 15, 17, 20, 33, 34
// Purpose: Consent management, data export, right to erasure, breach notification
// Spec: CNIL guidelines + Veligo AO requirements (IDFM/Nantes/Lyon)
// Refactoring: Reduced from 37 sqlx calls to <10 by using repository pattern

use crate::infrastructure::http::middleware::require_auth;
use axum::{
    extract::{Extension, Path, Query},
    http::StatusCode,
  
```

## Last Failure (Wed Jan 14 13:25:45 CET 2026)
```
        }).collect::<Vec<_>>()
    });

    Ok(export)
}

// ========================

=== LLM Response ===
<think>
The file is 1868 lines. Let me search for erasure implementation and check the test file for what's expected.
</think>

```bash
cat veligo-platform/frontend/tests/ao/rgpd-right-erasure.spec.ts
```

=== Action Results ===
bash: FAIL
cat: veligo-platform/frontend/tests/ao/rgpd-right-erasure.spec.ts: No such file or directory
```

## Last Failure (Wed Jan 14 13:25:46 CET 2026)
```
            })
        }).collect::<Vec<_>>(),
        "payments": payments.iter().map(|p| {
            serde_json::json!({
                "id": p.id,
                "amount_cents": p.amount_cents,
                "currency": p.currency,
                "status": p.status,
                "card_last4": "****",
                "created_at": p.created_at
            })
        }).colle
---
bash: OK
veligo-platform/backend/src/api/admin.rs:    // Note: ZIP generation with user data handled by gdpr-compliance module
veligo-platform/backend/src/api/gdpr_api.rs:    pub gdpr_article: String,
veligo-platform/backend/src/api/gdpr_api.rs:async fn log_gdpr_action(
veligo-platform/backend/src/api/gdpr_api.rs:        let _ = log_gdpr_action(
veligo-platform/backend/src/api/gdpr_api.rs:    let _ = log_gdpr_action(
veligo-platform/backend/src/api/gdpr_api.rs:            "gdpr_article": "Art. 15 & 20",
```

## Last Failure (Wed Jan 14 13:26:38 CET 2026)
```
<bash>
ls -la veligo-platform/frontend/tests/ao/ 2>/dev/null || echo "Directory doesn't exist"
</bash>

=== Action Results ===
bash: OK
Directory doesn't exist


=== LLM Response ===
<think>
The `ao/` directory doesn't exist in the frontend tests. I need to create it and the test file. Let me also check if there are any existing AO tests in the project:
</think>

<bash>
find veligo-platform -type d -name "ao" 2>/dev/null
</bash>

=== Action Results ===
bash: OK
```
