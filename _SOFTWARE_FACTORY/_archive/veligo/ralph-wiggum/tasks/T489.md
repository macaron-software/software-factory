# Task T489: DNS validation automatique

**Priority**: P2
**WSJF Score**: 6.5
**Queue**: TDD
**Category**: WHITE_LABEL
**Original ID**: WL-DOMAIN-003
**Phase**: üé® PHASE 3: WHITE-LABEL (Priority P1)
**Section**: 3.2 Domaines & Multi-tenant

## Description
DNS validation automatique

## Test File
`white-label/dns-validation.spec.ts`

## Estimated Files
3 fichier(s) √† modifier

## Success Criteria
- [ ] Test E2E cr√©√©/modifi√©: `white-label/dns-validation.spec.ts`
- [ ] Test passe en local
- [ ] Pas de test.skip() sans condition
- [ ] Code review adversarial pass√©
- [ ] Pas de stubs ou TODOs

## Definition of Done (DoD)
- [ ] Feature compl√®tement impl√©ment√©e
- [ ] Tests E2E verts
- [ ] Conformit√© AO v√©rifi√©e (si applicable)
- [ ] Documentation mise √† jour

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 6.5
CATEGORY: WHITE_LABEL
ORIGINAL_ID: WL-DOMAIN-003
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 14:19:52 CET 2026)
```
<bash>
find veligo-platform -type f -name "*.ts" | xargs grep -l "tenant.*domain\|domain.*tenant" 2>/dev/null | grep -v "node_modules\|.svelte-kit\|target" | head -10</bash>

=== Action Results ===
bash: FAIL
/bin/sh: -c: line 0: syntax error near unexpected token `('
/bin/sh: -c: line 0: `cat veligo-platform/tenant/frontend-admin/src/routes/(admin)/tenants/[id]/+page.svelte | head -150'

---
bash: OK
veligo-platform/frontend/tests/journeys/owner.journey.spec.ts
veligo-platform/frontend/tests/e2e/owner.spec.ts
veligo-platform/frontend/tests/e2e/admin.spec.ts
veligo-platform/frontend/src/app.d.ts
veligo-platform/frontend/src/lib/config/tenantAssets.ts
veligo-platform/frontend/src/lib/stores/tenantStore.svelte.ts
veligo-platform/frontend/src/lib/stores/tenantRouter.ts
veligo-platform/frontend/src/lib/api/tenants.ts
veligo-platform/frontend/src/hooks.server.ts
veligo-platform/tests/e2e/tenant-id
```

## Last Failure (Wed Jan 14 14:21:12 CET 2026)
```
// - GET /api/tenants/:id/modules - List enabled modules for tenant
// - PUT /api/tenants/:id/modules/:module_id - Enable/disable module
// - GET /api/tenants/resolve - Resolve domain to tenant

use crate::infrastructure::http::middleware::{require_admin, require_auth};
use axum::{
    extract::{Extension, Path, Query},
---
bash: OK
39:    /// Domain for this tenant
84:/// Domain resolution query parameters
86:pub struct DomainQuery {
87:    /// Domain to resolve (e.g., idfm.veligo.app)
91:/// Domain resolution response
93:pub struct DomainResolution {
555:        ("domain" = String, Query, description = "Domain to resolve")
558:        (status = 200, description = "Domain resolved", body = DomainResolution),
559:        (status = 404, description = "Domain not found"),
566:    Query(query): Query<DomainQuery>,
567:) -> Res
```

## Last Failure (Wed Jan 14 14:22:08 CET 2026)
```
    /// AO Ref: IDFM ¬ß2.3.1.2 "Isolation des donn√©es par tenant"
    #[to
---
bash: OK
// Trace: 2025-12-12T06:06:00 - Sprint 005 - US-OWNER-001: Tenant Config HTTP API
// Reference: Admin backoffice API for tenant configuration management
// AO Reference: Multi-tenant administration (Cyclonova vs Nantes configs)

use axum::{
    extract::{Path, Query, State},
    http::StatusCode,
    response::{IntoResponse, Response},
    Json,
};
use serde::{Deserialize, Serialize};
use std::sync::Arc;
use uuid::Uuid;

use crate::domain::tenant::{
    BrandingConfig, ModulesConfig, PaymentProv
```
