# Task T356: Créer BadgeService gRPC (gamification)

**Priority**: P2
**WSJF Score**: 5.0
**Queue**: TDD
**Type**: backend
**Generated by**: LRM Brain (RLM)

## Description
Badges écologiques CO2 - currently only REST.

## Success Criteria
- [ ] Tests pass
- [ ] gRPC service functional (if backend)
- [ ] UI matches design (if frontend)
- [ ] No regressions

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
MODEL_TIER: TIER2
WSJF: 5.0
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 10:17:14 CET 2026)
```
=== Action Results ===
bash: FAIL
/bin/sh: -c: line 0: syntax error near unexpected token `<'
/bin/sh: -c: line 0: `
<command>whoami</command>
 <timeout></timeout>
'


=== LLM Response ===
<think>
It seems the bash output format is incorrect. Let me try without the xml tags.
</think>

<bash>
<command>ls /workspace/veligo-platform/backend/src</command>
 <timeout></timeout>
</bash>

=== Action Results ===
bash: FAIL
/bin/sh: -c: line 0: syntax error near unexpected token `newline'
/bin/sh: -c: line 0: `<command>ls /workspace/veligo-platform/backend/src</command>'
```

## Last Failure (Wed Jan 14 10:17:54 CET 2026)
```
Found it! The backend is at `/Users/sylvain/_LAPOSTE/_VELIGO2/veligo-platform/backend`. Let me explore this directory structure.
</think>

```bash
ls -la /Users/sylvain/_LAPOSTE/_VELIGO2/veligo-platform/backend/src/
```

=== Action Results ===
bash: OK
total 16
drwxr-xr-x  21 sylvain  staff   672 Jan 13 19:32 .
drwxr-xr-x  26 sylvain  staff   832 Jan 13 01:29 ..
drwxr-xr-x  40 sylvain  staff  1280 Jan 13 23:08 api
drwxr-xr-x   6 sylvain  staff   192 Dec 11 18:34 application
drwxr-xr-x@  4 sylvain  staff   128 Jan 13 19:33 auth
drwxr-xr-x   5 sylvain  staff   160 Jan 13 23:13 bin
drwxr-xr-x   5 sylvain  staff   160 Dec 28 02:29 chaos
drwxr-xr-x  19 sylvain  staff   608 Jan  9 08:09 domain
drwxr-xr-x   3 sylvain  staff    96 Dec 29 21:44 error
d
```

## Last Failure (Wed Jan 14 10:18:26 CET 2026)
```
=== Action Results ===
bash: OK
//! Badge Service - Attribution automatique des badges écologiques
//!
//! Service pour:
//! - Vérifier et attribuer automatiquement les badges après chaque trajet
//! - Calculer la progression vers les prochains badges
//! - Envoyer les notifications d'obtention
//! - Gérer le leaderboard anonyme
//!
//! Demandé par l'AO Naolib.

use chrono::{DateTime, Utc};
use sqlx::{FromRow, PgPool};
use thiserror::Error;
use tracing::{info, warn};
use uuid::Uuid;

use super::badge::{
    get_ecological_badg
```
