# Task T303: Add stations page data loading

**Priority**: P0
**Queue**: TDD
**Type**: implementation

## File
veligo-platform/frontend/src/routes/(app)/stations/+page.server.ts

## Description
Add load function to fetch stations via gRPC ListStations, handle station filtering by tenant

## Success Criteria
- [ ] Implementation complete
- [ ] cargo check passes (or npm run build for frontend)
- [ ] Unit/integration tests added
- [ ] No new warnings
- [ ] Works with gRPC calls (frontend) or database queries (backend)

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: high
WSJF: 12
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 10:00:48 CET 2026)
```
Let me look at more files to understand the architecture better.
</think>
<bash>
cat "veligo-platform/frontend/src/lib/grpc-client.ts" 2>/dev/null || cat "veligo-platform/frontend/src/lib/api/grpc.ts" 2>/dev/null || find "veligo-platform/frontend" -name "*grpc*.ts" 2>/dev/null | head -5</bash>
<bash>
cat "veligo-platform/frontend/src/routes/(app)/admin/+page.server.ts" 2>/dev/null || echo "No server file"</bash>

=== Action Results ===
bash: OK
import { GrpcWebFetchTransport } from '@protobuf-ts/grpcweb-transport';
import type { UnaryCall } from '@protobuf-ts/runtime-rpc';
import { AuthServiceClient } from './grpc/auth/v1/auth.client';
import { ModuleServiceClient } from './grpc/module/v1/module.client';
import { SubscriptionServiceClient } from './grpc/subscription/v1/subscription.client';
import { StationServiceClient } from './grpc/station/v1/station.client';
import { BookingServiceClient } from './grpc/booking/v1/booking.client';
i
---
bash: OK
No server file
```

## Last Failure (Wed Jan 14 10:01:50 CET 2026)
```
  return respo

=== LLM Response ===
<think>
Now I understand the pattern. Let me look at the full grpc-client.ts file and api/subscriptions.ts to understand how to implement the stations API:
</think>

<bash>
cat "veligo-platform/frontend/src/lib/grpc-client.ts"</bash>

=== Action Results ===
bash: OK
import { GrpcWebFetchTransport } from '@protobuf-ts/grpcweb-transport';
import type { UnaryCall } from '@protobuf-ts/runtime-rpc';
import { AuthServiceClient } from './grpc/auth/v1/auth.client';
import { ModuleServiceClient } from './grpc/module/v1/module.client';
import { SubscriptionServiceClient } from './grpc/subscription/v1/subscription.client';
import { StationServiceClient } from './grpc/station/v1/station.client';
import { BookingServiceClient } from './grpc/booking/v1/booking.client';
i
```

## Last Failure (Wed Jan 14 10:02:33 CET 2026)
```

// Helper to handle gRPC UnaryCall (legacy - new clients return promises directly)
export async function grpcCall<I extends object, O extends object>(
  call: UnaryCall<I, O> | Promis
---
bash: OK
// Trace: Sprint 005 - Subscriptions API Client (gRPC-Web)
// Migrated from REST fetch() to gRPC-Web

import { subscriptionClient, grpcCall, timestampToDate } from '$lib/grpc-client';
import {
  type Subscription as GrpcSubscription,
  type CreateSubscriptionRequest,
  type GetSubscriptionRequest,
  type ListSubscriptionsRequest,
  type CancelSubscriptionRequest,
  type SuspendSubscriptionRequest,
  type ActivateSubscriptionRequest,
  SubscriptionStatus as GrpcSubscriptionStatus,
  PlanType as G
```
