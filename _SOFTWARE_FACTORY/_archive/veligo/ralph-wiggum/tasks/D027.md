# Task D027: Implémenter API Admin Plugins

**Priority**: P1
**Time Estimate**: 4h
**WSJF Score**: 6.5
**Complexity**: medium
**Queue**: FRONTEND

## Description
Remplacer TODO dans admin/plugins/+page.svelte par vraies API calls. Currently mock UI sans backend.

## Success Criteria
- [ ] GET /api/admin/plugins liste plugins
- [ ] POST /api/admin/plugins/{id}/enable active plugin
- [ ] POST /api/admin/plugins/{id}/disable désactive
- [ ] UI reflète état réel du backend

## Actions
1. Créer API endpoints dans module_routes.rs
2. Connecter frontend admin/plugins/+page.svelte
3. Ajouter gestion d'erreurs
4. Créer tests E2E admin plugins

## Files to Create/Modify
- [ ] veligo-platform/backend/src/infrastructure/http/module_routes.rs (MODIFY)
- [ ] veligo-platform/frontend/src/routes/(app)/admin/plugins/+page.svelte (MODIFY)
- [ ] veligo-platform/tests/e2e/admin/plugins.spec.ts (CREATE)

## Ralph Status Block
---RALPH_STATUS---
STATUS: COMPLETE
COMPLEXITY: medium
MODEL_TIER: TIER2
WSJF: 6.5
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 18:11:28 CET 2026)
```
    tracing::info!(
        user_id = %auth.user_id,
        role = %auth.role,
        tenant = %tenant_slug,
        module = %module_id,
        "Activating module"
    );

    // Activate module (handles dependencies automatically)
    registry
        .as_ref()
        .activate_module(&tenant_slug, &module_id)
        .await
        .map_err(|e| (StatusCode::INTERNAL_SERVER_ERROR, e.to_string()))?;

    Ok(StatusCode::OK)
}

/// Deactivate a module for a tenant
/// Require
```

## Last Failure (Wed Jan 14 18:11:59 CET 2026)
```
bash: OK
<!-- Trace: 2025-12-11T17:59:00 - Plugin Admin UI - Phase 3 -->
<!-- Reference: PLUGIN-ARCHITECTURE.md - Visual plugin management -->

<script lang="ts">
	import { onMount } from 'svelte';

	interface Plugin {
		id: string;
		name: string;
		version: string;
		enabled: boolean;
		category: 'payment' | 'tracking' | 'erp' | 'notification';
		config: Record<string, any>;
		hooks: string[];
	}

	let plugins: Plugin[] = $state([]);
	let loading = $state(true);
	let selectedPlugin: Plugin | null = $st
```

## Last Failure (Wed Jan 14 18:12:58 CET 2026)
```
use std::sync::Arc;

use super::middleware::{require_admin, AuthContext};
use c
---
bash: OK
/// Deactivate a module for a tenant
/// Requires admin role (enforced by middleware layer)
pub async fn deactivate_module(
    State(registry): State<Arc<ModuleRegistry>>,
    Extension(auth): Extension<AuthContext>,
    Path((tenant_slug, module_id)): Path<(String, String)>,
) -> Result<StatusCode, (StatusCode, String)> {
    tracing::info!(
        user_id = %auth.user_id,
        role = %auth.role,
        tenant = %tenant_slug,
        module = %module_id,
        "Deactivating module"
    
```
