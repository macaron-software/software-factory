# Task T161: Create FranceConnect OAuth config module

**Priority**: P0
**Queue**: TDD
**AO Reference**: AO-IDFM-AUTH-3.1.3

## Description
Create FranceConnect OAuth config module

## File
veligo-platform/backend/src/auth/franceconnect/mod.rs

## Success Criteria
- [ ] File created/modified correctly
- [ ] Code compiles
- [ ] Tests pass
- [ ] No regressions

## Ralph Status Block
---RALPH_STATUS---
STATUS: COMPLETED
COMPLEXITY: medium
WSJF: 8
---END_RALPH_STATUS---

## Last Failure (Tue Jan 13 19:33:43 CET 2026)
```
/// FranceConnect OAuth configuration
#[derive(Debug, Clone)]
pub struct FranceConnectConfig {
    /// OAuth client ID
    pub client_id: String,
    /// OAuth client secret
    pub client_secret: String,
    /// Authorization endpoint URL
    pub authorization_endpoint: String,
    /// Token endpoint UR
---
bash: FAIL
warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
package:   /Users/sylvain/_LAPOSTE/_VELIGO2/veligo-platform/backend/Cargo.toml
workspace: /Users/sylvain/_LAPOSTE/_VELIGO2/veligo-platform/Cargo.toml
   Compiling veligo-api v0.1.0 (/Users/sylvain/_LAPOSTE/_VELIGO2/veligo-platform/backend)
error: error communicating with database: Connection refused (os error 61)
  --> backend/src/modules/station_management_module.rs:69:27
   |
69 |           let 
```

## Last Failure (Tue Jan 13 19:36:20 CET 2026)
```
            logout_endpoint: "https://app.franceconnect.gouv.fr/api/v1/logout".to_string(),
            redirect_uri: "".to_string(),
            scopes: "openid profile email".to_string(),
            acr_values: Some("eidas1".to_string()),
        }
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_default_config() {
        let config = FranceConnectConfig::default();
        assert_eq!(config.authorization_endpoint, "https://app.franceconnect.gouv.fr/api/v1/

=== Action Results ===
write: OK
File written
```

## Last Failure (Tue Jan 13 19:37:49 CET 2026)
```
</think>

<bash>cd /Users/sylvain/_LAPOSTE/_VELIGO2/veligo-platform/backend && timeout 120 cargo check 2>&1 | grep -A 5 "franceconnect\|error\[E"</bash>

=== Action Results ===
bash: OK
error[E0412]: cannot find type `Arc` in this scope
   --> backend/src/services/reporting/report_routes.rs:109:23
    |
109 |     pub redis: Option<Arc<RedisCache>>,
    |                       ^^^ not found in this scope
    |
--
error[E0425]: cannot find value `aom_name` in this scope
   --> backend/src/services/reporting/report_routes.rs:312:24
    |
312 |         aom_name: Some(aom_name),
    |                        ^^^^^^^^ not found in this scope

error[E0433]: failed to resolve: use of un
```

## Last Failure (Wed Jan 14 08:33:32 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T161.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T161[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:38 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T161.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T161[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x106bac590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:45 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T161.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T161[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x107240590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
