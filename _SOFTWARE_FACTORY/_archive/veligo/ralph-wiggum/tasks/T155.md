# TDD Task - Bike Selectors Consistency

## Anomaly
Tests use various bike selectors (`bike-available`, `bike-code`, `bike-type`, `bike-battery`, `bike-model`, `select-bike`) that may not be consistently implemented across all bike components.

## Location
- Tests: `tests/journeys/booking.journey.spec.ts`
- Components: `src/lib/components/bike/*.svelte`, `src/routes/(app)/catalog/+page.svelte`

## Steps

### Phase 1: Audit Existing Bike Components (RED)
```bash
# Find all bike components
find src/lib/components -name "*bike*" -o -name "*Bike*"
```

### Phase 2: Create BikeCard Component with All Selectors
```bash
# Create bike card component
touch src/lib/components/bike/BikeCard.svelte
```

```svelte
<!-- src/lib/components/bike/BikeCard.svelte -->
<script lang="ts">
  let { bike, onSelect }: Props = $props();
</script>

<div data-testid="bike-card-{bike.id}" class="bike-card">
  <span data-testid="bike-code">{bike.code}</span>
  <span data-testid="bike-type">{bike.type}</span>
  <span data-testid="bike-battery">{bike.battery}%</span>
  <span data-testid="bike-model">{bike.model}</span>
  <span data-testid="bike-available" class="availability">
    {bike.available ? 'Disponible' : 'Indisponible'}
  </span>
  <button data-testid="select-bike" onclick={() => onSelect?.(bike)}>
    Sélectionner
  </button>
</div>
```

### Phase 3: Add Bike Filters Component
```bash
# Create bike filters component
touch src/lib/components/bike/BikeFilters.svelte
```

```svelte
<!-- src/lib/components/bike/BikeFilters.svelte -->
<script lang="ts">
  let { onFilter }: Props = $props();
</script>

<div data-testid="bike-filters" class="bike-filters">
  <select data-testid="bike-type-filter">
    <option value="all">Tous types</option>
    <option value="electric">Électrique</option>
    <option value="manual">Mécanique</option>
    <option value="cargo">Cargo</option>
  </select>
  <button data-testid="filter-electric">Électrique</button>
  <button data-testid="filter-manual">Mécanique</button>
  <button data-testid="filter-cargo">Cargo</button>
</div>
```

### Phase 4: Verify Tests Pass
```bash
cd veligo-platform/frontend && npm run test:journey -- --grep "bike"
```

## Acceptance Criteria
- [ ] `data-testid="bike-card"` exists for each bike
- [ ] `data-testid="bike-code"` displays bike code
- [ ] `data-testid="bike-type"` displays type
- [ ] `data-testid="bike-battery"` displays battery level
- [ ] `data-testid="bike-model"` displays model name
- [ ] `data-testid="bike-available"` shows availability
- [ ] `data-testid="select-bike"` triggers selection
- [ ] `data-testid="bike-type-filter"` works
- [ ] All bike tests pass
