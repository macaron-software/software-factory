# Task T605: Fix REST endpoints 404

**Priority**: P1
**WSJF Score**: 8.0
**Queue**: TDD
**Domain**: api

## Description
Plusieurs endpoints REST retournent 404 en production.

## Erreurs actuelles (console prod)
```
404 /api/analytics/events
404 /api/errors/client
404 /api/tenants/{id}/theme
404 /api/tenants/default/config
```

## Solution
Implémenter ou router ces endpoints:

### /api/analytics/events
- POST pour enregistrer les événements analytics
- Peut être stub qui log et retourne 200

### /api/errors/client
- POST pour reporter les erreurs JS client
- Log l'erreur et retourne 200

### /api/tenants/{id}/theme
- GET retourne la config theme du tenant
- JSON avec couleurs, logo, etc.

### /api/tenants/default/config
- GET retourne config par défaut
- Fallback quand tenant non spécifié

## Fichiers à modifier
- `veligo-platform/backend/src/api/` (nouveau fichier ou existant)
- Routes Axum HTTP server

## Definition of Done
- [ ] /api/analytics/events retourne 200
- [ ] /api/errors/client retourne 200
- [ ] /api/tenants/{id}/theme retourne JSON
- [ ] /api/tenants/default/config retourne JSON
- [ ] Console prod sans 404 sur ces routes

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 8.0
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 14:33:59 CET 2026)
```
<think>
Let me try to see the full mod.rs file differently
</think>

```bash
cat veligo-platform/backend/src/api/mod.rs 2>/dev/null
```

=== Action Results ===
bash: OK
pub mod admin;
pub mod admin_api; // 2025-12-31: Admin API for E2E tests (TDD Green)
pub mod aom_reporting; // 2025-12-25: AOM KPI Reporting
pub mod auth;
pub mod bike_api; // 2025-12-26: Bike API (mobile app)
pub mod booking_api; // 2025-12-26: Booking API (mobile app)
pub mod booking_api_tdd; // 2025-12-28: TDD Mock endpoints for E2E tests
pub mod booking_grpc_web; // 2026-01-03: gRPC-Web JSON API for E2E tests
pub mod carbon_api; // 2025-12-26: Carbon CO2 Savings Dashboard
pub mod catalog_api
```

## Last Failure (Wed Jan 14 14:34:43 CET 2026)
```
sed -n '100,250p' veligo-platform/backend/src/bin/http-server.rs
</bash>

=== Action Results ===
bash: OK
     587 veligo-platform/backend/src/bin/http-server.rs

---
bash: OK
        .idle_timeout(Duration::from_secs(600)) // Close idle connections after 10 min
        .max_lifetime(Duration::from_secs(1800)) // Max connection lifetime 30 min
        .test_before_acquire(true) // Health check before use
        .connect(&database_url)
        .await?;

    tracing::info!("Database connected successfully");

    // Run migrations - 2025-12-31: Re-enabled for automatic schema updates
    // Set SKIP_MIGRATIONS=1 to skip in production if schema is already up-to-date
   
```

## Last Failure (Wed Jan 14 14:35:12 CET 2026)
```
<think>
The output keeps being truncated. Let me try to use `sed` to get different parts of the file.
</think>

<bash>
sed -n '1,200p' veligo-platform/backend/src/api/mod.rs
</bash>

=== Action Results ===
bash: OK
pub mod admin;
pub mod admin_api; // 2025-12-31: Admin API for E2E tests (TDD Green)
pub mod aom_reporting; // 2025-12-25: AOM KPI Reporting
pub mod auth;
pub mod bike_api; // 2025-12-26: Bike API (mobile app)
pub mod booking_api; // 2025-12-26: Booking API (mobile app)
pub mod booking_api_tdd; // 2025-12-28: TDD Mock endpoints for E2E tests
pub mod booking_grpc_web; // 2026-01-03: gRPC-Web JSON API for E2E tests
pub mod carbon_api; // 2025-12-26: Carbon CO2 Savings Dashboard
pub mod catalog_api
```
