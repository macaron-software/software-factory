# Task T358: Créer ReferralService gRPC

**Priority**: P2
**WSJF Score**: 5.0
**Queue**: TDD
**Type**: backend
**Generated by**: LRM Brain (RLM)

## Description
Programme parrainage - currently only REST.

## Success Criteria
- [ ] Tests pass
- [ ] gRPC service functional (if backend)
- [ ] UI matches design (if frontend)
- [ ] No regressions

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
MODEL_TIER: TIER2
WSJF: 5.0
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 10:17:49 CET 2026)
```
cd veligo-platform/backend && cat src/services/referral/referral_service.rs</bash>

=== Action Results ===
bash: OK
//! Referral Service - Parrainage utilisateurs
//!
//! Gestion du système de parrainage:
//! - Code unique par utilisateur (8 caractères alphanumériques)
//! - Récompenses parrain/filleul configurables par tenant
//! - Tracking des conversions avec statuts
//! - Statistiques et KPIs parrainage

use chrono::{DateTime, Utc};
use rand::Rng;
use serde::{Deserialize, Serialize};
use sqlx::{FromRow, PgPool};
use thiserror::Error;
use uuid::Uuid;

// ====================================================
```

## Last Failure (Wed Jan 14 10:18:27 CET 2026)
```
    lines = content.split('
')
    for i, line in enumerate(lines[:250], 1):
        print(f'{i:4d} | {line}')
"</bash>

=== Action Results ===
bash: OK
   1 | //! Referral Service - Parrainage utilisateurs
   2 | //!
   3 | //! Gestion du système de parrainage:
   4 | //! - Code unique par utilisateur (8 caractères alphanumériques)
   5 | //! - Récompenses parrain/filleul configurables par tenant
   6 | //! - Tracking des conversions avec statuts
   7 | //! - Statistiques et KPIs parrainage
   8 | 
   9 | use chrono::{DateTime, Utc};
  10 | use rand::Rng;
  11 | use serde::{Deserialize, Serialize};
  12 | use sqlx::{FromRow, PgPool};
  13 | use
```

## Last Failure (Wed Jan 14 10:20:18 CET 2026)
```
</think>

Let me check the proto file structure:

```bash
cd veligo-platform/backend && find . -name "*.proto" | head -20
```

<invoke><bash>
<command>cd veligo-platform/backend && find . -name "*.proto" | head -20</command>
 <timeout></timeout>
</bash></invoke>

=== Action Results ===
bash: OK

---
bash: FAIL
/bin/sh: -c: line 0: syntax error near unexpected token `newline'
/bin/sh: -c: line 0: `<command>cd veligo-platform/backend && find . -name "*.proto" | head -20</command>'
```
