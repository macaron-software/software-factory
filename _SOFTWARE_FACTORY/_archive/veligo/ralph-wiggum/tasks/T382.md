# Task T382: Inscription multi-tenant avec validation email

**Priority**: P0
**WSJF Score**: 9.2
**Queue**: TDD
**Category**: JOURNEY
**Original ID**: J-E2E-001
**Phase**: ðŸš´ PHASE 1: JOURNEYS E2E ESSENTIELS (Priority P0)
**Section**: 1.1 Inscription & Onboarding

## Description
Inscription multi-tenant avec validation email

## Test File
`journeys/101-multi-tenant-registration.spec.ts`

## Estimated Files
3 fichier(s) Ã  modifier

## Success Criteria
- [ ] Test E2E crÃ©Ã©/modifiÃ©: `journeys/101-multi-tenant-registration.spec.ts`
- [ ] Test passe en local
- [ ] Pas de test.skip() sans condition
- [ ] Code review adversarial passÃ©
- [ ] Pas de stubs ou TODOs

## Definition of Done (DoD)
- [ ] Feature complÃ¨tement implÃ©mentÃ©e
- [ ] Tests E2E verts
- [ ] ConformitÃ© AO vÃ©rifiÃ©e (si applicable)
- [ ] Documentation mise Ã  jour

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 9.2
CATEGORY: JOURNEY
ORIGINAL_ID: J-E2E-001
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 13:21:32 CET 2026)
```
 * 7. Tenant-specific 
---
bash: OK
/**
 * E2E Journey Tests - Registration Complete (36 tests)
 * TDD Red Phase - Full registration flow with RGPD consent
 *
 * Personas tested:
 * - New IDFM user (Paris/ÃŽle-de-France)
 * - New Nantes user (Naolib white-label)
 * - New Lyon user (TCL integration)
 *
 * Journeys covered:
 * 1. Form display and validation
 * 2. RGPD consent requirements
 * 3. Password strength validation
 * 4. Email verification flow
 * 5. Profile completion
 * 6. First subscription selection
 * 7. Tenant-specific 
```

## Last Failure (Wed Jan 14 13:24:08 CET 2026)
```
 * 6. First subscription selection
 * 7. Tenant-specific behaviors and customizations
 */
test.describe('Multi-tenant Registration Journey', () => {
  test.beforeEach(async ({ page }) => {
    // Clear localStorage and cookies for fresh state
    await page.evaluate(() => {
      localStorage.clear();
      document.cookie.split(';').forEach((c) => {
        document.cookie = c.replace(/^ +/, '').replace(/=.*/, '=;expires=' + new Date().toUTCString() + ';path=/');
      });
    });
  });

  // ==========================================================================
  // SECTION 1: Form Display & Validation (Tests 1-8)
  // ==========================================================================

  test('1.1: Registration form displays correctly for IDFM tenant', async ({ page }) => {
  
```

## Last Failure (Wed Jan 14 13:25:01 CET 2026)
```
    form: '[data-testid="profile-form"]',
    avatar: '[data-testid="profile-avatar"]',
    avatarUpload: '[data-testid="avatar-upload"]',
    birthDat
---
bash: OK
    // Wait for navigation
    await page.waitForURL(/\/(verify-email|dashboard|my-dashboard|subscriptions|login)/, { timeout: 15000 });

    const url = page.url();

    // If redirected to login with registered flag, email verification might be required
    if (url.includes('/login')) {
      expect(url).toContain('registered=true');
      return;
    }

    // If email verification is required, should show verification page
    const verifyPage = page.locator(S.verification.page);
    const i
```
