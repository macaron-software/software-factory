# Task D019: Impl√©menter l'enregistrement dynamique des routes de modules (T023)

**Priority**: P1
**Time Estimate**: 4h
**WSJF Score**: 7.0
**Complexity**: medium
**Queue**: BACKEND

## Description
Enregistrer les routes HTTP dynamiques bas√©es sur module_catalog.routes_json. Les routes doivent √™tre mont√©es √† /api/modules/{module_slug}/*.

## Success Criteria
- [ ] Routes de module mont√©es dynamiquement au startup
- [ ] GET /api/modules/{slug}/config retourne config du module
- [ ] Routes CRUD pour modules qui le d√©finissent
- [ ] Tests d'int√©gration pour routing dynamique

## Actions
1. Cr√©er ModuleRouteRegistry dans infrastructure/http/
2. Parser routes_json du module catalog
3. Cr√©er Router dynamique par module
4. Monter les routes √† /api/modules/{module_slug}/*
5. Ajouter tests d'int√©gration

## Files to Create/Modify
- [ ] veligo-platform/backend/src/infrastructure/http/module_route_registry.rs (CREATE)
- [ ] veligo-platform/backend/src/infrastructure/http/mod.rs (MODIFY)
- [ ] veligo-platform/backend/src/bin/http-server.rs (MODIFY)

## Ralph Status Block
---RALPH_STATUS---
STATUS: COMPLETE
COMPLEXITY: medium
MODEL_TIER: TIER2
WSJF: 7.0
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 17:41:48 CET 2026)
```

## Complexity Assessment
- **Files touched**: 3 files (1 new, 2 modified)
- **LOC estimate**: ~150 LOC (modular, focused on routing logic)
- **Domains involved**: Backend Rust (HTTP routing, module registry, JSON parsing)
- **Dependencies**: Module catalog with `routes_json`, Axum router, JSON deserialization
- **Test coverage**: Integration tests required

‚úÖ **Conclusion**: This task is **NOT too complex** (under 400 LOC, under 5 files), so we proceed with direct implementation.

---

## Implementation Plan

1. **Create `ModuleRouteRegistry`** in `infrastructure/http/`:
   - Define struct to hold module routes
   - Implement method to load and parse `routes_json` from module catalog
  

ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 17:41:53 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/D019.md[0m
[0;34m[AGENT] Queue: deploy[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: D019[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 17:41:58 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/D019.md[0m
[0;34m[AGENT] Queue: deploy[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: D019[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
