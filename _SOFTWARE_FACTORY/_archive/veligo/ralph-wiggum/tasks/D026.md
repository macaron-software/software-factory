# Task D026: Migrer TenantService vers gRPC (frontend)

**Priority**: P1
**Time Estimate**: 6h
**WSJF Score**: 7.5
**Complexity**: medium
**Queue**: FRONTEND

## Description
Migrer les appels REST pour tenant config vers gRPC. Currently TODO dans 5+ fichiers frontend utilisent REST.

## Success Criteria
- [ ] TenantService proto généré et disponible
- [ ] 5+ fichiers migrated vers gRPC
- [ ] GetTenant, ListTenants, UpdateTenant RPCs
- [ ] Tests unitaires pour chaque migration

## Actions
1. Vérifier/créer tenant.proto
2. Générer TypeScript client avec protoc
3. Migrer tenant.ts, login/+page.ts, +layout.ts
4. Migrer ThemeProvider.svelte
5. Créer tests unitaires

## Files to Create/Modify
- [ ] veligo-platform/protos/tenant.proto (MODIFY)
- [ ] veligo-platform/frontend/src/lib/stores/tenant.ts (MODIFY)
- [ ] veligo-platform/frontend/src/routes/login/+page.ts (MODIFY)
- [ ] veligo-platform/frontend/src/routes/(app)/+layout.ts (MODIFY)

## Ralph Status Block
---RALPH_STATUS---
STATUS: COMPLETE
COMPLEXITY: medium
MODEL_TIER: TIER2
WSJF: 7.5
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 18:06:10 CET 2026)
```
<think>
Let me continue exploring the frontend structure to find tenant-related files and the API layer.
</think>

```bash
ls -la veligo-platform/frontend/src/lib/api/
```

=== Action Results ===
bash: OK
total 392
drwxr-xr-x  22 sylvain  staff    704 Jan 12 16:54 .
drwxr-xr-x  20 sylvain  staff    640 Jan  7 09:37 ..
-rw-------   1 sylvain  staff   5666 Dec 27 12:39 README.md
-rw-r--r--   1 sylvain  staff   9853 Jan  2 15:41 admin-grpc.ts
-rw-r--r--   1 sylvain  staff  26083 Jan  2 15:41 admin-service.ts
-rw-r--r--   1 sylvain  staff   6972 Dec 17 22:50 admin.ts
-rw-------   1 sylvain  staff   3493 Dec 27 12:38 auth-helpers.ts
-rw-r--r--   1 sylvain  staff   1091 Dec 27 12:39 auth.ts
-rw-r--r-- 
```

## Last Failure (Wed Jan 14 18:07:08 CET 2026)
```
drwxr-xr-x   3 sylvain  staff 
---
bash: OK
/**
 * Base gRPC-Web client setup using @connectrpc/connect-web
 * 
 * PR-006: Frontend gRPC-Web Client Setup
 * This module provides the base transport and client configuration for gRPC-Web calls.
 */

import { createConnectTransport } from '@connectrpc/connect-web';
import type { Transport } from '@connectrpc/connect';

// gRPC-Web endpoint - routes to tonic-server via nginx proxy
const GRPC_BASE_URL = import.meta.env.VITE_GRPC_URL || 
  (typeof window !== 'undefined' 
    ? `${window.location
---
bash: OK
No tenant gRPC dir
```

## Last Failure (Wed Jan 14 18:11:00 CET 2026)
```
}

message DeleteTenantRequest {
    string id = 1;
}

message DeleteTenantResponse {
    bool success = 1;
}

message ListTenantsRequest {
    int32 page = 1;
    int32 page_size = 2;
    string search = 3;
}

message ListTenantsResponse {
    repeated Tenant tenants = 1;
    int32 total = 2;
 
```
