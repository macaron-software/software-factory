# Task T162: Add FranceConnect authorization endpoint alongside Google OAuth

**Priority**: P0
**Queue**: TDD
**AO Reference**: AO-IDFM-AUTH-3.1.3

## Description
Add FranceConnect authorization endpoint alongside Google OAuth

## File
veligo-platform/backend/src/api/google_oauth.rs

## Success Criteria
- [ ] File created/modified correctly
- [ ] Code compiles
- [ ] Tests pass
- [ ] No regressions

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 8
---END_RALPH_STATUS---

## Last Failure (Tue Jan 13 19:32:13 CET 2026)
```
bash: OK
// Trace: 2025-12-26 - Google OAuth2 API Routes
//
// Endpoints:
// - GET  /api/auth/google/authorize  - Get authorization URL
// - GET  /api/auth/google/callback   - OAuth callback handler

use axum::{
    extract::{Extension, Query},
    http::StatusCode,
    response::{IntoResponse, Redirect},
    routing::get,
    Json, Router,
};
use axum_extra::extract::cookie::{Cookie, PrivateCookieJar};
use rand::RngCore;
use serde::{Deserialize, Serialize};
use sqlx::PgPool;
use utoipa::ToSchema;
use uu
```

## Last Failure (Tue Jan 13 19:32:47 CET 2026)
```
use uu

=== LLM Response ===
<think>
It seems the file content is getting truncated. Let me try a different approach - using a more direct method to read the file.
</think>

```bash
od -c veligo-platform/backend/src/api/google_oauth.rs | head -200
```

=== Action Results ===
bash: OK
0000000    /   /       T   r   a   c   e   :       2   0   2   5   -   1
0000020    2   -   2   6       -       G   o   o   g   l   e       O   A
0000040    u   t   h   2       A   P   I       R   o   u   t   e   s  

0000060    /   /  
   /   /       E   n   d   p   o   i   n   t   s   :
0000100   
   /   /       -       G   E   T           /   a   p   i   /
0000120    a   u   t   h   /   g   o   o   g   l   e   /   a   u   t   h
0000140    o   r   i   z   e           -       G   e   t      
```

## Last Failure (Tue Jan 13 19:33:16 CET 2026)
```
<think>
Let me look at the backend structure now.
</think>

```bash
ls -la veligo-platform/backend/src/api/
```

=== Action Results ===
bash: OK
total 2016
drwxr-xr-x  40 sylvain  staff   1280 Jan 13 18:41 .
drwxr-xr-x  21 sylvain  staff    672 Jan 13 19:32 ..
-rw-r--r--   1 sylvain  staff  21770 Jan 12 17:10 admin.rs
-rw-------   1 sylvain  staff  53508 Jan 12 17:10 admin_api.rs
-rw-------   1 sylvain  staff  29209 Jan 12 17:10 aom_reporting.rs
-rw-r--r--   1 sylvain  staff  47144 Jan 12 17:10 auth.rs
-rw-------   1 sylvain  staff  27200 Jan 12 17:10 bike_api.rs
-rw-------   1 sylvain  staff  15251 Jan 12 17:10 booking_api.rs
-rw-------
```

## Last Failure (Wed Jan 14 08:33:32 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T162.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T162[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:38 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T162.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T162[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x107504590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:45 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T162.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T162[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x10b220590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
