# Task T1240: RÃ©Ã©crire auth.journey.spec.ts - UI only

**Priority**: P1
**Time Estimate**: 2h
**WSJF Score**: 12.0
**Complexity**: medium
**Queue**: TDD

## Description
Le fichier auth.journey.spec.ts mÃ©lange tests UI Playwright et appels REST directs (`request.post('/api/auth/login')`).

Les tests avec `request.post/get` ne testent PAS le vrai flux utilisateur:
- Frontend â†’ gRPC-Web â†’ Backend

Ils testent uniquement REST qui devrait Ãªtre supprimÃ©.

## Success Criteria
- [ ] 0 occurrence de `request.post` dans auth.journey.spec.ts
- [ ] 0 occurrence de `request.get` dans auth.journey.spec.ts
- [ ] Tous les tests utilisent page.locator(), page.click(), page.fill()
- [ ] Tests valident les erreurs gRPC (pas juste "page visible")
- [ ] npm run test:e2e -- --grep "auth" passe

## Actions
1. Identifier tous les `request.post('/api/auth/*')` dans auth.journey.spec.ts
2. Remplacer par interactions UI:
   - request.post('/api/auth/login') â†’ page.fill email, page.fill password, page.click submit
   - request.get('/api/auth/me') â†’ vÃ©rifier user menu visible avec bon nom
3. Ajouter assertions sur erreurs (toast error visible, message correct)
4. Supprimer la section "API Tests" Ã  la fin du fichier
5. ExÃ©cuter les tests et corriger

## Files to Create/Modify
- [ ] veligo-platform/tests/e2e/journeys/auth.journey.spec.ts (MODIFY)

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
MODEL_TIER: TIER1
WSJF: 12.0
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 20:45:18 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1240.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1240[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Read timed out. (read timeout=300)[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 20:50:19 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1240.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1240[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 20:54:24 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1240.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1240[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
