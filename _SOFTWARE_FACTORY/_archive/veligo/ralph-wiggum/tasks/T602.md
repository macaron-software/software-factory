# Task T602: Implémenter BikeService Reservation & Maintenance

**Priority**: P1
**WSJF Score**: 8.5
**Queue**: TDD
**Domain**: api

## Description
Les endpoints de réservation et maintenance retournent UNIMPLEMENTED.

## Erreurs actuelles
```rust
// bike.rs:1147
Err(Status::unimplemented("ReserveBike is not yet implemented - use BookingService.CreateBooking"))
// bike.rs:1156
Err(Status::unimplemented("CancelReservation is not yet implemented - use BookingService.CancelBooking"))
// bike.rs:1165
Err(Status::unimplemented("ScheduleMaintenance is not yet implemented"))
// bike.rs:1174
Err(Status::unimplemented("CompleteMaintenance is not yet implemented"))
// bike.rs:1183
Err(Status::unimplemented("ListMaintenanceRecords is not yet implemented"))
```

## Solution
1. ReserveBike → déléguer à BookingService ou implémenter
2. CancelReservation → déléguer à BookingService ou implémenter
3. ScheduleMaintenance → créer record maintenance
4. CompleteMaintenance → mettre à jour record
5. ListMaintenanceRecords → query maintenance records

## Fichiers à modifier
- `veligo-platform/backend/src/grpc/services/bike.rs`
- `veligo-platform/backend/src/domain/maintenance/` (nouveau?)

## Definition of Done
- [ ] ReserveBike implémenté ou redirigé
- [ ] CancelReservation implémenté ou redirigé
- [ ] ScheduleMaintenance implémenté
- [ ] CompleteMaintenance implémenté
- [ ] ListMaintenanceRecords implémenté
- [ ] Tests E2E maintenance passent

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: high
WSJF: 8.5
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 14:33:51 CET 2026)
```
=== Action Results ===
bash: OK
60:pub struct MaintenanceRecord {

---
bash: OK
        self.updated_at = Utc::now();
        Ok(())
    }

    /// Start maintenance (Cyclonova T1 p14)
    pub fn start_maintenance(&mut self) -> Result<(), String> {
        if self.status == BikeStatus::Rented {
            return Err("Cannot start maintenance on rented bike".to_string());
        }
        if self.status == BikeStatus::Retired {
            return Err("Cannot maintain retired bike".to_string());
        }
        self.status = BikeStatus::Maintenance;
        self.updated_a
```

## Last Failure (Wed Jan 14 14:34:33 CET 2026)
```

    async fn list_maintenance_records(
        &self,
        _request
---
bash: OK
// Trace: 2025-12-12T07:30:00 - Fleet Domain Module
// Reference: Sprint 005 US-102 - Fleet Management
// AO Ref: Cyclonova_T1_p12-15

pub mod bike;
pub mod events;
pub mod fleet;
pub mod repository;

// Re-exports for convenience
pub use bike::{Bike, BikeStatus, BikeType, Location, MaintenanceRecord, MaintenanceType};
pub use events::*;
pub use fleet::{Fleet, FleetHealthStatus, FleetMetrics};
pub use repository::{BikeRepository, FleetRepository, RepositoryError};
```

## Last Failure (Wed Jan 14 14:35:06 CET 2026)
```
</think>

<bash>
sed -n '1170,1290p' veligo-platform/backend/src/grpc/services/bike.rs
</bash>

=== Action Results ===
bash: OK
        &self,
        _request: Request<crate::proto::bike::v1::CompleteMaintenanceRequest>,
    ) -> Result<Response<crate::proto::bike::v1::MaintenanceRecord>, Status> {
        Err(Status::unimplemented(
            "CompleteMaintenance is not yet implemented",
        ))
    }

    async fn list_maintenance_records(
        &self,
        _request: Request<crate::proto::bike::v1::ListMaintenanceRecordsRequest>,
    ) -> Result<Response<crate::proto::bike::v1::ListMaintenanceRecordsResponse>
```
