# Task T312: Implement /reports page

**Priority**: P1
**Queue**: TDD
**Type**: implementation

## File
veligo-platform/frontend/src/routes/(admin)/reports/+page.svelte

## Description
Implement reports page with report generation, listing, download via gRPC ReportService

## Success Criteria
- [ ] Implementation complete
- [ ] cargo check passes (or npm run build for frontend)
- [ ] Unit/integration tests added
- [ ] No new warnings
- [ ] Works with gRPC calls (frontend) or database queries (backend)

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 10
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 10:02:37 CET 2026)
```

Let me also check if there's a lib or services folder for the frontend that handles API/gRPC calls.
</think>

Let me look at the lib folder to find how API calls are made:
<bash>
ls -la veligo-platform/frontend/src/lib/</bash>

=== Action Results ===
bash: OK
total 24
drwxr-xr-x  20 sylvain  staff   640 Jan  7 09:37 .
drwxr-xr-x   9 sylvain  staff   288 Jan  5 10:17 ..
drwx------   3 sylvain  staff    96 Dec 26 13:48 accessibility
drwxr-xr-x  22 sylvain  staff   704 Jan 12 16:54 api
drwxr-xr-x   5 sylvain  staff   160 Dec 26 15:43 auth
drwxr-xr-x   7 sylvain  staff   224 Jan 12 19:11 chaos
drwxr-xr-x  29 sylvain  staff   928 Jan 13 19:33 components
drwx------   3 sylvain  staff    96 Jan  5 12:59 config
drwxr-xr-x   9 sylvain  staff   288 Jan  5 10:5
```

## Last Failure (Wed Jan 14 10:03:10 CET 2026)
```
google
module
report
rgpd
station
station.ts
subscription
user
veligo.ts

---
bash: OK
import { GrpcWebFetchTransport } from '@protobuf-ts/grpcweb-transport';
import type { UnaryCall } from '@protobuf-ts/runtime-rpc';
import { AuthServiceClient } from './grpc/auth/v1/auth.client';
import { ModuleServiceClient } from './grpc/module/v1/module.client';
import { SubscriptionServiceClient } from './grpc/subscription/v1/subscription.client';
import { StationServiceClient } from './grpc/station/v1/station.client';
import { BookingServiceClient } from './grpc/booking/v1/booking.client';
i
```

## Last Failure (Wed Jan 14 10:03:16 CET 2026)
```
bash: OK
     210 veligo-platform/proto/report/v1/report.proto

---
bash: OK
syntax = "proto3";

package veligo.report.v1;

import "google/protobuf/timestamp.proto";

// Report Service for AOM/Admin dashboards
service ReportService {
  // Dashboard Stats
  rpc GetDashboardStats(GetDashboardStatsRequest) returns (GetDashboardStatsResponse);

  // Report Generation
  rpc GenerateReport(GenerateReportRequest) returns (GenerateReportResponse);
  rpc GetReportStatus(GetReportStatusRequest) returns (GetReportStatusResponse);
  rpc ListReports(ListReportsRequest) returns (ListR
```

## Last Failure (Wed Jan 14 10:03:48 CET 2026)
```
  interface Report {
    id: string;
    name: string;
    type: ReportType;
    tenant_id: string;
    tenant_name: string;
    period: { start: string; end: string };
    created_at: string;
    status: 'pending' | 'generating' | 'ready' | 'error';
    download_url?: string;
  }

  interface Tenant {
    id: string;
    name: string;
    code: string;
  }

  interface Schedule {
    id: str
```

## Last Failure (Wed Jan 14 10:04:05 CET 2026)
```
  rpc ListReports(ListReportsRequest) returns (ListR
---
bash: OK
veligo-platform/proto/report/v1/report.proto

---
bash: OK
<script lang="ts">
  /**
   * Admin Layout - SECURE AUTHENTICATION GUARD
   *
   * SECURITY FIX (2025-01-01):
   * - Validates JWT from authStore (not just localStorage token presence)
   * - Verifies user has admin role for their tenant
   * - Restricts navigation based on role (owner vs tenant_admin)
   */
  import { page } from '$app/stores';
  import { onMount } from 'svelte';
  import { goto } from '$app/navigation';
  import { authStore, getCurrentUser, hasRole, hasAnyRole, isAuthenticated
```

## Last Failure (Wed Jan 14 10:04:17 CET 2026)
```

=== LLM Response ===
<think>
Let me try with bash to read the files.
</think>

```bash
cat veligo-platform/frontend/src/lib/grpc-client.ts
```

=== Action Results ===
bash: OK
import { GrpcWebFetchTransport } from '@protobuf-ts/grpcweb-transport';
import type { UnaryCall } from '@protobuf-ts/runtime-rpc';
import { AuthServiceClient } from './grpc/auth/v1/auth.client';
import { ModuleServiceClient } from './grpc/module/v1/module.client';
import { SubscriptionServiceClient } from './grpc/subscription/v1/subscription.client';
import { StationServiceClient } from './grpc/station/v1/station.client';
import { BookingServiceClient } from './grpc/booking/v1/booking.client';
i
```

## Last Failure (Wed Jan 14 10:04:46 CET 2026)
```
// Report Service for AOM/Admin dashboards
service ReportService {
  // Dashboard Stats
  rpc GetDashboardStats(GetDashboardStatsRequest) returns (GetDashboardStatsResponse);

  // Report Generation
  rpc GenerateReport(GenerateReportRequest) returns (GenerateReportResponse);
  rpc GetReportStatus(GetReportStatusRequest) returns (GetReportStatusResponse);
  rpc ListReports(ListReportsRequest) returns (ListR
---
bash: OK
// @generated by protobuf-ts 2.11.1 with parameter client_generic
// @generated from protobuf file "report/v1/report.proto" (package "veligo.report.v1", syntax proto3)
// tslint:disable
import { ServiceType } from "@protobuf-ts/runtime-rpc";
import type { BinaryWriteOptions } from "@protobuf-ts/runtime";
import type { IBinaryWriter } from "@protobuf-ts/runtime";
import { WireType } from "@protobuf-ts/runtime";
import type { BinaryReadOptions } from "@protobuf-ts/runtime";
import type { IBinaryRe
```

## Last Failure (Wed Jan 14 10:05:21 CET 2026)
```
  let generating = false;
  let showScheduleModal = false;
  let showEmailModal = false;

  // Filters
  let selectedTenant = 'all';
  let selectedType: ReportType | 'all' = 'all';
  let periodStart = '';
  let periodEnd = '';

  // New report form
  let newReportType: ReportType = 'kpi_aom';
  let newReportTenant = '';
  let newReportPeriodStart = '';
  let newReportPeriodEnd = '';

  // Schedule form
  let scheduleReportType: ReportType = 'kpi_aom';
  let scheduleTenant = '';
  let scheduleFre
```

## Last Failure (Wed Jan 14 10:05:53 CET 2026)
```


=== LLM Response ===
<think>
Now I have all the information I need. Let me check the grpc-client.ts to see the full imports and understand how to add ReportServiceClient:
</think>

<bash>
cat veligo-platform/frontend/src/lib/grpc-client.ts</bash>

=== Action Results ===
bash: OK
import { GrpcWebFetchTransport } from '@protobuf-ts/grpcweb-transport';
import type { UnaryCall } from '@protobuf-ts/runtime-rpc';
import { AuthServiceClient } from './grpc/auth/v1/auth.client';
import { ModuleServiceClient } from './grpc/module/v1/module.client';
import { SubscriptionServiceClient } from './grpc/subscription/v1/subscription.client';
import { StationServiceClient } from './grpc/station/v1/station.client';
import { BookingServiceClient } from './grpc/booking/v1/booking.client';
i
```
