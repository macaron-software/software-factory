# Task T125: Retry failed task: Add missing data-testid: +page.svelte

**Priority**: P0
**Queue**: TDD
**AO_REF**: AO-IDFM-AUTH-3.1.3

## Description
Retry failed task: Add missing data-testid: +page.svelte

## File
veligo-platform/frontend/src/routes/auth/franceconnect/callback/+page.svelte

## Success Criteria
- [ ] Issue resolved
- [ ] Tests pass
- [ ] No regressions

## Ralph Status Block
---RALPH_STATUS---
STATUS: COMPLETED
COMPLEXITY: medium
WSJF: 10
---END_RALPH_STATUS---

## Last Failure (Tue Jan 13 18:52:08 CET 2026)
```
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 14px;
    max-width: 100%;
    word-break: break-word;
  }

  .retry-button {
    display: inline-block;
    margin-top: 8px;
    padding: 12px 24px;
    background: #0055a4;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
    transition: background 0.2s;
  }

  .retry-bu
```

## Last Failure (Tue Jan 13 18:52:46 CET 2026)
```
cat veligo-platform/frontend/src/routes/auth/franceconnect/callback/+page.svelte 2>&1
```

=== Action Results ===
bash: OK
<script lang="ts">
  import { page } from '$app/stores';
  import { onMount } from 'svelte';
  import { handleCallback } from '$lib/auth/franceconnect';

  let status: 'loading' | 'success' | 'error' = 'loading';
  let errorMessage = '';

  onMount(async () => {
    // Get code and state from URL query parameters
    const params = new URLSearchParams(window.location.search);
    const code = params.get('code');
    const state = params.get('state');
    const error = params.get('error');
    co
```

## Last Failure (Tue Jan 13 18:53:14 CET 2026)
```
        <h2>Connexion r√©ussie</h2>

=== LLM Response ===
<edit file="veligo-platform/frontend/src/routes/auth/franceconnect/callback/+page.svelte" old="<div class=\"callback-container\">
  <div class=\"callback-card\">
    {#if status === 'loading'}
      <div class=\"loading\">
        <div class=\"spinner\"></div>
        <p>Connexion en cours via FranceConnect...</p>
      </div>
    {:else if status === 'success'}
      <div class=\"success\">" new="<div class=\"callback-container\" data-testid=\"fc-callback-container\">
  <div class=\"callback-card\" data-testid=\"fc-callback-card\">
    {#if status === 'loading'}
      <div class=\"loading\" data-testid=\"fc-callback-loading\">
        <div class=\"spinner\"></div>
        <p>Connexion en cours via FranceConnect...</p>
      </div>
    {:else if status === 'success'}
      <div class=\"success\" data-testid=\"fc-callback-success\">"/>
```

## Last Failure (Tue Jan 13 18:53:16 CET 2026)
```
bash: OK
    } catch (err) {
      status = 'error';
      errorMessage = err instanceof Error ? err.message : 'Erreur lors de la connexion';
    }
  });
</script>

<svelte:head>
  <title>Connexion FranceConnect - {$page.data.tenant?.name || 'Veligo'}</title>
</svelte:head>

<div class="callback-container">
  <div class="callback-card">
    {#if status === 'loading'}
      <div class="loading">
        <div class="spinner"></div>
        <p>Connexion en cours via FranceConnect...</p>
      </div>
    {:e
```

## Last Failure (Tue Jan 13 18:55:12 CET 2026)
```
      status = 'error';
      errorMessage = err instanceof Error ? err.message : 'Erreur lors de la connexion';
    }
  });
</script>

<svelte:head>
  <title>Connexion FranceConnect - {$page.data.tenant?.name || 'Veligo'}</title>
</svelte:head>

<div class="callback-container" data-testid="fc-callback-container">
  <div class="callback-card" data-testid="fc-callback-card">
    {#if status === 'loading'}
      <div class="loading" data-testid="fc-callback-loading">
        <div class="spinner"></div>
        <p>Connexion en cours via FranceConnect...</p>
      </div>
    {:else if status === 'success'}
      <div class="success" data-testid="fc-callback-success">
        <div clas
```

## Last Failure (Tue Jan 13 18:59:35 CET 2026)
```
```xml
<edit file="veligo-platform/frontend/src/routes/auth/franceconnect/callback/+page.svelte" old="    {:else if status === 'error'}
      <div class=&quot;error&quot;>
        &lt;h2&gt;Erreur de connexion&lt;/h2&gt;" new="    {:else if status === 'error'}
      &lt;div class=&quot;error&quot; data-testid=&quot;fc-callback-error&quot;&gt;
        &lt;h2&gt;Erreur de connexion&lt;/h2&gt;"/>
```

=== LLM Response ===
<think>
The user is frustrated because I'm not making the actual edit. I need to provide a concrete action using the <edit> or <bash> tag format. Let me do it properly now.
</think>

```xml
<edit file="veligo-platform/frontend/src/routes/auth/franceconnect/callback/+page.svelte" old="    {:else if status === 'error'}
      <div class=&quot;error&quot;>
        &lt;h2&gt;Erreur de connexion&lt;/h2&gt;" new="    {:else if status === 'error'}
      &lt;div class=&quot;error&quot; data-testid=&quot;fc-callback-error&quot;&gt;
        &lt;h2&gt;Erreur de connexion&lt;/h2&gt;"/>
```
```
