# Task T147: Add selector login-submit

**Priority**: P1
**Queue**: TDD
**AO_REF**: 

## Description
Add missing data-testid="login-submit" to LoginWidget

## File to Modify
veligo-platform/frontend/src/lib/components/LoginWidget.svelte

## Change Required
Find the appropriate element and add:
```svelte
data-testid="login-submit"
```

## Example
```svelte
<button
  type="submit"
  class="btn-primary"
  data-testid="login-submit"
>
  Submit
</button>
```

## Success Criteria
- [ ] Selector added to correct element
- [ ] Component still renders correctly
- [ ] E2E tests can find the selector

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: simple
WSJF: 7
---END_RALPH_STATUS---

## Last Failure (Tue Jan 13 19:00:11 CET 2026)
```
      type="submit"
      class="submit-btn"
      disabled={loading}
      aria-busy={loading}
      data-testid="submit-login"
    >
      {#if loading}


=== LLM Response ===
<think>
Now I can see the exact content. Let me try the edit again with the exact old code.
</think>

<edit file="veligo-platform/frontend/src/lib/components/LoginWidget.svelte" old="      data-testid=&quot;submit-login&quot;" new="      data-testid=&quot;login-submit&quot;"/>
</edit>

=== Action Results ===
edit: FAIL
Edit failed
```

## Last Failure (Tue Jan 13 19:00:40 CET 2026)
```
    &gt;"/>
</edit>

=== Action Results ===
edit: FAIL
Edit failed

=== LLM Response ===
<think>
The edit is failing. Let me try a different approach - perhaps the escaping is causing issues. Let me use bash to do a sed replacement instead.
</think>

Let me try using sed to make the change:
```bash
sed -i 's/data-testid="submit-login"/data-testid="login-submit"/g' veligo-platform/frontend/src/lib/components/LoginWidget.svelte
```

=== Action Results ===
bash: FAIL
sed: 1: "veligo-platform/fronten ...": invalid command code v
```

## Last Failure (Tue Jan 13 19:01:07 CET 2026)
```
</think>

```bash
grep -n "data-testid.*login" veligo-platform/frontend/src/lib/components/LoginWidget.svelte | grep -E "(submit|login-submit)"
```

=== Action Results ===
bash: OK
324:  <form on:submit|preventDefault={handleEmailLogin} data-testid="login-form" aria-label="Connexion par email">
390:      data-testid="login-submit"


=== LLM Response ===
<think>
The change was applied successfully. Now let me verify the full button element to make sure it's correct.
</think>

```bash
sed -n '384,400p' veligo-platform/frontend/src/lib/components/LoginWidget.svelte
```
```

## Last Failure (Wed Jan 14 08:33:32 CET 2026)
```

> veligo-platform@2.0.0 test
> playwright test

Error: Requiring @playwright/test second time, 
First:
Error: 

   at ../../playwright.config.ts:1

> 1 | import { defineConfig, devices } from '@playwright/test';
    | ^
  2 |
  3 | /**
  4 |  * Playwright E2E Configuration for Veligo Platform
    at Object.<anonymous> (/Users/sylvain/_LAPOSTE/_VELIGO2/node_modules/playwright/lib/index.js:61:33)
    at Module._compile (node:internal/modules/cjs/loader:1521:14)
    at Object.Module._extensions..j

ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:38 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T147.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T147[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x1093fc590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:45 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T147.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T147[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x106adc590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:36:08 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T147.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T147[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:36:09 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T147.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T147[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:36:13 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T147.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T147[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:36:14 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T147.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T147[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:36:18 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T147.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T147[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:36:19 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T147.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T147[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
