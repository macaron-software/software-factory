# Task D020: Impl√©menter WorkflowRepository pour persistance CRUD

**Priority**: P1
**Time Estimate**: 6h
**WSJF Score**: 8.5
**Complexity**: medium
**Queue**: BACKEND

## Description
Remplacer les TODO dans workflow_routes.rs par une vraie persistance PostgreSQL. Cr√©er WorkflowRepository avec CRUD complet.

## Success Criteria
- [ ] POST /api/workflows cr√©e un workflow en DB
- [ ] GET /api/workflows liste tous les workflows
- [ ] GET /api/workflows/{id} retourne le workflow
- [ ] PUT /api/workflows/{id} met √† jour
- [ ] DELETE /api/workflows/{id} supprime
- [ ] Tests d'int√©gration passent

## Actions
1. Cr√©er table workflows dans PostgreSQL
2. Cr√©er WorkflowRepository avec CRUD methods
3. Impl√©menter execute_workflow avec persistance
4. Remplacer TODO dans workflow_routes.rs par vrai code
5. Cr√©er tests d'int√©gration

## Files to Create/Modify
- [ ] veligo-platform/backend/migrations/*_create_workflows.sql (CREATE)
- [ ] veligo-platform/backend/src/infrastructure/database/repositories/workflow_repository.rs (CREATE)
- [ ] veligo-platform/tenant/backend-api/src/infrastructure/http/workflow_routes.rs (MODIFY)

## Ralph Status Block
---RALPH_STATUS---
STATUS: COMPLETE
COMPLEXITY: medium
MODEL_TIER: TIER2
WSJF: 8.5
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 17:42:13 CET 2026)
```
============================================================
=== LLM Response ===
<analyze_task>
This task involves implementing a full CRUD workflow repository with PostgreSQL persistence, replacing TODOs in workflow_routes.rs. Let's analyze:

1. **Scope**: 
   - Create a database migration for workflows table
   - Implement WorkflowRepository with full CRUD operations
   - Replace TODOs in workflow_routes.rs with real persistence logic
   - Write integration tests

2. **Files involved**:
   - 1 migration file (`migrations/*_create_workflows.sql`)
   - 1 repository file (`src/infrastructure/database/repositories/workflow_repository.rs`)
   - 1 route file (`src/infrastructure/http/workflow_routes.rs`)
   - 1 integration test file (likely `tests/integration/workflow_tests.rs`)

3. **Complexity**: ~350 LOC across 4

ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 17:42:18 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/D020.md[0m
[0;34m[AGENT] Queue: deploy[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: D020[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 17:42:23 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/D020.md[0m
[0;34m[AGENT] Queue: deploy[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: D020[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
