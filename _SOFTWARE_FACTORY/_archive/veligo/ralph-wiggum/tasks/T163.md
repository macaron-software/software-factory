# Task T163: Create FranceConnect login button with data-testid='franceconnect-login'

**Priority**: P0
**Queue**: TDD
**AO Reference**: AO-IDFM-AUTH-3.1.3

## Description
Create FranceConnect login button with data-testid='franceconnect-login'

## File
veligo-platform/frontend/src/lib/components/FranceConnectButton.svelte

## Success Criteria
- [ ] File created/modified correctly
- [ ] Code compiles
- [ ] Tests pass
- [ ] No regressions

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 8
---END_RALPH_STATUS---

## Last Failure (Tue Jan 13 19:32:34 CET 2026)
```
---
bash: OK
<script lang="ts">
  /**
   * Icon Component - Lucide Icons (Feather Icons fork)
   * RGAA AA: Supports aria-label and aria-hidden for accessibility
   * Usage: <Icon name="bike" size={24} label="VÃ©lo" />
   * Usage (decorative): <Icon name="bike" size={24} />
   */

  import * as icons from 'lucide-svelte';

  interface Props {
    name: string;
    size?: number;
    color?: string;
    strokeWidth?: number;
    className?: string;
    class?: string;
    /** Aria label for screen readers. If 
```

## Last Failure (Tue Jan 13 19:33:08 CET 2026)
```
Now I understand the task. The `FranceConnectButton.svelte` component needs to be created as a standalone reusable component. Let me see the full FranceConnect button in the LoginWidget to extract the SVG and styling:

```bash
sed -n '260,310p' veligo-platform/frontend/src/lib/components/LoginWidget.svelte
```

=== Action Results ===
bash: OK
  {#if showAnySso}
    <div class="sso-section" role="group" aria-label="Connexion avec un compte externe">
      {#if showFranceConnect}
        <button
          type="button"
          class="sso-btn franceconnect"
          on:click={() => handleSSOLogin('franceconnect')}
          aria-label="S'identifier avec FranceConnect"
          data-testid="franceconnect-login"
        >
          <!-- FranceConnect SVG Icon -->
          <svg class="sso-icon" viewBox="0 0 40 40" aria-hidden="true" f
```

## Last Failure (Tue Jan 13 19:34:37 CET 2026)
```
Let me first check the current state more thoroughly.
</think>

Let me check the full state of the file and make the proper fixes:
<bash>
sed -n '265,285p' veligo-platform/frontend/src/lib/components/LoginWidget.svelte
</bash>

=== Action Results ===
bash: OK
          class="sso-btn franceconnect"
          on:click={() => handleSSOLogin('franceconnect')}
          aria-label="S'identifier avec FranceConnect"
          data-testid="franceconnect-login"
        >
          <!-- FranceConnect SVG Icon -->
          <svg class="sso-icon" viewBox="0 0 40 40" aria-hidden="true" focusable="false">
            <rect x="0" y="0" width="40" height="13.33" fill="#000091"/>
            <rect x="0" y="13.33" width="40" height="13.34" fill="#FFFFFF"/>
          
```

## Last Failure (Wed Jan 14 08:33:32 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T163.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T163[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:38 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T163.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T163[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x106704590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:45 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T163.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T163[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x107330590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
