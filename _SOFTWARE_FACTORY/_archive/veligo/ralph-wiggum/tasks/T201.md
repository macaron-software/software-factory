# Task T201: Implement UpdateBike gRPC method

**Priority**: P0
**Queue**: TDD
**Type**: implementation

## File
veligo-platform/backend/src/grpc/services/bike.rs

## Description
Implement UpdateBike to update bike attributes (code, station_id, model, brand, battery_level)

## Success Criteria
- [ ] Implementation complete
- [ ] cargo check passes
- [ ] Unit tests added
- [ ] No new warnings

## Ralph Status Block
---RALPH_STATUS---
STATUS: COMPLETED
COMPLEXITY: medium
WSJF: 12
---END_RALPH_STATUS---

## Last Failure (Tue Jan 13 23:48:39 CET 2026)
```
sed -n '1115,1189p' veligo-platform/backend/src/grpc/services/bike.rs
```

=== Action Results ===
bash: OK
    async fn create_bike(
        &self,
        _request: Request<crate::proto::bike::v1::CreateBikeRequest>,
    ) -> Result<Response<ProtoBike>, Status> {
        Err(Status::unimplemented("CreateBike is not yet implemented"))
    }

    async fn update_bike(
        &self,
        _request: Request<crate::proto::bike::v1::UpdateBikeRequest>,
    ) -> Result<Response<ProtoBike>, Status> {
        Err(Status::unimplemented("UpdateBike is not yet implemented"))
    }

    async fn delete_bike(
```

## Last Failure (Tue Jan 13 23:49:12 CET 2026)
```

=== LLM Response ===
<think>
The output is getting cut off. Let me try a different approach to see the full file.
</think>

```bash
cat veligo-platform/backend/src/grpc/services/bike.rs > /tmp/bike_full.rs && wc -l /tmp/bike_full.rs && tail -200 /tmp/bike_full.rs
```

=== Action Results ===
bash: OK
    1189 /tmp/bike_full.rs
                if let Some(ref tenant_id) = req.tenant_id {
                    let tenant_uuid = self.resolve_tenant_id(tenant_id).await?;
                    let bike_tenant_id: Uuid = row
                        .try_get("tenant_id")
                        .map_err(|e| Status::internal(format!("Failed to get tenant_id: {}", e)))?;
                    if bike_tenant_id != tenant_uuid {
                        return Err(Status::not_found(format!("Bike {} not found"
```

## Last Failure (Tue Jan 13 23:50:27 CET 2026)
```
<think>
Now I need to look at the proto definitions to understand the structure of the UpdateBikeRequest and also look at how other methods are implemented to understand the pattern. Let me check the proto file and also look at the create_bike or other methods for the pattern.
</think>

<bash>
find veligo-platform -name "*.proto" -type f 2>/dev/null | head -10
</bash>

=== Action Results ===
bash: OK
veligo-platform/frontend/node_modules/@protobuf-ts/plugin/protobuf-ts.proto
veligo-platform/proto/tenant/v1/tenant.proto
veligo-platform/proto/auth/v1/auth.proto
veligo-platform/proto/booking/v1/booking.proto
veligo-platform/proto/payment/v1/payment.proto
veligo-platform/proto/bike/v1/bike.proto
veligo-platform/proto/module/v1/module.proto
veligo-platform/proto/user/v1/user.proto
veligo-platform/proto/subscription/v1/subscription.proto
veligo-platform/proto/veligo/v1/bike.proto
```
