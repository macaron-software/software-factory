# Task T1238: Fix subscription.rs - utiliser resolve_tenant_id()

**Priority**: P0
**Time Estimate**: 30m
**WSJF Score**: 15.0
**Complexity**: simple
**Queue**: TDD

## Description
BUG PRODUCTION CRITIQUE: `subscription.rs` ligne 56 utilise `Uuid::parse_str(&req.tenant_id)` directement au lieu de `resolve_tenant_id()` comme les autres services (bike.rs, station.rs, booking_service.rs).

Cela cause l'erreur: `Invalid tenant_id: invalid length: expected length 32 for simple format, found 0`

Le frontend envoie des slugs ("idfm", "nantes") mais le backend attend des UUIDs.

## Success Criteria
- [ ] subscription.rs utilise resolve_tenant_id() comme bike.rs
- [ ] Accepte les slugs ("idfm") ET les UUIDs
- [ ] cargo test passe
- [ ] Plus d'erreur "Invalid tenant_id" en production

## Actions
1. Ouvrir veligo-platform/backend/src/grpc/services/subscription.rs
2. Ajouter la fonction resolve_tenant_id() (copier de bike.rs)
3. Remplacer ligne 56: `Uuid::parse_str(&req.tenant_id)` par `self.resolve_tenant_id(&req.tenant_id).await?`
4. Faire de mÃªme pour toutes les autres occurrences de Uuid::parse_str dans ce fichier
5. cargo test --package veligo-platform

## Files to Create/Modify
- [ ] veligo-platform/backend/src/grpc/services/subscription.rs (MODIFY)

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: simple
MODEL_TIER: TIER1
WSJF: 15.0
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 20:45:18 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1238.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1238[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Read timed out. (read timeout=300)[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 20:50:19 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1238.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1238[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 20:54:24 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1238.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1238[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
