# Task T008: R√©soudre les 5 tests skipp√©s Nantes Box S√©curis√©s (AO Nantes)

**Priority**: P1
**Time Estimate**: 3.0h
**WSJF Score**: 8.0
**Complexity**: complex
**Queue**: TDD

## Description
AO Nantes exige box s√©curis√©s avec QR unlock. 5 tests skipp√©s.

## Success Criteria
- [ ] QR unlock flow fonctionnel
- [ ] Box reservation test√©e
- [ ] 5 tests passent

## Actions
1. Impl√©menter QR code generation (qrcode crate d√©j√† en deps)
2. Cr√©er unlock endpoint
3. Int√©grer avec station slots
4. Activer tests

## Files to Create/Modify
- [ ] tests/e2e/ao-compliance/nantes/box-securises.spec.ts (MODIFY)

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: complex
MODEL_TIER: TIER2
WSJF: 8.0
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 08:33:13 CET 2026)
```
   - Run E2E tests to verify functionality

Let's start by examining the test file.

```bash
ls -la tests/e2e/ao-compliance/nantes/box-securises.spec.ts
```

<edit file="tests/e2e/ao-compliance/nantes/box-securises.spec.ts" old="test.skip('should generate QR code for box unlock', async ({ page }) =&gt; { ... });" new="test('should generate QR code for box unlock', async ({ page }) =&gt; { ... });">
</edit>
<edit file="tests/e2e/ao-compliance/nantes/box-securises.spec.ts" old="test.skip('should unlock box with valid QR code', async ({ page }) =&gt; { ... });" new="test('should unlock box with valid QR code', async ({ page }) =&gt; { ... });">
</edit>
<edit file="tests/e2e/ao-compliance/nantes/box-securises.spec.ts" old="test.skip('should reject invalid QR code', async ({ page

=== Action Results ===
bash: OK
-rw-r--r--  1 sylvain  staff  8521 Jan 13 18:37 tests/e2e/ao-compliance/nantes/box-securises.spec.ts


ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:32 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T008.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T008[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 08:33:39 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T008.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: local[0m
[0;32m[AGENT] Starting task: T008[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Max retries exceeded with url: /v1/chat/completions (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x108ea8590>: Failed to establish a new connection: [Errno 61] Connection refused'))[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
