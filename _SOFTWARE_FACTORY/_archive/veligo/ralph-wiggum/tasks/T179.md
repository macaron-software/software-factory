# Task T179: Fix compilation error in report_routes.rs

**Priority**: P0
**Queue**: TDD
**Type**: compilation_fix

## Error
Cannot find value aom_name in scope

## File
veligo-platform/backend/src/services/reporting/report_routes.rs:312

## Fix Required
Define aom_name variable or pass it as parameter

## Success Criteria
- [ ] Error fixed
- [ ] cargo check passes for this file
- [ ] No new errors introduced

## Ralph Status Block
---RALPH_STATUS---
STATUS: COMPLETED
COMPLEXITY: simple
WSJF: 10
---END_RALPH_STATUS---

## Last Failure (Tue Jan 13 22:32:52 CET 2026)
```
cat -n veligo-platform/backend/src/services/reporting/report_routes.rs | sed -n '53,100p'
</bash>

=== Action Results ===
bash: OK
    53	#[derive(Debug, Deserialize, IntoParams)]
    54	pub struct ReportQueryParams {
    55	    /// Export format (pdf, excel, csv, json)
    56	    #[serde(default = "default_format")]
    57	    pub format: String,
    58	
    59	    /// Start date (YYYY-MM-DD)
    60	    pub start_date: Option<String>,
    61	
    62	    /// End date (YYYY-MM-DD)
    63	    pub end_date: Option<String>,
    64	
    65	    /// Year for monthly/quarterly/annual reports
    66	    pub year: Option<i32>,
    67
```

## Last Failure (Tue Jan 13 22:33:55 CET 2026)
```
</think>

<bash>
cat -n veligo-platform/backend/src/services/reporting/report_routes.rs | sed -n '350,400p'
</bash>

=== Action Results ===
bash: OK
   350	/// Get report metadata only (without generating full report)
   351	#[utoipa::path(
   352	    get,
   353	    path = "/api/admin/reports/{report_type}/info",
   354	    params(
   355	        ("report_type" = String, Path, description = "Report type"),
   356	        ReportQueryParams,
   357	    ),
   358	    responses(
   359	        (status = 200, description = "Report metadata", body = ReportMetadata),
   360	        (status = 400, description = "Invalid parameters"),
   361	       
```

## Last Failure (Tue Jan 13 22:35:25 CET 2026)
```

    // SECURITY: tenant_id extracted from authenticated user's JWT token
    // For admin reports, require admin role and use tenant_id from AuthContext
    // Only super_admins can override tenant_id via params.tenant_id
    let tenant_id = if let Some(override_id) = params.tenant_id {
        override_id
    } else {
        auth.tenant_id_or_default()
    };

    // Fetch tenant name for report
    let aom_name: String = sqlx::query_scalar::<_, String>(r#"SELECT name FROM tenants WHERE id = $1"#)
        .bind(tenant_id)
        .fetch_optional(&state.pool)
        .await
        .map_err(|e| ReportError::DatabaseError(e.to_string()))?
        .unwrap_or_else(|| "Veligo".to_string());

    // Build query"/>
</edit>
```
