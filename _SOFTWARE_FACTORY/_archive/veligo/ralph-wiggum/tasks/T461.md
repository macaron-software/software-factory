# Task T461: Correspondance transport Naolib

**Priority**: P2
**WSJF Score**: 7.2
**Queue**: TDD
**Category**: AO_COMPLIANCE
**Original ID**: AO-NANTES-003
**Phase**: ðŸŽ¯ PHASE 2: COMPLIANCE AO (Priority P1)
**Section**: 2.2 Nantes - PayNum

## Description
Correspondance transport Naolib

## Test File
`ao/nantes-naolib.spec.ts`

## Estimated Files
4 fichier(s) Ã  modifier

## Success Criteria
- [ ] Test E2E crÃ©Ã©/modifiÃ©: `ao/nantes-naolib.spec.ts`
- [ ] Test passe en local
- [ ] Pas de test.skip() sans condition
- [ ] Code review adversarial passÃ©
- [ ] Pas de stubs ou TODOs

## Definition of Done (DoD)
- [ ] Feature complÃ¨tement implÃ©mentÃ©e
- [ ] Tests E2E verts
- [ ] ConformitÃ© AO vÃ©rifiÃ©e (si applicable)
- [ ] Documentation mise Ã  jour

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 7.2
CATEGORY: AO_COMPLIANCE
ORIGINAL_ID: AO-NANTES-003
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 14:03:34 CET 2026)
```
bash: OK
import { test, expect } from '@playwright/test';

test.describe('AO-IDFM-001: Authentification FranceConnect v2', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/login');
  });

  test('DEV-001: Bouton FranceConnect sur page login', async ({ page }) => {
    await expect(page.locator('[data-testid="franceconnect-btn"]')).toBeVisible();
  });

  test('DEV-002: Redirect vers FranceConnect', async ({ page }) => {
    await page.click('[data-testid="franceconnect-btn"]');
    

---
bash: OK
./veligo-platform/frontend/src/lib/components/nantes/NantesFooter.svelte
./veligo-platform/frontend/src/lib/components/nantes/NantesHeader.svelte
```

## Last Failure (Wed Jan 14 14:05:39 CET 2026)
```
```bash
cat ./tenant/frontend-admin/src/routes/store/+page.svelte | head -100
```

=== Action Results ===
bash: OK
<script lang="ts">
  import { onMount } from 'svelte';
  
  let viewMode: 'cards' | 'list' | 'compact' = 'cards';
  let searchQuery = '';
  let activeTab: 'modules' | 'templates' = 'modules';
  
  // Mock data - Ã  remplacer par API calls
  const modules = [
    {
      id: 'subscription',
      name: 'Subscription Management',
      description: 'Gestion complÃ¨te des abonnements multi-tier (Mensuel, Annuel, Ponctuel)',
      userStory: 'US-042: En tant que User, je veux souscrire Ã  un abonnement
```

## Last Failure (Wed Jan 14 14:09:02 CET 2026)
```
  import { onMount } from 'svelte';
  import { getModuleHooks } from '$lib/modules/ModuleHookConfig';

  let modules: any[] = [];
  let loading = true;

  onMount(async () => {
    try {
      const response = await fetch('/api/tenants/nantes/modules');
      if (response.ok) {
        modules = await response.json();
        modules = modules.map(module => ({
          ...module,
          hookConfig: getModuleHooks(module.slug)
        }));
      }
    } catch (error) {
    
---
bash: OK
```

## Last Failure (Wed Jan 14 14:11:48 CET 2026)
```
bash: OK
total 272
drwxr-xr-x  15 sylvain  staff    480 Jan  7 09:37 .
drwxr-xr-x  29 sylvain  staff    928 Jan 13 19:33 ..
-rw-r--r--   1 sylvain  staff  13503 Jan  7 09:37 BikeSwiper.svelte
-rw-r--r--   1 sylvain  staff   8999 Jan  7 09:37 CO2Bubble.svelte
-rw-r--r--   1 sylvain  staff  11034 Jan  7 09:37 EcoBadge3D.svelte
-rw-r--r--   1 sylvain  staff  11370 Jan  7 09:37 LeaderboardRow.svelte
-rw-r--r--   1 sylvain  staff   7256 Jan  7 09:37 NantesBikeCard.svelte
-rw-r--r--   1 sylvain  staff   4380 J
---
bash: OK
./tenant/frontend-user/src/routes/nantes/+page.svelte
./tools/ralph-wiggum/tasks/tests/ao/nantes-paynum.spec.ts
./veligo-platform/frontend/src/lib/components/nantes/NantesMap.svelte
./veligo-platform/frontend/src/lib/components/nantes/LeaderboardRow.svelte
./veligo-platform/frontend/src/lib/components/nantes/NantesFooter.svelte
./veligo-platform/frontend/src/lib/components/nantes/NantesBikeCard.svelte
./veligo-platform/frontend/src/lib/components/nantes/BikeSwiper.svelte
./veligo-platform/fronte
```

## Last Failure (Wed Jan 14 14:12:33 CET 2026)
```
head -100 tools/ralph-wiggum/tasks/tests/ao/nantes-paynum.spec.ts
```

=== Action Results ===
bash: OK
import { test, expect } from '@playwright/test';

test.describe('AO-NANTES-001: Paiement PayNum wallet', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/payment');
  });

  test('DEV-001: Option PayNum dans moyens de paiement', async ({ page }) => {
    await expect(page.locator('[data-testid="paynum-option"]')).toBeVisible();
  });

  test('DEV-002: Redirect vers wallet PayNum', async ({ page }) => {
    await page.click('[data-testid="paynum-option"]');
    
    await exp
```

## Last Failure (Wed Jan 14 14:15:37 CET 2026)
```
echo "=== Tenant routes structure ==="
find tenant/frontend-user/src/routes -type f 2>/dev/null | head -30
echo ""
echo "=== Veligo routes structure ==="
find veligo-platform/frontend/src/routes -type f 2>/dev/null | head -30
echo ""
echo "=== Check veligo lib components ==="
ls veligo-platform/frontend/src/lib/components/ 2>/dev/null | head -20
</bash>

=== Action Results ===
bash: OK
=== Tenant routes structure ===
tenant/frontend-user/src/routes/(app)/marketplace/templates/+page.server.ts
tenant/frontend-user/src/routes/(app)/marketplace/templates/+page.svelte
tenant/frontend-user/src/routes/(app)/marketplace/modules/+page.server.ts
tenant/frontend-user/src/routes/(app)/marketplace/modules/+page.svelte
tenant/frontend-user/src/routes/(app)/marketplace/+layout.svelte
tenant/frontend-user/src/routes/(app)/admin/swarm/+page.svelte
tenant/frontend-user/src/routes/(app)/admin/+p
```
