# Task T1241: R√©√©crire subscription.journey.spec.ts - UI only

**Priority**: P1
**Time Estimate**: 2h
**WSJF Score**: 11.0
**Complexity**: medium
**Queue**: TDD

## Description
Le fichier subscription.journey.spec.ts contient des appels REST directs:
- `request.get('/api/catalog/plans')`
- `request.post('/api/subscriptions')`
- `request.get('/api/subscriptions')`
- `request.post('/api/subscriptions/:id/cancel')`
- `request.get('/api/subsidies/idfm')`

Ces appels testent REST, pas le vrai flux gRPC utilis√© en production.

## Success Criteria
- [ ] 0 occurrence de `request.post` dans subscription.journey.spec.ts
- [ ] 0 occurrence de `request.get` dans subscription.journey.spec.ts
- [ ] Tous les tests utilisent Playwright UI
- [ ] Tests v√©rifient le flux complet: catalog ‚Üí checkout ‚Üí payment ‚Üí confirmation
- [ ] npm run test:e2e -- --grep "subscription" passe

## Actions
1. Supprimer la section "API Tests" (lignes 910+)
2. Remplacer loginUser() par vraie interaction UI
3. Tests catalog: naviguer vers /catalog, v√©rifier plans affich√©s
4. Tests checkout: s√©lectionner plan via UI, v√©rifier prix affich√©
5. Tests subscription: cr√©er via UI compl√®te (pas API)

## Files to Create/Modify
- [ ] veligo-platform/tests/e2e/journeys/subscription.journey.spec.ts (MODIFY)

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
MODEL_TIER: TIER1
WSJF: 11.0
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 20:46:05 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1241.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1241[0m
[0;34m[AGENT] Iteration 1/10[0m
[0;31m[AGENT] Local LLM failed: HTTPConnectionPool(host='127.0.0.1', port=8002): Read timed out. (read timeout=300)[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 20:50:48 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1241.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1241[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```

## Last Failure (Wed Jan 14 20:54:53 CET 2026)
```
[0;32m[AGENT] Real Agent starting[0m
[0;34m[AGENT] Task: /Users/sylvain/_LAPOSTE/_VELIGO2/tools/ralph-wiggum/tasks/T1241.md[0m
[0;34m[AGENT] Queue: tdd[0m
[0;34m[AGENT] Backend: auto[0m
[0;32m[AGENT] Starting task: T1241[0m
[0;34m[AGENT] Iteration 1/10[0m

============================================================
RESULT: FAILED
============================================================
ERROR: LLM call failed
```
