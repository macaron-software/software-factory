# Task T379: Souscription avec paiement CB 3D Secure

**Priority**: P0
**WSJF Score**: 9.5
**Queue**: TDD
**Category**: JOURNEY
**Original ID**: J-E2E-005
**Phase**: üö¥ PHASE 1: JOURNEYS E2E ESSENTIELS (Priority P0)
**Section**: 1.2 Souscription & Paiement

## Description
Souscription avec paiement CB 3D Secure

## Test File
`journeys/105-subscription-3ds.spec.ts`

## Estimated Files
4 fichier(s) √† modifier

## Success Criteria
- [ ] Test E2E cr√©√©/modifi√©: `journeys/105-subscription-3ds.spec.ts`
- [ ] Test passe en local
- [ ] Pas de test.skip() sans condition
- [ ] Code review adversarial pass√©
- [ ] Pas de stubs ou TODOs

## Definition of Done (DoD)
- [ ] Feature compl√®tement impl√©ment√©e
- [ ] Tests E2E verts
- [ ] Conformit√© AO v√©rifi√©e (si applicable)
- [ ] Documentation mise √† jour

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 9.5
CATEGORY: JOURNEY
ORIGINAL_ID: J-E2E-005
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 13:21:20 CET 2026)
```
wc -l "./tools/ralph-wiggum/tasks/tests/fixtures/test-data.ts" && head -100 "./tools/ralph-wiggum/tasks/tests/fixtures/test-data.ts"</bash>

=== Action Results ===
bash: OK
     161 ./tools/ralph-wiggum/tasks/tests/fixtures/test-data.ts
export const tenants = [
  { id: 'tenant-idfm', name: '√éle-de-France Mobilit√©s', slug: 'idfm' },
  { id: 'tenant-nantes', name: 'Nantes M√©tropole', slug: 'nantes' },
  { id: 'tenant-lyon', name: 'TCL Lyon', slug: 'lyon' }
];

export const users = {
  USER_IDFM: {
    id: 'user-idfm-001',
    email: 'marie.dupont@test-idfm.fr',
    password: 'Test2025!Secure',
    firstName: 'Marie',
    lastName: 'Dupont',
    phone: '0612345678',
 
```

## Last Failure (Wed Jan 14 13:21:58 CET 2026)
```
<bash>
strings "./tools/ralph-wiggum/tasks/tests/journeys/105-subscription-3ds.spec.ts" | head -50</bash>

=== Action Results ===
bash: OK
import { test, expect } from '@playwright/test';
import { users, plans } from '../fixtures/test-data';
test.describe('J-E2E-005: Souscription avec paiement CB 3D Secure', () => {
  let testUser: { email: string; password: string };
  test.beforeAll(async () => {
    testUser = {
      email: `test.3ds.${Date.now()}@veligo.app`,
      password: 'SecurePass123!'
    };
  });
  test.beforeEach(async ({ page }) => {
    await page.goto('/subscription');
  });
  test('DEV-001: S
lection plan Standard
```

## Last Failure (Wed Jan 14 13:22:42 CET 2026)
```
<bash>
strings ./tools/ralph-wiggum/tasks/tests/journeys/105-subscription-3ds.spec.ts</bash>

=== Action Results ===
bash: OK
import { test, expect } from '@playwright/test';
import { users, plans } from '../fixtures/test-data';
test.describe('J-E2E-005: Souscription avec paiement CB 3D Secure', () => {
  let testUser: { email: string; password: string };
  test.beforeAll(async () => {
    testUser = {
      email: `test.3ds.${Date.now()}@veligo.app`,
      password: 'SecurePass123!'
    };
  });
  test.beforeEach(async ({ page }) => {
    await page.goto('/subscription');
  });
  test('DEV-001: S
lection plan Standard
```
