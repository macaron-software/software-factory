# Task T400: DÃ©claration incident pendant course

**Priority**: P1
**WSJF Score**: 8.5
**Queue**: TDD
**Category**: JOURNEY
**Original ID**: J-E2E-014
**Phase**: ðŸš´ PHASE 1: JOURNEYS E2E ESSENTIELS (Priority P0)
**Section**: 1.4 Incidents & Support

## Description
DÃ©claration incident pendant course

## Test File
`journeys/114-incident-during-ride.spec.ts`

## Estimated Files
3 fichier(s) Ã  modifier

## Success Criteria
- [ ] Test E2E crÃ©Ã©/modifiÃ©: `journeys/114-incident-during-ride.spec.ts`
- [ ] Test passe en local
- [ ] Pas de test.skip() sans condition
- [ ] Code review adversarial passÃ©
- [ ] Pas de stubs ou TODOs

## Definition of Done (DoD)
- [ ] Feature complÃ¨tement implÃ©mentÃ©e
- [ ] Tests E2E verts
- [ ] ConformitÃ© AO vÃ©rifiÃ©e (si applicable)
- [ ] Documentation mise Ã  jour

## Ralph Status Block
---RALPH_STATUS---
STATUS: FAILED
COMPLEXITY: medium
WSJF: 8.5
CATEGORY: JOURNEY
ORIGINAL_ID: J-E2E-014
---END_RALPH_STATUS---

## Last Failure (Wed Jan 14 13:26:22 CET 2026)
```
=== Action Results ===
bash: OK
/**
 * E2E Journey Tests - Booking Complete
 * TDD Red Phase - Real selectors, real fixtures, real API calls
 *
 * Personas tested:
 * - USER_IDFM: User with active subscription, can book bikes
 * - USER_NANTES: User with Naolib integration
 * - USER_LYON: User with TCL multimodal integration
 *
 * Journeys covered:
 * 1. Browse stations (map + list)
 * 2. Select station
 * 3. Select bike
 * 4. Choose time slot
 * 5. Confirm booking
 * 6. Pickup instructions
 * 7. Cancel booking
 * 8. Booking hi
```

## Last Failure (Wed Jan 14 13:27:15 CET 2026)
```

=== Action Results ===
bash: OK
      const unread = page.locator(SEL.notificationUnread);
      if (await unread.count() > 0) {
        await unread.first().click();

        // Badge should decrease
        await page.click(SEL.notificationBell);
        await expect(unread.first()).toHaveClass(/read/);
      }
    });

    test('should mark all as read', async ({ page }) => {
      await loginUser(page);
      await page.click(SEL.notificationBell);

      await page.click(SEL.markAllRead);

      await expect(page.locator(
```

## Last Failure (Wed Jan 14 13:28:01 CET 2026)
```
<bash>
cat ./veligo-platform/frontend/tests/journeys/booking.journey.spec.ts | tail -200</bash>

=== Action Results ===
bash: OK
    if (hasBooking) {
      const status = bookingCard.locator(SELECTORS.history.status);
      await expect(status).toBeVisible();
      await expect(status).toContainText(/terminÃ©|annulÃ©|en cours|completed|cancelled|active/i);
    }
  });

  test('B6.3 - Nominal: Filter by status', async ({ page }) => {
    const filter = page.locator(SELECTORS.history.filter);
    if (await filter.isVisible()) {
      await filter.selectOption('completed');

      await page.waitForTimeout(500);

      // All
```
