graph TB
    subgraph APP["Platform (FastAPI)"]
        MW["OTEL ASGI\nMiddleware"]
        SPANS["Trace Spans\nrequest, agent\nworkflow, LLM"]
        METRICS["Metrics\nlatency, error rate\nthroughput"]
    end

    subgraph WATCHDOG["Continuous Watchdog"]
        HEALTH["Health Check\nevery 60s"]
        STALL["Stall Detection\nphases > 60min"]
        RESUME["Auto-Resume\n5/batch, every 5min"]
        SESSION["Session Recovery\ninactive > 30min"]
        CLEANUP["Failed Cleanup\nzombie sessions"]
    end

    subgraph ANALYSIS["Failure Analysis"]
        CLASS["Error Classification\nsetup_failed, llm_provider\ntimeout, phase_error"]
        HEATMAP["Phase Heatmap\nfailure rates by phase"]
        RECO["Recommendations\nactionable suggestions"]
    end

    subgraph QUALITY["Quality Engine"]
        DIM["10 Dimensions\ncomplexity, coverage\nsecurity, a11y..."]
        GATES["Quality Gates\nPASS / FAIL / PENDING"]
        SCORE["Project Scores\nradar chart"]
    end

    subgraph EXPORT["Export Layer"]
        OTLP["OTLP/HTTP\nExporter"]
        JAEGER["Jaeger\nport 16686"]
    end

    subgraph DASHBOARD["Dashboard /analytics"]
        TRACE_UI["Tracing Stats\nlatency chart"]
        FAIL_UI["Failure Analysis\nerror doughnut\nphase bars"]
        QUAL_UI["Quality Radar\nbadge, scorecard"]
        RESUME_BTN["Resume All\nbutton"]
    end

    subgraph DB["Data"]
        SQLITE[(platform.db\nmissions, runs\nsessions)]
    end

    MW --> SPANS
    SPANS --> OTLP
    OTLP --> JAEGER
    MW --> METRICS

    HEALTH --> SQLITE
    STALL --> SQLITE
    RESUME --> APP
    SESSION --> SQLITE
    CLEANUP --> SQLITE

    CLASS --> SQLITE
    HEATMAP --> SQLITE
    RECO --> CLASS

    DIM --> SQLITE
    GATES --> DIM
    SCORE --> DIM

    TRACE_UI --> JAEGER
    FAIL_UI --> CLASS
    FAIL_UI --> HEATMAP
    QUAL_UI --> SCORE
    RESUME_BTN --> RESUME

    classDef app fill:#fff3e0,stroke:#e65100,color:#000
    classDef watch fill:#fce4ec,stroke:#c62828,color:#000
    classDef analysis fill:#e8f5e9,stroke:#2e7d32,color:#000
    classDef quality fill:#e3f2fd,stroke:#1565c0,color:#000
    classDef export fill:#f3e5f5,stroke:#6a1b9a,color:#000
    classDef dash fill:#e0f7fa,stroke:#00695c,color:#000
    classDef data fill:#eceff1,stroke:#37474f,color:#000

    class MW,SPANS,METRICS app
    class HEALTH,STALL,RESUME,SESSION,CLEANUP watch
    class CLASS,HEATMAP,RECO analysis
    class DIM,GATES,SCORE quality
    class OTLP,JAEGER export
    class TRACE_UI,FAIL_UI,QUAL_UI,RESUME_BTN dash
    class SQLITE data
