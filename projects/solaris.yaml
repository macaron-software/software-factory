# Solaris Design System — La Poste
# ==================================
# Agents UX/UI/A11y spécialisés, MCP Solaris obligatoire

project:
  name: solaris
  display_name: "Solaris Design System"
  root_path: /app/workspace/solaris
  vision_doc: SPECS.md
  domain: solaris
  description: >
    Design System officiel La Poste (Solaris). 41 composants Figma,
    WCAG 2.1 AA, tokens de design, validation automatique.

# Angular + SCSS avec Solaris tokens
domains:
  typescript:
    paths:
      - src/
    extensions:
      - .ts
      - .tsx
    build_cmd: npm run build
    test_cmd: npm run test
    lint_cmd: npm run lint

  scss:
    paths:
      - src/styles/
    extensions:
      - .scss
      - .css
    build_cmd: "true"
    test_cmd: "true"
    lint_cmd: npx stylelint "src/**/*.scss"

deploy:
  strategy: validation-only
  auto_prod: false
  rollback_on_fail: true

fractal:
  enabled: true
  max_files: 5
  max_loc: 300
  max_items: 8
  max_depth: 2

# Agents Solaris — affectés automatiquement
agents:
  lead: solaris_ux_designer
  team:
    - solaris_ux_designer
    - solaris_ui_developer
    - solaris_design_qa
    - accessibility_expert
    - dev_frontend
    - lead_frontend

# Design System constraints
design_system:
  name: solaris
  mcp: mcp-solaris
  enforce: true       # DS obligatoire — pas de composants hors DS
  wcag_level: AA
  figma_sync: true    # Validation automatique Figma vs code

# Adversarial gate — strict pour le DS
adversarial:
  threshold: 5
  custom_patterns:
    # Couleur CSS hardcodée directe (pas dans var(--..., fallback) )
    - pattern: '(?:background|color|border|fill|stroke)\s*:\s*#[0-9a-fA-F]{3,6}\b(?!\s*\))'
      score: 4
      message: "Hardcoded CSS color — must use var(--color-*) Solaris token"
    # Couleur hex sans propriété CSS (ex: dans un objet JS/TS)
    - pattern: ':\s*[''"]#[0-9a-fA-F]{6}[''"]'
      score: 4
      message: "Hardcoded hex string — must use Solaris token"
    # borderRadius hardcodé (doit venir du MCP Figma)
    - pattern: 'border-?[Rr]adius\s*:\s*\d+px(?!\s*\))'
      score: 3
      message: "Hardcoded borderRadius — use var(--border-radius-*) token from Figma MCP"
    # font-size hardcodé
    - pattern: 'font-size\s*:\s*\d+(?:px|rem)(?!\s*\))'
      score: 3
      message: "Hardcoded font-size — use var(--font-size-*) Solaris token"
